function lamejs(){function V(c){return new Int32Array(c)}function J(c){return new Float32Array(c)}function ca(c){if(1==c.length)return J(c[0]);var h=c[0];c=c.slice(1);for(var n=[],u=0;u<h;u++)n.push(ca(c));return n}function Xa(c){if(1==c.length)return V(c[0]);var h=c[0];c=c.slice(1);for(var n=[],u=0;u<h;u++)n.push(Xa(c));return n}function kc(c){if(1==c.length)return new Int16Array(c[0]);var h=c[0];c=c.slice(1);for(var n=[],u=0;u<h;u++)n.push(kc(c));return n}function Pb(c){if(1==c.length)return Array(c[0]);
var h=c[0];c=c.slice(1);for(var n=[],u=0;u<h;u++)n.push(Pb(c));return n}function sa(c){this.ordinal=c}function F(c){this.ordinal=c}function ka(c){this.ordinal=function(){return c}}function wc(){this.getLameVersion=function(){return"3.98.4"};this.getLameShortVersion=function(){return"3.98.4"};this.getLameVeryShortVersion=function(){return"LAME3.98r"};this.getPsyVersion=function(){return"0.93"};this.getLameUrl=function(){return"http://www.mp3dev.org/"};this.getLameOsBitness=function(){return"32bits"}}
function W(){function c(f,b,c,a,k,h){for(;0!=k--;)c[a]=1E-10+f[b+0]*h[0]-c[a-1]*h[1]+f[b-1]*h[2]-c[a-2]*h[3]+f[b-2]*h[4]-c[a-3]*h[5]+f[b-3]*h[6]-c[a-4]*h[7]+f[b-4]*h[8]-c[a-5]*h[9]+f[b-5]*h[10]-c[a-6]*h[11]+f[b-6]*h[12]-c[a-7]*h[13]+f[b-7]*h[14]-c[a-8]*h[15]+f[b-8]*h[16]-c[a-9]*h[17]+f[b-9]*h[18]-c[a-10]*h[19]+f[b-10]*h[20],++a,++b}function h(f,b,c,a,k,h){for(;0!=k--;)c[a]=f[b+0]*h[0]-c[a-1]*h[1]+f[b-1]*h[2]-c[a-2]*h[3]+f[b-2]*h[4],++a,++b}function n(f){return f*f}var E=W.RMS_WINDOW_TIME_NUMERATOR,
D=W.RMS_WINDOW_TIME_DENOMINATOR,B=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9.291677959E-5,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,1.2025322027E-4,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,
9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,
-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-8.28086748E-6,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,
.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,
.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,
-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,
-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],r=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,
.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];this.InitGainAnalysis=function(f,b){a:{for(var c=0;c<MAX_ORDER;c++)f.linprebuf[c]=f.lstepbuf[c]=f.loutbuf[c]=f.rinprebuf[c]=
f.rstepbuf[c]=f.routbuf[c]=0;switch(0|b){case 48E3:f.reqindex=0;break;case 44100:f.reqindex=1;break;case 32E3:f.reqindex=2;break;case 24E3:f.reqindex=3;break;case 22050:f.reqindex=4;break;case 16E3:f.reqindex=5;break;case 12E3:f.reqindex=6;break;case 11025:f.reqindex=7;break;case 8E3:f.reqindex=8;break;default:b=INIT_GAIN_ANALYSIS_ERROR;break a}f.sampleWindow=0|(b*E+D-1)/D;f.lsum=0;f.rsum=0;f.totsamp=0;ya.ill(f.A,0);b=INIT_GAIN_ANALYSIS_OK}if(b!=INIT_GAIN_ANALYSIS_OK)return INIT_GAIN_ANALYSIS_ERROR;
f.linpre=MAX_ORDER;f.rinpre=MAX_ORDER;f.lstep=MAX_ORDER;f.rstep=MAX_ORDER;f.lout=MAX_ORDER;f.rout=MAX_ORDER;ya.fill(f.B,0);return INIT_GAIN_ANALYSIS_OK};this.AnalyzeSamples=function(f,b,z,a,k,u,e){if(0==u)return GAIN_ANALYSIS_OK;var m=0;var d=u;switch(e){case 1:a=b;k=z;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}u<MAX_ORDER?(S.arraycopy(b,z,f.linprebuf,MAX_ORDER,u),S.arraycopy(a,k,f.rinprebuf,MAX_ORDER,u)):(S.arraycopy(b,z,f.linprebuf,MAX_ORDER,MAX_ORDER),S.arraycopy(a,k,f.rinprebuf,MAX_ORDER,
MAX_ORDER));for(;0<d;){var g=d>f.sampleWindow-f.totsamp?f.sampleWindow-f.totsamp:d;if(m<MAX_ORDER){e=f.linpre+m;var t=f.linprebuf;var y=f.rinpre+m;var p=f.rinprebuf;g>MAX_ORDER-m&&(g=MAX_ORDER-m)}else e=z+m,t=b,y=k+m,p=a;c(t,e,f.lstepbuf,f.lstep+f.totsamp,g,B[f.reqindex]);c(p,y,f.rstepbuf,f.rstep+f.totsamp,g,B[f.reqindex]);h(f.lstepbuf,f.lstep+f.totsamp,f.loutbuf,f.lout+f.totsamp,g,r[f.reqindex]);h(f.rstepbuf,f.rstep+f.totsamp,f.routbuf,f.rout+f.totsamp,g,r[f.reqindex]);e=f.lout+f.totsamp;t=f.loutbuf;
y=f.rout+f.totsamp;p=f.routbuf;for(var q=g%8;0!=q--;)f.lsum+=n(t[e++]),f.rsum+=n(p[y++]);for(q=g/8;0!=q--;)f.lsum+=n(t[e+0])+n(t[e+1])+n(t[e+2])+n(t[e+3])+n(t[e+4])+n(t[e+5])+n(t[e+6])+n(t[e+7]),e+=8,f.rsum+=n(p[y+0])+n(p[y+1])+n(p[y+2])+n(p[y+3])+n(p[y+4])+n(p[y+5])+n(p[y+6])+n(p[y+7]),y+=8;d-=g;m+=g;f.totsamp+=g;f.totsamp==f.sampleWindow&&(e=10*W.STEPS_per_dB*Math.log10((f.lsum+f.rsum)/f.totsamp*.5+1E-37),e=0>=e?0:0|e,e>=f.A.length&&(e=f.A.length-1),f.A[e]++,f.lsum=f.rsum=0,S.arraycopy(f.loutbuf,
f.totsamp,f.loutbuf,0,MAX_ORDER),S.arraycopy(f.routbuf,f.totsamp,f.routbuf,0,MAX_ORDER),S.arraycopy(f.lstepbuf,f.totsamp,f.lstepbuf,0,MAX_ORDER),S.arraycopy(f.rstepbuf,f.totsamp,f.rstepbuf,0,MAX_ORDER),f.totsamp=0);if(f.totsamp>f.sampleWindow)return GAIN_ANALYSIS_ERROR}u<MAX_ORDER?(S.arraycopy(f.linprebuf,u,f.linprebuf,0,MAX_ORDER-u),S.arraycopy(f.rinprebuf,u,f.rinprebuf,0,MAX_ORDER-u),S.arraycopy(b,z,f.linprebuf,MAX_ORDER-u,u),S.arraycopy(a,k,f.rinprebuf,MAX_ORDER-u,u)):(S.arraycopy(b,z+u-MAX_ORDER,
f.linprebuf,0,MAX_ORDER),S.arraycopy(a,k+u-MAX_ORDER,f.rinprebuf,0,MAX_ORDER));return GAIN_ANALYSIS_OK};this.GetTitleGain=function(f){var b=f.A;var c=f.A.length,a,k=0;for(a=0;a<c;a++)k+=b[a];if(0==k)b=GAIN_NOT_ENOUGH_SAMPLES;else{k=0|Math.ceil(k*(1-.95));for(a=c;0<a--&&!(0>=(k-=b[a])););b=64.82-a/W.STEPS_per_dB}for(c=0;c<f.A.length;c++)f.B[c]+=f.A[c],f.A[c]=0;for(c=0;c<MAX_ORDER;c++)f.linprebuf[c]=f.lstepbuf[c]=f.loutbuf[c]=f.rinprebuf[c]=f.rstepbuf[c]=f.routbuf[c]=0;f.totsamp=0;f.lsum=f.rsum=0;return b}}
function xc(){function c(b,c,a,f,h,e,m,d,g,t,y,p,q,w,pa){this.vbr_q=b;this.quant_comp=c;this.quant_comp_s=a;this.expY=f;this.st_lrm=h;this.st_s=e;this.masking_adj=m;this.masking_adj_short=d;this.ath_lower=g;this.ath_curve=t;this.ath_sensitivity=y;this.interch=p;this.safejoint=q;this.sfb21mod=w;this.msfix=pa}function h(b,c,a,f,h,e,m,d,g,t,y,p,q,w){this.quant_comp=c;this.quant_comp_s=a;this.safejoint=f;this.nsmsfix=h;this.st_lrm=e;this.st_s=m;this.nsbass=d;this.scale=g;this.masking_adj=t;this.ath_lower=
y;this.ath_curve=p;this.interch=q;this.sfscale=w}function n(b,c,a){var f=b.VBR==F.vbr_rh?B:r,h=b.VBR_q_frac,e=f[c];f=f[c+1];e.st_lrm+=h*(f.st_lrm-e.st_lrm);e.st_s+=h*(f.st_s-e.st_s);e.masking_adj+=h*(f.masking_adj-e.masking_adj);e.masking_adj_short+=h*(f.masking_adj_short-e.masking_adj_short);e.ath_lower+=h*(f.ath_lower-e.ath_lower);e.ath_curve+=h*(f.ath_curve-e.ath_curve);e.ath_sensitivity+=h*(f.ath_sensitivity-e.ath_sensitivity);e.interch+=h*(f.interch-e.interch);e.msfix+=h*(f.msfix-e.msfix);f=
e.vbr_q;0>f&&(f=0);9<f&&(f=9);b.VBR_q=f;b.VBR_q_frac=0;0!=a?b.quant_comp=e.quant_comp:0<Math.abs(b.quant_comp- -1)||(b.quant_comp=e.quant_comp);0!=a?b.quant_comp_short=e.quant_comp_s:0<Math.abs(b.quant_comp_short- -1)||(b.quant_comp_short=e.quant_comp_s);0!=e.expY&&(b.experimentalY=0!=e.expY);0!=a?b.internal_flags.nsPsy.attackthre=e.st_lrm:0<Math.abs(b.internal_flags.nsPsy.attackthre- -1)||(b.internal_flags.nsPsy.attackthre=e.st_lrm);0!=a?b.internal_flags.nsPsy.attackthre_s=e.st_s:0<Math.abs(b.internal_flags.nsPsy.attackthre_s-
-1)||(b.internal_flags.nsPsy.attackthre_s=e.st_s);0!=a?b.maskingadjust=e.masking_adj:0<Math.abs(b.maskingadjust-0)||(b.maskingadjust=e.masking_adj);0!=a?b.maskingadjust_short=e.masking_adj_short:0<Math.abs(b.maskingadjust_short-0)||(b.maskingadjust_short=e.masking_adj_short);0!=a?b.ATHlower=-e.ath_lower/10:0<Math.abs(10*-b.ATHlower)||(b.ATHlower=-e.ath_lower/10);0!=a?b.ATHcurve=e.ath_curve:0<Math.abs(b.ATHcurve- -1)||(b.ATHcurve=e.ath_curve);0!=a?b.athaa_sensitivity=e.ath_sensitivity:0<Math.abs(b.athaa_sensitivity-
-1)||(b.athaa_sensitivity=e.ath_sensitivity);0<e.interch&&(0!=a?b.interChRatio=e.interch:0<Math.abs(b.interChRatio- -1)||(b.interChRatio=e.interch));0<e.safejoint&&(b.exp_nspsytune|=e.safejoint);0<e.sfb21mod&&(b.exp_nspsytune|=e.sfb21mod<<20);0!=a?b.msfix=e.msfix:0<Math.abs(b.msfix- -1)||(b.msfix=e.msfix);0==a&&(b.VBR_q=c,b.VBR_q_frac=h)}function E(b,c,a){var k=D.nearestBitrateFullIndex(c);b.VBR=F.vbr_abr;b.VBR_mean_bitrate_kbps=c;b.VBR_mean_bitrate_kbps=Math.min(b.VBR_mean_bitrate_kbps,320);b.VBR_mean_bitrate_kbps=
Math.max(b.VBR_mean_bitrate_kbps,8);b.brate=b.VBR_mean_bitrate_kbps;320<b.VBR_mean_bitrate_kbps&&(b.disable_reservoir=!0);0<f[k].safejoint&&(b.exp_nspsytune|=2);0<f[k].sfscale&&(b.internal_flags.noise_shaping=2);if(0<Math.abs(f[k].nsbass)){var h=int(4*f[k].nsbass);0>h&&(h+=64);b.exp_nspsytune|=h<<2}0!=a?b.quant_comp=f[k].quant_comp:0<Math.abs(b.quant_comp- -1)||(b.quant_comp=f[k].quant_comp);0!=a?b.quant_comp_short=f[k].quant_comp_s:0<Math.abs(b.quant_comp_short- -1)||(b.quant_comp_short=f[k].quant_comp_s);
0!=a?b.msfix=f[k].nsmsfix:0<Math.abs(b.msfix- -1)||(b.msfix=f[k].nsmsfix);0!=a?b.internal_flags.nsPsy.attackthre=f[k].st_lrm:0<Math.abs(b.internal_flags.nsPsy.attackthre- -1)||(b.internal_flags.nsPsy.attackthre=f[k].st_lrm);0!=a?b.internal_flags.nsPsy.attackthre_s=f[k].st_s:0<Math.abs(b.internal_flags.nsPsy.attackthre_s- -1)||(b.internal_flags.nsPsy.attackthre_s=f[k].st_s);0!=a?b.scale=f[k].scale:0<Math.abs(b.scale- -1)||(b.scale=f[k].scale);0!=a?b.maskingadjust=f[k].masking_adj:0<Math.abs(b.maskingadjust-
0)||(b.maskingadjust=f[k].masking_adj);0<f[k].masking_adj?0!=a?b.maskingadjust_short=.9*f[k].masking_adj:0<Math.abs(b.maskingadjust_short-0)||(b.maskingadjust_short=.9*f[k].masking_adj):0!=a?b.maskingadjust_short=1.1*f[k].masking_adj:0<Math.abs(b.maskingadjust_short-0)||(b.maskingadjust_short=1.1*f[k].masking_adj);0!=a?b.ATHlower=-f[k].ath_lower/10:0<Math.abs(10*-b.ATHlower)||(b.ATHlower=-f[k].ath_lower/10);0!=a?b.ATHcurve=f[k].ath_curve:0<Math.abs(b.ATHcurve- -1)||(b.ATHcurve=f[k].ath_curve);0!=
a?b.interChRatio=f[k].interch:0<Math.abs(b.interChRatio- -1)||(b.interChRatio=f[k].interch);return c}var D;this.setModules=function(b){D=b};var B=[new c(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new c(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new c(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new c(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new c(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new c(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2E-4,0,0,1.95),new c(6,9,9,1,6.6,145,.67,.65,-14.7,
6.5,-19,4E-4,0,0,2.3),new c(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6E-4,0,0,2.7),new c(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7E-4,0,0,0),new c(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8E-4,0,0,0),new c(10,9,9,1,6.6,145,2,2,-36,12,-25,8E-4,0,0,0)],r=[new c(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new c(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new c(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new c(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new c(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new c(5,
9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2E-4,0,0,1.95),new c(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4E-4,0,0,2),new c(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6E-4,0,0,2),new c(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7E-4,0,0,2),new c(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8E-4,0,0,2),new c(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8E-4,0,0,2)],f=[new h(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new h(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new h(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new h(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),
new h(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9E-4,1),new h(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9E-4,1),new h(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8E-4,1),new h(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8E-4,1),new h(80,9,9,0,0,6.6,145,0,.95,0,0,8,7E-4,1),new h(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6E-4,1),new h(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5E-4,1),new h(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2E-4,1),new h(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new h(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new h(224,9,9,1,1.25,5.2,
125,0,.98,-6,9,2,0,0),new h(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new h(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];this.apply_preset=function(b,c,a){switch(c){case U.R3MIX:c=U.V3;b.VBR=F.vbr_mtrh;break;case U.MEDIUM:c=U.V4;b.VBR=F.vbr_rh;break;case U.MEDIUM_FAST:c=U.V4;b.VBR=F.vbr_mtrh;break;case U.STANDARD:c=U.V2;b.VBR=F.vbr_rh;break;case U.STANDARD_FAST:c=U.V2;b.VBR=F.vbr_mtrh;break;case U.EXTREME:c=U.V0;b.VBR=F.vbr_rh;break;case U.EXTREME_FAST:c=U.V0;b.VBR=F.vbr_mtrh;break;case U.INSANE:return c=
320,b.preset=c,E(b,c,a),b.VBR=F.vbr_off,c}b.preset=c;switch(c){case U.V9:return n(b,9,a),c;case U.V8:return n(b,8,a),c;case U.V7:return n(b,7,a),c;case U.V6:return n(b,6,a),c;case U.V5:return n(b,5,a),c;case U.V4:return n(b,4,a),c;case U.V3:return n(b,3,a),c;case U.V2:return n(b,2,a),c;case U.V1:return n(b,1,a),c;case U.V0:return n(b,0,a),c}if(8<=c&&320>=c)return E(b,c,a);b.preset=0;return c}}function sb(){function u(a){this.bits=0|a}function h(a,d,p,b,e,c){d=.5946/d;for(a>>=1;0!=a--;)e[c++]=d>p[b++]?
0:1,e[c++]=d>p[b++]?0:1}function n(a,d,b,e,c,m){a>>=1;var l=a%2;for(a>>=1;0!=a--;){var p=b[e++]*d;var q=b[e++]*d;var w=0|p;var f=b[e++]*d;var g=0|q;var pa=b[e++]*d;var y=0|f;p+=B.adj43[w];w=0|pa;q+=B.adj43[g];c[m++]=0|p;f+=B.adj43[y];c[m++]=0|q;pa+=B.adj43[w];c[m++]=0|f;c[m++]=0|pa}0!=l&&(p=b[e++]*d,q=b[e++]*d,p+=B.adj43[0|p],q+=B.adj43[0|q],c[m++]=0|p,c[m++]=0|q)}function E(a,d,b,e){var p,c=d,l=p=0;do{var q=a[c++],m=a[c++];p<q&&(p=q);l<m&&(l=m)}while(c<b);p<l&&(p=l);switch(p){case 0:return p;case 1:c=
d;d=0;p=r.ht[1].hlen;do l=2*a[c+0]+a[c+1],c+=2,d+=p[l];while(c<b);e.bits+=d;return 1;case 2:case 3:c=d;d=f[p-1];p=0;l=r.ht[d].xlen;q=2==d?r.table23:r.table56;do m=a[c+0]*l+a[c+1],c+=2,p+=q[m];while(c<b);a=p&65535;p>>=16;p>a&&(p=a,d++);e.bits+=p;return d;case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:c=d;d=f[p-1];q=l=p=0;m=r.ht[d].xlen;var g=r.ht[d].hlen,y=r.ht[d+1].hlen,t=r.ht[d+2].hlen;do{var k=a[c+0]*m+a[c+1];c+=2;p+=g[k];l+=y[k];q+=t[k]}while(c<b);a=d;
p>l&&(p=l,a++);p>q&&(p=q,a=d+2);e.bits+=p;return a;default:if(p>ha.IXMAX_VAL)return e.bits=ha.LARGE_BITS,-1;p-=15;for(c=24;32>c&&!(r.ht[c].linmax>=p);c++);for(l=c-8;24>l&&!(r.ht[l].linmax>=p);l++);p=l;q=65536*r.ht[p].xlen+r.ht[c].xlen;l=0;do m=a[d++],g=a[d++],0!=m&&(14<m&&(m=15,l+=q),m*=16),0!=g&&(14<g&&(g=15,l+=q),m+=g),l+=r.largetbl[m];while(d<b);a=l&65535;l>>=16;l>a&&(l=a,p=c);e.bits+=l;return p}}function D(a,d,p,b,e,m,l,g){for(var q=d.big_values,f=2;f<c.SBMAX_l+1;f++){var v=a.scalefac_band.l[f];
if(v>=q)break;var w=e[f-2]+d.count1bits;if(p.part2_3_length<=w)break;w=new u(w);v=E(b,v,q,w);w=w.bits;p.part2_3_length<=w||(p.assign(d),p.part2_3_length=w,p.region0_count=m[f-2],p.region1_count=f-2-m[f-2],p.table_select[0]=l[f-2],p.table_select[1]=g[f-2],p.table_select[2]=v)}}var B=null;this.qupvt=null;this.setModules=function(a){B=this.qupvt=a};var da=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]],f=[1,2,
5,7,7,10,10,13,13,13,13,13,13,13,13];this.noquant_count_bits=function(a,d,p){var b=d.l3_enc,e=Math.min(576,d.max_nonzero_coeff+2>>1<<1);null!=p&&(p.sfb_count1=0);for(;1<e&&0==(b[e-1]|b[e-2]);e-=2);d.count1=e;for(var m=0,l=0;3<e&&!(1<((b[e-1]|b[e-2]|b[e-3]|b[e-4])&2147483647));e-=4){var f=2*(2*(2*b[e-4]+b[e-3])+b[e-2])+b[e-1];m+=r.t32l[f];l+=r.t33l[f]}f=m;d.count1table_select=0;m>l&&(f=l,d.count1table_select=1);d.count1bits=f;d.big_values=e;if(0==e)return f;d.block_type==c.SHORT_TYPE?(m=3*a.scalefac_band.s[3],
m>d.big_values&&(m=d.big_values),l=d.big_values):d.block_type==c.NORM_TYPE?(m=d.region0_count=a.bv_scf[e-2],l=d.region1_count=a.bv_scf[e-1],l=a.scalefac_band.l[m+l+2],m=a.scalefac_band.l[m+1],l<e&&(f=new u(f),d.table_select[2]=E(b,l,e,f),f=f.bits)):(d.region0_count=7,d.region1_count=c.SBMAX_l-1-7-1,m=a.scalefac_band.l[8],l=e,m>l&&(m=l));m=Math.min(m,e);l=Math.min(l,e);0<m&&(f=new u(f),d.table_select[0]=E(b,0,m,f),f=f.bits);m<l&&(f=new u(f),d.table_select[1]=E(b,m,l,f),f=f.bits);2==a.use_best_huffman&&
(d.part2_3_length=f,best_huffman_divide(a,d),f=d.part2_3_length);if(null!=p&&d.block_type==c.NORM_TYPE){for(b=0;a.scalefac_band.l[b]<d.big_values;)b++;p.sfb_count1=b}return f};this.count_bits=function(a,d,e,b){var p=e.l3_enc,m=ha.IXMAX_VAL/B.IPOW20(e.global_gain);if(e.xrpow_max>m)return ha.LARGE_BITS;m=B.IPOW20(e.global_gain);var l,f=0,g=0,q=0,y=0,k=0,t=p,z=0,C=d,I=0;var O=null!=b&&e.global_gain==b.global_gain;var G=e.block_type==c.SHORT_TYPE?38:21;for(l=0;l<=G;l++){var u=-1;if(O||e.block_type==c.NORM_TYPE)u=
e.global_gain-(e.scalefac[l]+(0!=e.preflag?B.pretab[l]:0)<<e.scalefac_scale+1)-8*e.subblock_gain[e.window[l]];if(O&&b.step[l]==u)0!=g&&(n(g,m,C,I,t,z),g=0),0!=q&&(h(q,m,C,I,t,z),q=0);else{var K=e.width[l];f+e.width[l]>e.max_nonzero_coeff&&(l=e.max_nonzero_coeff-f+1,ya.fill(p,e.max_nonzero_coeff,576,0),K=l,0>K&&(K=0),l=G+1);0==g&&0==q&&(t=p,z=k,C=d,I=y);null!=b&&0<b.sfb_count1&&l>=b.sfb_count1&&0<b.step[l]&&u>=b.step[l]?(0!=g&&(n(g,m,C,I,t,z),g=0,t=p,z=k,C=d,I=y),q+=K):(0!=q&&(h(q,m,C,I,t,z),q=0,t=
p,z=k,C=d,I=y),g+=K);if(0>=K){0!=q&&(h(q,m,C,I,t,z),q=0);0!=g&&(n(g,m,C,I,t,z),g=0);break}}l<=G&&(k+=e.width[l],y+=e.width[l],f+=e.width[l])}0!=g&&n(g,m,C,I,t,z);0!=q&&h(q,m,C,I,t,z);if(0!=(a.substep_shaping&2))for(m=0,G=.634521682242439/B.IPOW20(e.global_gain+e.scalefac_scale),f=0;f<e.sfbmax;f++)if(O=e.width[f],0==a.pseudohalf[f])m+=O;else for(g=m,m+=O;g<m;++g)p[g]=d[g]>=G?p[g]:0;return this.noquant_count_bits(a,e,b)};this.best_huffman_divide=function(a,d){var e=new zb,b=d.l3_enc,m=V(23),f=V(23),
l=V(23),g=V(23);if(d.block_type!=c.SHORT_TYPE||1!=a.mode_gr){e.assign(d);if(d.block_type==c.NORM_TYPE){for(var x=d.big_values,k=0;22>=k;k++)m[k]=ha.LARGE_BITS;for(k=0;16>k;k++){var y=a.scalefac_band.l[k+1];if(y>=x)break;var t=0,h=new u(t),z=E(b,0,y,h);t=h.bits;for(var C=0;8>C;C++){var I=a.scalefac_band.l[k+C+2];if(I>=x)break;h=t;h=new u(h);I=E(b,y,I,h);h=h.bits;m[k+C]>h&&(m[k+C]=h,f[k+C]=k,l[k+C]=z,g[k+C]=I)}}D(a,e,d,b,m,f,l,g)}x=e.big_values;if(!(0==x||1<(b[x-2]|b[x-1])||(x=d.count1+2,576<x))){e.assign(d);
e.count1=x;for(y=k=0;x>e.big_values;x-=4)t=2*(2*(2*b[x-4]+b[x-3])+b[x-2])+b[x-1],k+=r.t32l[t],y+=r.t33l[t];e.big_values=x;e.count1table_select=0;k>y&&(k=y,e.count1table_select=1);e.count1bits=k;e.block_type==c.NORM_TYPE?D(a,e,d,b,m,f,l,g):(e.part2_3_length=k,k=a.scalefac_band.l[8],k>x&&(k=x),0<k&&(a=new u(e.part2_3_length),e.table_select[0]=E(b,0,k,a),e.part2_3_length=a.bits),x>k&&(a=new u(e.part2_3_length),e.table_select[1]=E(b,k,x,a),e.part2_3_length=a.bits),d.part2_3_length>e.part2_3_length&&d.assign(e))}}};
var b=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],z=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],a=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],k=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];sb.slen1_tab=a;sb.slen2_tab=k;this.best_scalefac_store=function(d,e,p,m){var f=m.tt[e][p],g,l,q=0;for(g=l=0;g<f.sfbmax;g++){var x=f.width[g];l+=x;for(x=-x;0>x&&0==f.l3_enc[x+l];x++);0==x&&(f.scalefac[g]=q=-2)}if(0==f.scalefac_scale&&0==f.preflag){for(g=l=0;g<f.sfbmax;g++)0<f.scalefac[g]&&(l|=f.scalefac[g]);if(0==(l&1)&&0!=l){for(g=0;g<f.sfbmax;g++)0<
f.scalefac[g]&&(f.scalefac[g]>>=1);f.scalefac_scale=q=1}}if(0==f.preflag&&f.block_type!=c.SHORT_TYPE&&2==d.mode_gr){for(g=11;g<c.SBPSY_l&&!(f.scalefac[g]<B.pretab[g]&&-2!=f.scalefac[g]);g++);if(g==c.SBPSY_l){for(g=11;g<c.SBPSY_l;g++)0<f.scalefac[g]&&(f.scalefac[g]-=B.pretab[g]);f.preflag=q=1}}for(g=0;4>g;g++)m.scfsi[p][g]=0;if(2==d.mode_gr&&1==e&&m.tt[0][p].block_type!=c.SHORT_TYPE&&m.tt[1][p].block_type!=c.SHORT_TYPE){e=m.tt[1][p];l=m.tt[0][p];for(q=0;q<r.scfsi_band.length-1;q++){for(g=r.scfsi_band[q];g<
r.scfsi_band[q+1]&&!(l.scalefac[g]!=e.scalefac[g]&&0<=e.scalefac[g]);g++);if(g==r.scfsi_band[q+1]){for(g=r.scfsi_band[q];g<r.scfsi_band[q+1];g++)e.scalefac[g]=-1;m.scfsi[p][q]=1}}for(g=m=p=0;11>g;g++)-1!=e.scalefac[g]&&(m++,p<e.scalefac[g]&&(p=e.scalefac[g]));for(x=l=0;g<c.SBPSY_l;g++)-1!=e.scalefac[g]&&(x++,l<e.scalefac[g]&&(l=e.scalefac[g]));for(q=0;16>q;q++)p<b[q]&&l<z[q]&&(g=a[q]*m+k[q]*x,e.part2_length>g&&(e.part2_length=g,e.scalefac_compress=q));q=0}for(g=0;g<f.sfbmax;g++)-2==f.scalefac[g]&&
(f.scalefac[g]=0);0!=q&&(2==d.mode_gr?this.scale_bitcount(f):this.scale_bitcount_lsf(d,f))};var H=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],e=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],m=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(a){var d,g=0,f=0,w=a.scalefac;if(a.block_type==c.SHORT_TYPE){var k=H;0!=a.mixed_block_flag&&(k=e)}else if(k=m,0==a.preflag){for(d=11;d<c.SBPSY_l&&!(w[d]<B.pretab[d]);d++);if(d==c.SBPSY_l)for(a.preflag=1,d=11;d<c.SBPSY_l;d++)w[d]-=
B.pretab[d]}for(d=0;d<a.sfbdivide;d++)g<w[d]&&(g=w[d]);for(;d<a.sfbmax;d++)f<w[d]&&(f=w[d]);a.part2_length=ha.LARGE_BITS;for(d=0;16>d;d++)g<b[d]&&f<z[d]&&a.part2_length>k[d]&&(a.part2_length=k[d],a.scalefac_compress=d);return a.part2_length==ha.LARGE_BITS};var d=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(a,e){var b,f,m,k,l=V(4),v=e.scalefac;a=0!=e.preflag?2:0;for(m=0;4>m;m++)l[m]=0;if(e.block_type==c.SHORT_TYPE){var x=1;var h=B.nr_of_sfb_block[a][x];
for(b=k=0;4>b;b++){var t=h[b]/3;for(m=0;m<t;m++,k++)for(f=0;3>f;f++)v[3*k+f]>l[b]&&(l[b]=v[3*k+f])}}else for(x=0,h=B.nr_of_sfb_block[a][x],b=k=0;4>b;b++)for(t=h[b],m=0;m<t;m++,k++)v[k]>l[b]&&(l[b]=v[k]);t=!1;for(b=0;4>b;b++)l[b]>d[a][b]&&(t=!0);if(!t){e.sfb_partition_table=B.nr_of_sfb_block[a][x];for(b=0;4>b;b++)e.slen[b]=g[l[b]];x=e.slen[0];b=e.slen[1];l=e.slen[2];f=e.slen[3];switch(a){case 0:e.scalefac_compress=(5*x+b<<4)+(l<<2)+f;break;case 1:e.scalefac_compress=400+(5*x+b<<2)+l;break;case 2:e.scalefac_compress=
500+3*x+b;break;default:S.err.printf("intensity stereo not implemented yet\n")}}if(!t)for(b=e.part2_length=0;4>b;b++)e.part2_length+=e.slen[b]*e.sfb_partition_table[b];return t};var g=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(a){for(var d=2;576>=d;d+=2){for(var e=0,b;a.scalefac_band.l[++e]<d;);for(b=da[e][0];a.scalefac_band.l[b+1]>d;)b--;0>b&&(b=da[e][0]);a.bv_scf[d-2]=b;for(b=da[e][1];a.scalefac_band.l[b+a.bv_scf[d-2]+2]>d;)b--;0>b&&(b=da[e][1]);a.bv_scf[d-1]=b}}}function yc(){var c;
this.setModules=function(h){c=h};this.ResvFrameBegin=function(h,n){var u=h.internal_flags,D=u.l3_side,B=c.getframebits(h);n.bits=(B-8*u.sideinfo_len)/u.mode_gr;var r=2048*u.mode_gr-8;if(320<h.brate)var f=8*int(1E3*h.brate/(h.out_samplerate/1152)/8+.5);else f=11520,h.strict_ISO&&(f=8*int(32E4/(h.out_samplerate/1152)/8+.5));u.ResvMax=f-B;u.ResvMax>r&&(u.ResvMax=r);if(0>u.ResvMax||h.disable_reservoir)u.ResvMax=0;h=n.bits*u.mode_gr+Math.min(u.ResvSize,u.ResvMax);h>f&&(h=f);D.resvDrain_pre=0;null!=u.pinfo&&
(u.pinfo.mean_bits=n.bits/2,u.pinfo.resvsize=u.ResvSize);return h};this.ResvMaxBits=function(c,n,u,D){var h=c.internal_flags,r=h.ResvSize,f=h.ResvMax;0!=D&&(r+=n);0!=(h.substep_shaping&1)&&(f*=.9);u.bits=n;10*r>9*f?(D=r-9*f/10,u.bits+=D,h.substep_shaping|=128):(D=0,h.substep_shaping&=127,c.disable_reservoir||0!=(h.substep_shaping&1)||(u.bits-=.1*n));c=r<6*h.ResvMax/10?r:6*h.ResvMax/10;c-=D;0>c&&(c=0);return c};this.ResvAdjust=function(c,n){c.ResvSize-=n.part2_3_length+n.part2_length};this.ResvFrameEnd=
function(c,n){var h,u=c.l3_side;c.ResvSize+=n*c.mode_gr;n=0;u.resvDrain_post=0;u.resvDrain_pre=0;0!=(h=c.ResvSize%8)&&(n+=h);h=c.ResvSize-n-c.ResvMax;0<h&&(n+=h);h=Math.min(8*u.main_data_begin,n)/8;u.resvDrain_pre+=8*h;n-=8*h;c.ResvSize-=8*h;u.main_data_begin-=h;u.resvDrain_post+=n;c.ResvSize-=n}}function oa(){function u(a,e,b){for(;0<b;){if(0==y){y=8;t++;if(a.header[a.w_ptr].write_timing==g){var c=a;S.arraycopy(c.header[c.w_ptr].buf,0,d,t,c.sideinfo_len);t+=c.sideinfo_len;g+=8*c.sideinfo_len;c.w_ptr=
c.w_ptr+1&Y.MAX_HEADER_BUF-1}d[t]=0}c=Math.min(b,y);b-=c;y-=c;d[t]|=e>>b<<y;g+=c}}function h(a,d){var b=a.internal_flags,c;8<=d&&(u(b,76,8),d-=8);8<=d&&(u(b,65,8),d-=8);8<=d&&(u(b,77,8),d-=8);8<=d&&(u(b,69,8),d-=8);if(32<=d){var l=e.getLameShortVersion();if(32<=d)for(c=0;c<l.length&&8<=d;++c)d-=8,u(b,l.charAt(c),8)}for(;1<=d;--d)u(b,b.ancillary_flag,1),b.ancillary_flag^=a.disable_reservoir?0:1}function n(a,d,e){for(var b=a.header[a.h_ptr].ptr;0<e;){var l=Math.min(e,8-(b&7));e-=l;a.header[a.h_ptr].buf[b>>
3]|=d>>e<<8-(b&7)-l;b+=l}a.header[a.h_ptr].ptr=b}function E(a,d){a<<=8;for(var e=0;8>e;e++)a<<=1,d<<=1,0!=((d^a)&65536)&&(d^=32773);return d}function D(a,d){var e=r.ht[d.count1table_select+32],b,l=0,c=d.big_values,g=d.big_values;for(b=(d.count1-d.big_values)/4;0<b;--b){var m=0,f=0;var p=d.l3_enc[c+0];0!=p&&(f+=8,0>d.xr[g+0]&&m++);p=d.l3_enc[c+1];0!=p&&(f+=4,m*=2,0>d.xr[g+1]&&m++);p=d.l3_enc[c+2];0!=p&&(f+=2,m*=2,0>d.xr[g+2]&&m++);p=d.l3_enc[c+3];0!=p&&(f++,m*=2,0>d.xr[g+3]&&m++);c+=4;g+=4;u(a,m+e.table[f],
e.hlen[f]);l+=e.hlen[f]}return l}function B(a,d,e,b,l){var c=r.ht[d],g=0;if(0==d)return g;for(;e<b;e+=2){var m=0,f=0,p=c.xlen,q=c.xlen,k=0,C=l.l3_enc[e],h=l.l3_enc[e+1];0!=C&&(0>l.xr[e]&&k++,m--);15<d&&(14<C&&(k|=C-15<<1,f=p,C=15),14<h&&(q=h-15,k<<=p,k|=q,f+=p,h=15),q=16);0!=h&&(k<<=1,0>l.xr[e+1]&&k++,m--);C=C*q+h;f-=m;m+=c.hlen[C];u(a,c.table[C],m);u(a,k,f);g+=m+f}return g}function J(a,d){var e=3*a.scalefac_band.s[3];e>d.big_values&&(e=d.big_values);var b=B(a,d.table_select[0],0,e,d);return b+=B(a,
d.table_select[1],e,d.big_values,d)}function f(a,d){var e=d.big_values;var b=d.region0_count+1;var l=a.scalefac_band.l[b];b+=d.region1_count+1;var c=a.scalefac_band.l[b];l>e&&(l=e);c>e&&(c=e);b=B(a,d.table_select[0],0,l,d);b+=B(a,d.table_select[1],l,c,d);return b+=B(a,d.table_select[2],c,e,d)}function b(){this.total=0}function z(d,e){var b=d.internal_flags;var c=b.w_ptr;var l=b.h_ptr-1;-1==l&&(l=Y.MAX_HEADER_BUF-1);var m=b.header[l].write_timing-g;e.total=m;if(0<=m){var f=1+l-c;l<c&&(f=1+l-c+Y.MAX_HEADER_BUF);
m-=8*f*b.sideinfo_len}d=a.getframebits(d);m+=d;e.total+=d;e.total=0!=e.total%8?1+e.total/8:e.total/8;e.total+=t+1;0>m&&S.err.println("strange error flushing buffer ... \n");return m}var a=this,k=null,H=null,e=null,m=null;this.setModules=function(a,d,b,c){k=a;H=d;e=b;m=c};var d=null,g=0,t=0,y=0;this.getframebits=function(a){var d=a.internal_flags;return 8*(0|72E3*(a.version+1)*(0!=d.bitrate_index?r.bitrate_table[a.version][d.bitrate_index]:a.brate)/a.out_samplerate+d.padding)};this.CRC_writeheader=
function(a,d){var e=E(d[2]&255,65535);e=E(d[3]&255,e);for(var b=6;b<a.sideinfo_len;b++)e=E(d[b]&255,e);d[4]=byte(e>>8);d[5]=byte(e&255)};this.flush_bitstream=function(a){var d=a.internal_flags,e;var c=d.l3_side;0>(e=z(a,new b))||(h(a,e),d.ResvSize=0,c.main_data_begin=0,d.findReplayGain&&(c=k.GetTitleGain(d.rgdata),d.RadioGain=Math.floor(10*c+.5)|0),d.findPeakSample&&(d.noclipGainChange=Math.ceil(200*Math.log10(d.PeakSample/32767))|0,0<d.noclipGainChange?EQ(a.scale,1)||EQ(a.scale,0)?d.noclipScale=
Math.floor(32767/d.PeakSample*100)/100:d.noclipScale=-1:d.noclipScale=-1))};this.add_dummy_byte=function(a,e,b){a=a.internal_flags;for(var c;0<b--;){c=e;for(var l=8;0<l;){0==y&&(y=8,t++,d[t]=0);var m=Math.min(l,y);l-=m;y-=m;d[t]|=c>>l<<y;g+=m}for(c=0;c<Y.MAX_HEADER_BUF;++c)a.header[c].write_timing+=8}};this.format_bitstream=function(a){var d=a.internal_flags;var e=d.l3_side;var m=this.getframebits(a);h(a,e.resvDrain_pre);var l=a.internal_flags,p,x;var k=l.l3_side;l.header[l.h_ptr].ptr=0;ya.fill(l.header[l.h_ptr].buf,
0,l.sideinfo_len,0);16E3>a.out_samplerate?n(l,4094,12):n(l,4095,12);n(l,a.version,1);n(l,1,2);n(l,a.error_protection?0:1,1);n(l,l.bitrate_index,4);n(l,l.samplerate_index,2);n(l,l.padding,1);n(l,a.extension,1);n(l,a.mode.ordinal(),2);n(l,l.mode_ext,2);n(l,a.copyright,1);n(l,a.original,1);n(l,a.emphasis,2);a.error_protection&&n(l,0,16);if(1==a.version){n(l,k.main_data_begin,9);2==l.channels_out?n(l,k.private_bits,3):n(l,k.private_bits,5);for(x=0;x<l.channels_out;x++)for(p=0;4>p;p++)n(l,k.scfsi[x][p],
1);for(p=0;2>p;p++)for(x=0;x<l.channels_out;x++){var t=k.tt[p][x];n(l,t.part2_3_length+t.part2_length,12);n(l,t.big_values/2,9);n(l,t.global_gain,8);n(l,t.scalefac_compress,4);t.block_type!=c.NORM_TYPE?(n(l,1,1),n(l,t.block_type,2),n(l,t.mixed_block_flag,1),14==t.table_select[0]&&(t.table_select[0]=16),n(l,t.table_select[0],5),14==t.table_select[1]&&(t.table_select[1]=16),n(l,t.table_select[1],5),n(l,t.subblock_gain[0],3),n(l,t.subblock_gain[1],3),n(l,t.subblock_gain[2],3)):(n(l,0,1),14==t.table_select[0]&&
(t.table_select[0]=16),n(l,t.table_select[0],5),14==t.table_select[1]&&(t.table_select[1]=16),n(l,t.table_select[1],5),14==t.table_select[2]&&(t.table_select[2]=16),n(l,t.table_select[2],5),n(l,t.region0_count,4),n(l,t.region1_count,3));n(l,t.preflag,1);n(l,t.scalefac_scale,1);n(l,t.count1table_select,1)}}else for(n(l,k.main_data_begin,8),n(l,k.private_bits,l.channels_out),x=p=0;x<l.channels_out;x++)t=k.tt[p][x],n(l,t.part2_3_length+t.part2_length,12),n(l,t.big_values/2,9),n(l,t.global_gain,8),n(l,
t.scalefac_compress,9),t.block_type!=c.NORM_TYPE?(n(l,1,1),n(l,t.block_type,2),n(l,t.mixed_block_flag,1),14==t.table_select[0]&&(t.table_select[0]=16),n(l,t.table_select[0],5),14==t.table_select[1]&&(t.table_select[1]=16),n(l,t.table_select[1],5),n(l,t.subblock_gain[0],3),n(l,t.subblock_gain[1],3),n(l,t.subblock_gain[2],3)):(n(l,0,1),14==t.table_select[0]&&(t.table_select[0]=16),n(l,t.table_select[0],5),14==t.table_select[1]&&(t.table_select[1]=16),n(l,t.table_select[1],5),14==t.table_select[2]&&
(t.table_select[2]=16),n(l,t.table_select[2],5),n(l,t.region0_count,4),n(l,t.region1_count,3)),n(l,t.scalefac_scale,1),n(l,t.count1table_select,1);a.error_protection&&CRC_writeheader(l,l.header[l.h_ptr].buf);k=l.h_ptr;l.h_ptr=k+1&Y.MAX_HEADER_BUF-1;l.header[l.h_ptr].write_timing=l.header[k].write_timing+m;l.h_ptr==l.w_ptr&&S.err.println("Error: MAX_HEADER_BUF too small in bitstream.c \n");l=8*d.sideinfo_len;var y=0,B=a.internal_flags,H=B.l3_side;if(1==a.version)for(k=0;2>k;k++)for(x=0;x<B.channels_out;x++){var C=
H.tt[k][x],I=sb.slen1_tab[C.scalefac_compress],O=sb.slen2_tab[C.scalefac_compress];for(p=t=0;p<C.sfbdivide;p++)-1!=C.scalefac[p]&&(u(B,C.scalefac[p],I),t+=I);for(;p<C.sfbmax;p++)-1!=C.scalefac[p]&&(u(B,C.scalefac[p],O),t+=O);t=C.block_type==c.SHORT_TYPE?t+J(B,C):t+f(B,C);t+=D(B,C);y+=t}else for(x=k=0;x<B.channels_out;x++){C=H.tt[k][x];var G=0;O=p=t=0;if(C.block_type==c.SHORT_TYPE){for(;4>O;O++){var r=C.sfb_partition_table[O]/3,K=C.slen[O];for(I=0;I<r;I++,p++)u(B,Math.max(C.scalefac[3*p],0),K),u(B,
Math.max(C.scalefac[3*p+1],0),K),u(B,Math.max(C.scalefac[3*p+2],0),K),G+=3*K}t+=J(B,C)}else{for(;4>O;O++)for(r=C.sfb_partition_table[O],K=C.slen[O],I=0;I<r;I++,p++)u(B,Math.max(C.scalefac[p],0),K),G+=K;t+=f(B,C)}t+=D(B,C);y+=G+t}l+=y;h(a,e.resvDrain_post);l+=e.resvDrain_post;e.main_data_begin+=(m-l)/8;z(a,new b)!=d.ResvSize&&S.err.println("Internal buffer inconsistency. flushbits <> ResvSize");8*e.main_data_begin!=d.ResvSize&&(S.err.printf("bit reservoir error: \nl3_side.main_data_begin: %d \nResvoir size:             %d \nresv drain (post)         %d \nresv drain (pre)          %d \nheader and sideinfo:      %d \ndata bits:                %d \ntotal bits:               %d (remainder: %d) \nbitsperframe:             %d \n",
8*e.main_data_begin,d.ResvSize,e.resvDrain_post,e.resvDrain_pre,8*d.sideinfo_len,l-e.resvDrain_post-8*d.sideinfo_len,l,l%8,m),S.err.println("This is a fatal error.  It has several possible causes:"),S.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),S.err.println(" 9%%  Your system is overclocked"),S.err.println(" 1%%  bug in LAME encoding library"),d.ResvSize=8*e.main_data_begin);if(1E9<g){for(a=0;a<Y.MAX_HEADER_BUF;++a)d.header[a].write_timing-=g;g=0}return 0};
this.copy_buffer=function(a,e,b,c,l){var g=t+1;if(0>=g)return 0;if(0!=c&&g>c)return-1;S.arraycopy(d,0,e,b,g);t=-1;y=0;if(0!=l&&(c=V(1),c[0]=a.nMusicCRC,m.updateMusicCRC(c,e,b,g),a.nMusicCRC=c[0],0<g&&(a.VBR_seek_table.nBytesWritten+=g),a.decode_on_the_fly)){c=ca([2,1152]);l=g;for(var f=-1,p;0!=f;)if(f=H.hip_decode1_unclipped(a.hip,e,b,l,c[0],c[1]),l=0,-1==f&&(f=0),0<f){if(a.findPeakSample){for(p=0;p<f;p++)c[0][p]>a.PeakSample?a.PeakSample=c[0][p]:-c[0][p]>a.PeakSample&&(a.PeakSample=-c[0][p]);if(1<
a.channels_out)for(p=0;p<f;p++)c[1][p]>a.PeakSample?a.PeakSample=c[1][p]:-c[1][p]>a.PeakSample&&(a.PeakSample=-c[1][p])}if(a.findReplayGain&&k.AnalyzeSamples(a.rgdata,c[0],0,c[1],0,f,a.channels_out)==W.GAIN_ANALYSIS_ERROR)return-6}}return g};this.init_bit_stream_w=function(a){d=new Int8Array(U.LAME_MAXMP3BUFFER);a.h_ptr=a.w_ptr=0;a.header[a.h_ptr].write_timing=0;t=-1;g=y=0}}function Ya(){function c(a,b){var d=a[b+0]&255;d=d<<8|a[b+1]&255;d=d<<8|a[b+2]&255;return d=d<<8|a[b+3]&255}function h(a,b,d){a[b+
0]=d>>24&255;a[b+1]=d>>16&255;a[b+2]=d>>8&255;a[b+3]=d&255}function n(a,b,d){a[b+0]=d>>8&255;a[b+1]=d&255}function E(a,b,d){return 255&(a<<b|d&~(-1<<b))}function D(a,b){var d=a.internal_flags;b[0]=E(b[0],8,255);b[1]=E(b[1],3,7);b[1]=E(b[1],1,16E3>a.out_samplerate?0:1);b[1]=E(b[1],1,a.version);b[1]=E(b[1],2,1);b[1]=E(b[1],1,a.error_protection?0:1);b[2]=E(b[2],4,d.bitrate_index);b[2]=E(b[2],2,d.samplerate_index);b[2]=E(b[2],1,0);b[2]=E(b[2],1,a.extension);b[3]=E(b[3],2,a.mode.ordinal());b[3]=E(b[3],
2,d.mode_ext);b[3]=E(b[3],1,a.copyright);b[3]=E(b[3],1,a.original);b[3]=E(b[3],2,a.emphasis);b[0]=255;d=b[1]&241;var e=1==a.version?128:16E3>a.out_samplerate?32:64;a.VBR==F.vbr_off&&(e=a.brate);e=a.free_format?0:255&16*J.BitrateIndex(e,a.version,a.out_samplerate);b[1]=1==a.version?255&(d|10):255&(d|2);d=b[2]&13;b[2]=255&(e|d)}function B(a,b){return b=b>>8^H[(b^a)&255]}var J,f,b;this.setModules=function(a,c,d){J=a;f=c;b=d};var z=Ya.NUMTOCENTRIES,a=Ya.MAXFRAMESIZE,k=z+4+4+4+4+4+9+1+1+8+1+1+3+1+1+2+
4+2+2,H=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8E3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16E3,65089,64001,
15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32E3,48577,
48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];this.addVbrFrame=
function(a){var b=a.internal_flags;var d=b.VBR_seek_table;a=r.bitrate_table[a.version][b.bitrate_index];d.nVbrNumFrames++;d.sum+=a;d.seen++;if(!(d.seen<d.want)&&(d.pos<d.size&&(d.bag[d.pos]=d.sum,d.pos++,d.seen=0),d.pos==d.size)){for(a=1;a<d.size;a+=2)d.bag[a/2]=d.bag[a];d.want*=2;d.pos/=2}};this.getVbrTag=function(a){var b=new VBRTagData,d=0;b.flags=0;var e=a[d+1]>>3&1,f=a[d+2]>>2&3,k=a[d+3]>>6&3,p=a[d+2]>>4&15;p=r.bitrate_table[e][p];b.samprate=14==a[d+1]>>4?r.samplerate_table[2][f]:r.samplerate_table[e][f];
f=d=0!=e?3!=k?d+36:d+21:3!=k?d+21:d+13;if(!(new String(a,f,4(),null)).equals("Xing")&&!(new String(a,f,4(),null)).equals("Info"))return null;d+=4;b.hId=e;f=b.flags=c(a,d);d+=4;0!=(f&1)&&(b.frames=c(a,d),d+=4);0!=(f&2)&&(b.bytes=c(a,d),d+=4);if(0!=(f&4)){if(null!=b.toc)for(k=0;k<z;k++)b.toc[k]=a[d+k];d+=z}b.vbrScale=-1;0!=(f&8)&&(b.vbrScale=c(a,d),d+=4);b.headersize=72E3*(e+1)*p/b.samprate;d+=21;e=a[d+0]<<4;e+=a[d+1]>>4;p=(a[d+1]&15)<<8;p+=a[d+2]&255;if(0>e||3E3<e)e=-1;if(0>p||3E3<p)p=-1;b.encDelay=
e;b.encPadding=p;return b};this.InitVbrTag=function(b){var e=b.internal_flags;var d=1==b.version?128:16E3>b.out_samplerate?32:64;b.VBR==F.vbr_off&&(d=b.brate);d=72E3*(b.version+1)*d/b.out_samplerate;var c=e.sideinfo_len+k;e.VBR_seek_table.TotalFrameSize=d;if(d<c||d>a)b.bWriteVbrTag=!1;else for(e.VBR_seek_table.nVbrNumFrames=0,e.VBR_seek_table.nBytesWritten=0,e.VBR_seek_table.sum=0,e.VBR_seek_table.seen=0,e.VBR_seek_table.want=1,e.VBR_seek_table.pos=0,null==e.VBR_seek_table.bag&&(e.VBR_seek_table.bag=
new int[400],e.VBR_seek_table.size=400),d=new Int8Array(a),D(b,d),e=e.VBR_seek_table.TotalFrameSize,c=0;c<e;++c)f.add_dummy_byte(b,d[c]&255,1)};this.updateMusicCRC=function(a,b,d,c){for(var e=0;e<c;++e)a[0]=B(b[d+e],a[0])};this.getLameTagFrame=function(a,c){var d=a.internal_flags;if(!a.bWriteVbrTag||d.Class_ID!=U.LAME_ID||0>=d.VBR_seek_table.pos)return 0;if(c.length<d.VBR_seek_table.TotalFrameSize)return d.VBR_seek_table.TotalFrameSize;ya.fill(c,0,d.VBR_seek_table.TotalFrameSize,0);D(a,c);var e=new Int8Array(z);
if(a.free_format)for(var m=1;m<z;++m)e[m]=255&255*m/100;else{var k=d.VBR_seek_table;if(!(0>=k.pos))for(m=1;m<z;++m){var p=0|Math.floor(m/z*k.pos);p>k.pos-1&&(p=k.pos-1);p=0|256*k.bag[p]/k.sum;255<p&&(p=255);e[m]=255&p}}p=d.sideinfo_len;a.error_protection&&(p-=2);c[p++]=0;c[p++]=0;c[p++]=0;c[p++]=0;h(c,p,15);p+=4;h(c,p,d.VBR_seek_table.nVbrNumFrames);p+=4;k=d.VBR_seek_table.nBytesWritten+d.VBR_seek_table.TotalFrameSize;h(c,p,0|k);p+=4;S.arraycopy(e,0,c,p,e.length);p+=e.length;a.error_protection&&f.CRC_writeheader(d,
c);var q=0;for(m=0;m<p;m++)q=B(c[m],q);e=p;m=q;var w=a.internal_flags;p=0;q=a.encoder_delay;var u=a.encoder_padding,l=100-10*a.VBR_q-a.quality,v=b.getLameVeryShortVersion();var x=[1,5,3,2,4,0,3];var A=0|(255<a.lowpassfreq/100+.5?255:a.lowpassfreq/100+.5),H=0,r=0,Q=a.internal_flags.noise_shaping,Ia=0,C,I=0!=(a.exp_nspsytune&1);var O=0!=(a.exp_nspsytune&2);var G=C=!1,la=a.internal_flags.nogap_total,K=a.internal_flags.nogap_current,X=a.ATHtype;switch(a.VBR){case vbr_abr:var E=a.VBR_mean_bitrate_kbps;
break;case vbr_off:E=a.brate;break;default:E=a.VBR_min_bitrate_kbps}x=0+(a.VBR.ordinal()<x.length?x[a.VBR.ordinal()]:0);w.findReplayGain&&(510<w.RadioGain&&(w.RadioGain=510),-510>w.RadioGain&&(w.RadioGain=-510),r=11264,r=0<=w.RadioGain?r|w.RadioGain:r|512|-w.RadioGain);w.findPeakSample&&(H=Math.abs(0|w.PeakSample/32767*Math.pow(2,23)+.5));-1!=la&&(0<K&&(G=!0),K<la-1&&(C=!0));I=X+((I?1:0)<<4)+((O?1:0)<<5)+((C?1:0)<<6)+((G?1:0)<<7);0>l&&(l=0);switch(a.mode){case MONO:O=0;break;case STEREO:O=1;break;
case DUAL_CHANNEL:O=2;break;case JOINT_STEREO:O=a.force_ms?4:3;break;default:O=7}C=32E3>=a.in_samplerate?0:48E3==a.in_samplerate?2:48E3<a.in_samplerate?3:1;if(a.short_blocks==sa.short_block_forced||a.short_blocks==sa.short_block_dispensed||-1==a.lowpassfreq&&-1==a.highpassfreq||a.scale_left<a.scale_right||a.scale_left>a.scale_right||a.disable_reservoir&&320>a.brate||a.noATH||a.ATHonly||0==X||32E3>=a.in_samplerate)Ia=1;Q=Q+(O<<2)+(Ia<<5)+(C<<6);w=w.nMusicCRC;h(c,e+p,l);p+=4;for(l=0;9>l;l++)c[e+p+l]=
255&v.charAt(l);p+=9;c[e+p]=255&x;p++;c[e+p]=255&A;p++;h(c,e+p,H);p+=4;n(c,e+p,r);p+=2;n(c,e+p,0);p+=2;c[e+p]=255&I;p++;c[e+p]=255<=E?255:255&E;p++;c[e+p]=255&q>>4;c[e+p+1]=255&(q<<4)+(u>>8);c[e+p+2]=255&u;p+=3;c[e+p]=255&Q;p++;c[e+p++]=0;n(c,e+p,a.preset);p+=2;h(c,e+p,k);p+=4;n(c,e+p,w);p+=2;for(a=0;a<p;a++)m=B(c[e+a],m);n(c,e+p,m);return d.VBR_seek_table.TotalFrameSize};this.putVbrTag=function(b,c){if(0>=b.internal_flags.VBR_seek_table.pos)return-1;c.seek(c.length());if(0==c.length())return-1;c.seek(0);
var d=new Int8Array(10);c.readFully(d);d=(new String(d,"ISO-8859-1")).startsWith("ID3")?0:((d[6]&127)<<21|(d[7]&127)<<14|(d[8]&127)<<7|d[9]&127)+d.length;c.seek(d);d=new Int8Array(a);b=getLameTagFrame(b,d);if(b>d.length)return-1;if(1>b)return 0;c.write(d,0,b);return 0}}function Z(c,h,n,r){this.xlen=c;this.linmax=h;this.table=n;this.hlen=r}function zc(){this.setModules=function(c,h){}}function Wb(){this.bits=this.over_SSD=this.over_count=this.max_noise=this.tot_noise=this.over_noise=0}function La(c){this.bits=
c}function Ac(){this.scale_right=this.scale_left=this.scale=this.out_samplerate=this.in_samplerate=this.num_channels=this.num_samples=this.class_id=0;this.decode_only=this.bWriteVbrTag=this.analysis=!1;this.quality=0;this.mode=ka.STEREO;this.write_id3tag_automatic=this.decode_on_the_fly=this.findReplayGain=this.free_format=this.force_ms=!1;this.error_protection=this.emphasis=this.extension=this.original=this.copyright=this.compression_ratio=this.brate=0;this.disable_reservoir=this.strict_ISO=!1;this.quant_comp_short=
this.quant_comp=0;this.experimentalY=!1;this.preset=this.exp_nspsytune=this.experimentalZ=0;this.VBR=null;this.maskingadjust_short=this.maskingadjust=this.highpasswidth=this.lowpasswidth=this.highpassfreq=this.lowpassfreq=this.VBR_hard_min=this.VBR_max_bitrate_kbps=this.VBR_min_bitrate_kbps=this.VBR_mean_bitrate_kbps=this.VBR_q=this.VBR_q_frac=0;this.noATH=this.ATHshort=this.ATHonly=!1;this.athaa_sensitivity=this.athaa_loudapprox=this.athaa_type=this.ATHlower=this.ATHcurve=this.ATHtype=0;this.short_blocks=
null;this.useTemporal=!1;this.msfix=this.interChRatio=0;this.tune=!1;this.lame_allocated_gfp=this.frameNum=this.framesize=this.encoder_padding=this.encoder_delay=this.version=this.tune_value_a=0;this.internal_flags=null}function Bc(){this.floor=this.decay=this.adjustLimit=this.adjust=this.aaSensitivityP=this.useAdjust=0;this.l=J(c.SBMAX_l);this.s=J(c.SBMAX_s);this.psfb21=J(c.PSFB21);this.psfb12=J(c.PSFB12);this.cb_l=J(c.CBANDS);this.cb_s=J(c.CBANDS);this.eql_w=J(c.BLKSIZE/2)}function Cc(){this.linprebuf=
J(2*W.MAX_ORDER);this.linpre=0;this.lstepbuf=J(W.MAX_SAMPLES_PER_WINDOW+W.MAX_ORDER);this.lstep=0;this.loutbuf=J(W.MAX_SAMPLES_PER_WINDOW+W.MAX_ORDER);this.lout=0;this.rinprebuf=J(2*W.MAX_ORDER);this.rinpre=0;this.rstepbuf=J(W.MAX_SAMPLES_PER_WINDOW+W.MAX_ORDER);this.rstep=0;this.routbuf=J(W.MAX_SAMPLES_PER_WINDOW+W.MAX_ORDER);this.first=this.freqindex=this.rsum=this.lsum=this.totsamp=this.sampleWindow=this.rout=0;this.A=V(0|W.STEPS_per_dB*W.MAX_dB);this.B=V(0|W.STEPS_per_dB*W.MAX_dB)}function Dc(u){this.quantize=
u;this.iteration_loop=function(h,n,u,r){var B=h.internal_flags,D=J(Ca.SFBMAX),f=J(576),b=V(2),z=B.l3_side;var a=new La(0);this.quantize.rv.ResvFrameBegin(h,a);a=a.bits;for(var k=0;k<B.mode_gr;k++){var H=this.quantize.qupvt.on_pe(h,n,b,a,k,k);B.mode_ext==c.MPG_MD_MS_LR&&(this.quantize.ms_convert(B.l3_side,k),this.quantize.qupvt.reduce_side(b,u[k],a,H));for(H=0;H<B.channels_out;H++){var e=z.tt[k][H];if(e.block_type!=c.SHORT_TYPE){var m=0;m=B.PSY.mask_adjust-m}else m=0,m=B.PSY.mask_adjust_short-m;B.masking_lower=
Math.pow(10,.1*m);this.quantize.init_outer_loop(B,e);this.quantize.init_xrpow(B,e,f)&&(this.quantize.qupvt.calc_xmin(h,r[k][H],e,D),this.quantize.outer_loop(h,e,D,f,H,b[H]));this.quantize.iteration_finish_one(B,k,H)}}this.quantize.rv.ResvFrameEnd(B,a)}}function Ec(){this.sfb_count1=this.global_gain=0;this.step=V(39);this.noise=J(39);this.noise_log=J(39)}function zb(){this.xr=J(576);this.l3_enc=V(576);this.scalefac=V(Ca.SFBMAX);this.mixed_block_flag=this.block_type=this.scalefac_compress=this.global_gain=
this.count1=this.big_values=this.part2_3_length=this.xrpow_max=0;this.table_select=V(3);this.subblock_gain=V(4);this.sfbdivide=this.psymax=this.sfbmax=this.psy_lmax=this.sfb_smin=this.sfb_lmax=this.part2_length=this.count1table_select=this.scalefac_scale=this.preflag=this.region1_count=this.region0_count=0;this.width=V(Ca.SFBMAX);this.window=V(Ca.SFBMAX);this.count1bits=0;this.sfb_partition_table=null;this.slen=V(4);this.max_nonzero_coeff=0;var c=this;this.assign=function(h){c.xr=new Float32Array(h.xr);
c.l3_enc=new Int32Array(h.l3_enc);c.scalefac=new Int32Array(h.scalefac);c.xrpow_max=h.xrpow_max;c.part2_3_length=h.part2_3_length;c.big_values=h.big_values;c.count1=h.count1;c.global_gain=h.global_gain;c.scalefac_compress=h.scalefac_compress;c.block_type=h.block_type;c.mixed_block_flag=h.mixed_block_flag;c.table_select=new Int32Array(h.table_select);c.subblock_gain=new Int32Array(h.subblock_gain);c.region0_count=h.region0_count;c.region1_count=h.region1_count;c.preflag=h.preflag;c.scalefac_scale=
h.scalefac_scale;c.count1table_select=h.count1table_select;c.part2_length=h.part2_length;c.sfb_lmax=h.sfb_lmax;c.sfb_smin=h.sfb_smin;c.psy_lmax=h.psy_lmax;c.sfbmax=h.sfbmax;c.psymax=h.psymax;c.sfbdivide=h.sfbdivide;c.width=new Int32Array(h.width);c.window=new Int32Array(h.window);c.count1bits=h.count1bits;c.sfb_partition_table=h.sfb_partition_table.slice(0);c.slen=new Int32Array(h.slen);c.max_nonzero_coeff=h.max_nonzero_coeff}}function Fc(){function u(c){this.ordinal=c}function h(c){for(var b=0;b<
c.sfbmax;b++)if(0==c.scalefac[b]+c.subblock_gain[c.window[b]])return!1;return!0}var n;this.rv=null;var r;this.qupvt=null;var D,B=new zc,da;this.setModules=function(c,b,h,a){n=c;this.rv=r=b;this.qupvt=D=h;da=a;B.setModules(D,da)};this.ms_convert=function(c,b){for(var f=0;576>f;++f){var a=c.tt[b][0].xr[f],k=c.tt[b][1].xr[f];c.tt[b][0].xr[f]=.5*(a+k)*aa.SQRT2;c.tt[b][1].xr[f]=.5*(a-k)*aa.SQRT2}};this.init_xrpow=function(c,b,h){var a=0|b.max_nonzero_coeff;b.xrpow_max=0;ya.fill(h,a,576,0);for(var f,z=
f=0;z<=a;++z){var e=Math.abs(b.xr[z]);f+=e;h[z]=Math.sqrt(e*Math.sqrt(e));h[z]>b.xrpow_max&&(b.xrpow_max=h[z])}if(1E-20<f){h=0;0!=(c.substep_shaping&2)&&(h=1);for(a=0;a<b.psymax;a++)c.pseudohalf[a]=h;return!0}ya.fill(b.l3_enc,0,576,0);return!1};this.init_outer_loop=function(f,b){b.part2_3_length=0;b.big_values=0;b.count1=0;b.global_gain=210;b.scalefac_compress=0;b.table_select[0]=0;b.table_select[1]=0;b.table_select[2]=0;b.subblock_gain[0]=0;b.subblock_gain[1]=0;b.subblock_gain[2]=0;b.subblock_gain[3]=
0;b.region0_count=0;b.region1_count=0;b.preflag=0;b.scalefac_scale=0;b.count1table_select=0;b.part2_length=0;b.sfb_lmax=c.SBPSY_l;b.sfb_smin=c.SBPSY_s;b.psy_lmax=f.sfb21_extra?c.SBMAX_l:c.SBPSY_l;b.psymax=b.psy_lmax;b.sfbmax=b.sfb_lmax;b.sfbdivide=11;for(var h=0;h<c.SBMAX_l;h++)b.width[h]=f.scalefac_band.l[h+1]-f.scalefac_band.l[h],b.window[h]=3;if(b.block_type==c.SHORT_TYPE){var a=J(576);b.sfb_smin=0;b.sfb_lmax=0;0!=b.mixed_block_flag&&(b.sfb_smin=3,b.sfb_lmax=2*f.mode_gr+4);b.psymax=b.sfb_lmax+
3*((f.sfb21_extra?c.SBMAX_s:c.SBPSY_s)-b.sfb_smin);b.sfbmax=b.sfb_lmax+3*(c.SBPSY_s-b.sfb_smin);b.sfbdivide=b.sfbmax-18;b.psy_lmax=b.sfb_lmax;var k=f.scalefac_band.l[b.sfb_lmax];S.arraycopy(b.xr,0,a,0,576);for(h=b.sfb_smin;h<c.SBMAX_s;h++)for(var n=f.scalefac_band.s[h],e=f.scalefac_band.s[h+1],m=0;3>m;m++)for(var d=n;d<e;d++)b.xr[k++]=a[3*d+m];a=b.sfb_lmax;for(h=b.sfb_smin;h<c.SBMAX_s;h++)b.width[a]=b.width[a+1]=b.width[a+2]=f.scalefac_band.s[h+1]-f.scalefac_band.s[h],b.window[a]=0,b.window[a+1]=
1,b.window[a+2]=2,a+=3}b.count1bits=0;b.sfb_partition_table=D.nr_of_sfb_block[0][0];b.slen[0]=0;b.slen[1]=0;b.slen[2]=0;b.slen[3]=0;b.max_nonzero_coeff=575;ya.fill(b.scalefac,0);h=f.ATH;a=b.xr;if(b.block_type!=c.SHORT_TYPE)for(b=!1,k=c.PSFB21-1;0<=k&&!b;k--)for(n=f.scalefac_band.psfb21[k],e=f.scalefac_band.psfb21[k+1],m=D.athAdjust(h.adjust,h.psfb21[k],h.floor),1E-12<f.nsPsy.longfact[21]&&(m*=f.nsPsy.longfact[21]),--e;e>=n;e--)if(Math.abs(a[e])<m)a[e]=0;else{b=!0;break}else for(m=0;3>m;m++)for(b=
!1,k=c.PSFB12-1;0<=k&&!b;k--)for(n=3*f.scalefac_band.s[12]+(f.scalefac_band.s[13]-f.scalefac_band.s[12])*m+(f.scalefac_band.psfb12[k]-f.scalefac_band.psfb12[0]),e=n+(f.scalefac_band.psfb12[k+1]-f.scalefac_band.psfb12[k]),d=D.athAdjust(h.adjust,h.psfb12[k],h.floor),1E-12<f.nsPsy.shortfact[12]&&(d*=f.nsPsy.shortfact[12]),--e;e>=n;e--)if(Math.abs(a[e])<d)a[e]=0;else{b=!0;break}};u.BINSEARCH_NONE=new u(0);u.BINSEARCH_UP=new u(1);u.BINSEARCH_DOWN=new u(2);this.trancate_smallspectrums=function(f,b,h,a){var k=
J(Ca.SFBMAX);if((0!=(f.substep_shaping&4)||b.block_type!=c.SHORT_TYPE)&&0==(f.substep_shaping&128)){D.calc_noise(b,h,k,new Wb,null);for(var n=0;576>n;n++){var e=0;0!=b.l3_enc[n]&&(e=Math.abs(b.xr[n]));a[n]=e}n=0;e=8;b.block_type==c.SHORT_TYPE&&(e=6);do{var m,d,g=b.width[e];n+=g;if(!(1<=k[e]||(ya.sort(a,n-g,g),oa.EQ(a[n-1],0)))){var t=(1-k[e])*h[e];var y=m=0;do{for(d=1;y+d<g&&!oa.NEQ(a[y+n-g],a[y+n+d-g]);d++);var p=a[y+n-g]*a[y+n-g]*d;if(t<p){0!=y&&(m=a[y+n-g-1]);break}t-=p;y+=d}while(y<g);if(!oa.EQ(m,
0)){do Math.abs(b.xr[n-g])<=m&&(b.l3_enc[n-g]=0);while(0<--g)}}}while(++e<b.psymax);b.part2_3_length=da.noquant_count_bits(f,b,null)}};this.outer_loop=function(f,b,n,a,k,B){var e=f.internal_flags,m=new zb,d=J(576),g=J(Ca.SFBMAX),t=new Wb,y=new Ec,p=9999999,q=!1,w=!1,z=0,l,v=e.CurrentStep[k],x=!1,A=e.OldValue[k];var r=u.BINSEARCH_NONE;b.global_gain=A;for(l=B-b.part2_length;;){var M=da.count_bits(e,a,b,null);if(1==v||M==l)break;M>l?(r==u.BINSEARCH_DOWN&&(x=!0),x&&(v/=2),r=u.BINSEARCH_UP,M=v):(r==u.BINSEARCH_UP&&
(x=!0),x&&(v/=2),r=u.BINSEARCH_DOWN,M=-v);b.global_gain+=M;0>b.global_gain&&(b.global_gain=0,x=!0);255<b.global_gain&&(b.global_gain=255,x=!0)}for(;M>l&&255>b.global_gain;)b.global_gain++,M=da.count_bits(e,a,b,null);e.CurrentStep[k]=4<=A-b.global_gain?4:2;e.OldValue[k]=b.global_gain;b.part2_3_length=M;if(0==e.noise_shaping)return 100;D.calc_noise(b,n,g,t,y);t.bits=b.part2_3_length;m.assign(b);k=0;for(S.arraycopy(a,0,d,0,576);!q;){do{l=new Wb;x=255;v=0!=(e.substep_shaping&2)?20:3;if(e.sfb21_extra){if(1<
g[m.sfbmax])break;if(m.block_type==c.SHORT_TYPE&&(1<g[m.sfbmax+1]||1<g[m.sfbmax+2]))break}A=m;M=a;r=f.internal_flags;var Q=A,H=g,C=M,I=f.internal_flags;var O=0==Q.scalefac_scale?1.2968395546510096:1.6817928305074292;for(var G=0,la=0;la<Q.sfbmax;la++)G<H[la]&&(G=H[la]);la=I.noise_shaping_amp;3==la&&(la=w?2:1);switch(la){case 2:break;case 1:G=1<G?Math.pow(G,.5):.95*G;break;default:G=1<G?1:.95*G}var K=0;for(la=0;la<Q.sfbmax;la++){var X=Q.width[la];K+=X;if(!(H[la]<G)){if(0!=(I.substep_shaping&2)&&(I.pseudohalf[la]=
0==I.pseudohalf[la]?1:0,0==I.pseudohalf[la]&&2==I.noise_shaping_amp))break;Q.scalefac[la]++;for(X=-X;0>X;X++)C[K+X]*=O,C[K+X]>Q.xrpow_max&&(Q.xrpow_max=C[K+X]);if(2==I.noise_shaping_amp)break}}if(O=h(A))A=!1;else if(O=2==r.mode_gr?da.scale_bitcount(A):da.scale_bitcount_lsf(r,A)){if(1<r.noise_shaping)if(ya.fill(r.pseudohalf,0),0==A.scalefac_scale){O=A;for(H=Q=0;H<O.sfbmax;H++){I=O.width[H];C=O.scalefac[H];0!=O.preflag&&(C+=D.pretab[H]);Q+=I;if(0!=(C&1))for(C++,I=-I;0>I;I++)M[Q+I]*=1.2968395546510096,
M[Q+I]>O.xrpow_max&&(O.xrpow_max=M[Q+I]);O.scalefac[H]=C>>1}O.preflag=0;O.scalefac_scale=1;O=!1}else if(A.block_type==c.SHORT_TYPE&&0<r.subblock_gain){b:{O=r;Q=A;H=M;C=Q.scalefac;for(M=0;M<Q.sfb_lmax;M++)if(16<=C[M]){M=!0;break b}for(I=0;3>I;I++){la=G=0;for(M=Q.sfb_lmax+I;M<Q.sfbdivide;M+=3)G<C[M]&&(G=C[M]);for(;M<Q.sfbmax;M+=3)la<C[M]&&(la=C[M]);if(!(16>G&&8>la)){if(7<=Q.subblock_gain[I]){M=!0;break b}Q.subblock_gain[I]++;G=O.scalefac_band.l[Q.sfb_lmax];for(M=Q.sfb_lmax+I;M<Q.sfbmax;M+=3)if(la=Q.width[M],
K=C[M],K-=4>>Q.scalefac_scale,0<=K)C[M]=K,G+=3*la;else{C[M]=0;K=D.IPOW20(210+(K<<Q.scalefac_scale+1));G+=la*(I+1);for(X=-la;0>X;X++)H[G+X]*=K,H[G+X]>Q.xrpow_max&&(Q.xrpow_max=H[G+X]);G+=la*(3-I-1)}K=D.IPOW20(202);G+=Q.width[M]*(I+1);for(X=-Q.width[M];0>X;X++)H[G+X]*=K,H[G+X]>Q.xrpow_max&&(Q.xrpow_max=H[G+X])}}M=!1}O=M||h(A)}O||(O=2==r.mode_gr?da.scale_bitcount(A):da.scale_bitcount_lsf(r,A));A=!O}else A=!0;if(!A)break;0!=m.scalefac_scale&&(x=254);A=B-m.part2_length;if(0>=A)break;for(;(m.part2_3_length=
da.count_bits(e,a,m,y))>A&&m.global_gain<=x;)m.global_gain++;if(m.global_gain>x)break;if(0==t.over_count){for(;(m.part2_3_length=da.count_bits(e,a,m,y))>p&&m.global_gain<=x;)m.global_gain++;if(m.global_gain>x)break}D.calc_noise(m,n,g,l,y);l.bits=m.part2_3_length;r=b.block_type!=c.SHORT_TYPE?f.quant_comp:f.quant_comp_short;x=t;A=l;O=m;M=g;switch(r){default:case 9:0<x.over_count?(r=A.over_SSD<=x.over_SSD,A.over_SSD==x.over_SSD&&(r=A.bits<x.bits)):r=0>A.max_noise&&10*A.max_noise+A.bits<=10*x.max_noise+
x.bits;break;case 0:r=A.over_count<x.over_count||A.over_count==x.over_count&&A.over_noise<x.over_noise||A.over_count==x.over_count&&oa.EQ(A.over_noise,x.over_noise)&&A.tot_noise<x.tot_noise;break;case 8:r=A;H=1E-37;for(Q=0;Q<O.psymax;Q++)C=M[Q],C=aa.FAST_LOG10(.368+.632*C*C*C),H+=C;r.max_noise=Math.max(1E-20,H);case 1:r=A.max_noise<x.max_noise;break;case 2:r=A.tot_noise<x.tot_noise;break;case 3:r=A.tot_noise<x.tot_noise&&A.max_noise<x.max_noise;break;case 4:r=0>=A.max_noise&&.2<x.max_noise||0>=A.max_noise&&
0>x.max_noise&&x.max_noise>A.max_noise-.2&&A.tot_noise<x.tot_noise||0>=A.max_noise&&0<x.max_noise&&x.max_noise>A.max_noise-.2&&A.tot_noise<x.tot_noise+x.over_noise||0<A.max_noise&&-.05<x.max_noise&&x.max_noise>A.max_noise-.1&&A.tot_noise+A.over_noise<x.tot_noise+x.over_noise||0<A.max_noise&&-.1<x.max_noise&&x.max_noise>A.max_noise-.15&&A.tot_noise+A.over_noise+A.over_noise<x.tot_noise+x.over_noise+x.over_noise;break;case 5:r=A.over_noise<x.over_noise||oa.EQ(A.over_noise,x.over_noise)&&A.tot_noise<
x.tot_noise;break;case 6:r=A.over_noise<x.over_noise||oa.EQ(A.over_noise,x.over_noise)&&(A.max_noise<x.max_noise||oa.EQ(A.max_noise,x.max_noise)&&A.tot_noise<=x.tot_noise);break;case 7:r=A.over_count<x.over_count||A.over_noise<x.over_noise}0==x.over_count&&(r=r&&A.bits<x.bits);r=r?1:0;if(0!=r)p=b.part2_3_length,t=l,b.assign(m),k=0,S.arraycopy(a,0,d,0,576);else if(0==e.full_outer_loop){if(++k>v&&0==t.over_count)break;if(3==e.noise_shaping_amp&&w&&30<k)break;if(3==e.noise_shaping_amp&&w&&15<m.global_gain-
z)break}}while(255>m.global_gain+m.scalefac_scale);3==e.noise_shaping_amp?w?q=!0:(m.assign(b),S.arraycopy(d,0,a,0,576),k=0,z=m.global_gain,w=!0):q=!0}f.VBR==F.vbr_rh||f.VBR==F.vbr_mtrh?S.arraycopy(d,0,a,0,576):0!=(e.substep_shaping&1)&&trancate_smallspectrums(e,b,n,a);return t.over_count};this.iteration_finish_one=function(c,b,h){var a=c.l3_side,f=a.tt[b][h];da.best_scalefac_store(c,b,h,a);1==c.use_best_huffman&&da.best_huffman_divide(c,f);r.ResvAdjust(c,f)};this.VBR_encode_granule=function(c,b,h,
a,k,n,e){var f=c.internal_flags,d=new zb,g=J(576),t=e,y=(e+n)/2,p=0,q=f.sfb21_extra;ya.fill(d.l3_enc,0);do{f.sfb21_extra=y>t-42?!1:q;var w=outer_loop(c,b,h,a,k,y);0>=w?(p=1,e=b.part2_3_length,d.assign(b),S.arraycopy(a,0,g,0,576),e-=32,w=e-n,y=(e+n)/2):(n=y+32,w=e-n,y=(e+n)/2,0!=p&&(p=2,b.assign(d),S.arraycopy(g,0,a,0,576)))}while(12<w);f.sfb21_extra=q;2==p&&S.arraycopy(d.l3_enc,0,b.l3_enc,0,576)};this.get_framebits=function(c,b){var f=c.internal_flags;f.bitrate_index=f.VBR_min_bitrate;n.getframebits(c);
f.bitrate_index=1;var a=n.getframebits(c);for(var k=1;k<=f.VBR_max_bitrate;k++)f.bitrate_index=k,a=new La(a),b[k]=r.ResvFrameBegin(c,a),a=a.bits};this.VBR_old_prepare=function(f,b,h,a,k,n,e,m,d){var g=f.internal_flags,t=1,y=0;g.bitrate_index=g.VBR_max_bitrate;var p=r.ResvFrameBegin(f,new La(0))/g.mode_gr;get_framebits(f,n);for(var q=0;q<g.mode_gr;q++){var w=D.on_pe(f,b,m[q],p,q,0);g.mode_ext==c.MPG_MD_MS_LR&&(ms_convert(g.l3_side,q),D.reduce_side(m[q],h[q],p,w));for(w=0;w<g.channels_out;++w){var z=
g.l3_side.tt[q][w];if(z.block_type!=c.SHORT_TYPE){var l=1.28/(1+Math.exp(3.5-b[q][w]/300))-.05;l=g.PSY.mask_adjust-l}else l=2.56/(1+Math.exp(3.5-b[q][w]/300))-.14,l=g.PSY.mask_adjust_short-l;g.masking_lower=Math.pow(10,.1*l);init_outer_loop(g,z);d[q][w]=D.calc_xmin(f,a[q][w],z,k[q][w]);0!=d[q][w]&&(t=0);e[q][w]=126;y+=m[q][w]}}for(q=0;q<g.mode_gr;q++)for(w=0;w<g.channels_out;w++)y>n[g.VBR_max_bitrate]&&(m[q][w]*=n[g.VBR_max_bitrate],m[q][w]/=y),e[q][w]>m[q][w]&&(e[q][w]=m[q][w]);return t};this.bitpressure_strategy=
function(f,b,h,a){for(var k=0;k<f.mode_gr;k++)for(var n=0;n<f.channels_out;n++){for(var e=f.l3_side.tt[k][n],m=b[k][n],d=0,g=0;g<e.psy_lmax;g++)m[d++]*=1+.029*g*g/c.SBMAX_l/c.SBMAX_l;if(e.block_type==c.SHORT_TYPE)for(g=e.sfb_smin;g<c.SBMAX_s;g++)m[d++]*=1+.029*g*g/c.SBMAX_s/c.SBMAX_s,m[d++]*=1+.029*g*g/c.SBMAX_s/c.SBMAX_s,m[d++]*=1+.029*g*g/c.SBMAX_s/c.SBMAX_s;a[k][n]=0|Math.max(h[k][n],.9*a[k][n])}};this.VBR_new_prepare=function(f,b,h,a,k,n){var e=f.internal_flags,m=1,d=0,g=0;if(f.free_format){e.bitrate_index=
0;d=new La(d);var t=r.ResvFrameBegin(f,d);d=d.bits;k[0]=t}else e.bitrate_index=e.VBR_max_bitrate,d=new La(d),r.ResvFrameBegin(f,d),d=d.bits,get_framebits(f,k),t=k[e.VBR_max_bitrate];for(k=0;k<e.mode_gr;k++){D.on_pe(f,b,n[k],d,k,0);e.mode_ext==c.MPG_MD_MS_LR&&ms_convert(e.l3_side,k);for(var y=0;y<e.channels_out;++y){var p=e.l3_side.tt[k][y];e.masking_lower=Math.pow(10,.1*e.PSY.mask_adjust);init_outer_loop(e,p);0!=D.calc_xmin(f,h[k][y],p,a[k][y])&&(m=0);g+=n[k][y]}}for(k=0;k<e.mode_gr;k++)for(y=0;y<
e.channels_out;y++)g>t&&(n[k][y]*=t,n[k][y]/=g);return m};this.calc_target_bits=function(f,b,h,a,k,B){var e=f.internal_flags,m=e.l3_side;e.bitrate_index=e.VBR_max_bitrate;var d=new La(0);B[0]=r.ResvFrameBegin(f,d);e.bitrate_index=1;d=n.getframebits(f)-8*e.sideinfo_len;k[0]=d/(e.mode_gr*e.channels_out);d=f.VBR_mean_bitrate_kbps*f.framesize*1E3;0!=(e.substep_shaping&1)&&(d*=1.09);d/=f.out_samplerate;d-=8*e.sideinfo_len;d/=e.mode_gr*e.channels_out;var g=.93+.07*(11-f.compression_ratio)/5.5;.9>g&&(g=
.9);1<g&&(g=1);for(f=0;f<e.mode_gr;f++){var t=0;for(k=0;k<e.channels_out;k++){a[f][k]=int(g*d);if(700<b[f][k]){var y=int((b[f][k]-700)/1.4),p=m.tt[f][k];a[f][k]=int(g*d);p.block_type==c.SHORT_TYPE&&y<d/2&&(y=d/2);y>3*d/2?y=3*d/2:0>y&&(y=0);a[f][k]+=y}a[f][k]>Y.MAX_BITS_PER_CHANNEL&&(a[f][k]=Y.MAX_BITS_PER_CHANNEL);t+=a[f][k]}if(t>Y.MAX_BITS_PER_GRANULE)for(k=0;k<e.channels_out;++k)a[f][k]*=Y.MAX_BITS_PER_GRANULE,a[f][k]/=t}if(e.mode_ext==c.MPG_MD_MS_LR)for(f=0;f<e.mode_gr;f++)D.reduce_side(a[f],h[f],
d*e.channels_out,Y.MAX_BITS_PER_GRANULE);for(f=b=0;f<e.mode_gr;f++)for(k=0;k<e.channels_out;k++)a[f][k]>Y.MAX_BITS_PER_CHANNEL&&(a[f][k]=Y.MAX_BITS_PER_CHANNEL),b+=a[f][k];if(b>B[0])for(f=0;f<e.mode_gr;f++)for(k=0;k<e.channels_out;k++)a[f][k]*=B[0],a[f][k]/=b}}function Da(r,h,n,E){this.l=V(1+c.SBMAX_l);this.s=V(1+c.SBMAX_s);this.psfb21=V(1+c.PSFB21);this.psfb12=V(1+c.PSFB12);var u=this.l,B=this.s;4==arguments.length&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=
arguments[3],S.arraycopy(this.arrL,0,u,0,Math.min(this.arrL.length,this.l.length)),S.arraycopy(this.arrS,0,B,0,Math.min(this.arrS.length,this.s.length)),S.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),S.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}function ha(){function r(a,b){b=D.ATHformula(b,a);return b=Math.pow(10,(b-100)/10+a.ATHlower)}function h(a){this.s=a}var n=null,E=null,D=null;this.setModules=function(a,b,d){n=
a;E=b;D=d};this.IPOW20=function(b){return a[b]};var B=ha.IXMAX_VAL+2,da=ha.Q_MAX,f=ha.Q_MAX2;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var b=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=b;this.sfBandIndex=[new Da([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,
8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Da([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Da([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Da([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,
30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Da([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Da([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Da([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,
134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Da([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new Da([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0,8,16,24,36,52,72,96,124,160,162,164,166,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var z=J(da+f+1),a=J(da),k=J(B),H=J(B);this.adj43=H;this.iteration_init=function(b){var e=b.internal_flags,d=e.l3_side;
if(0==e.iteration_init_init){e.iteration_init_init=1;d.main_data_begin=0;d=b.internal_flags.ATH.l;for(var g=b.internal_flags.ATH.psfb21,h=b.internal_flags.ATH.s,y=b.internal_flags.ATH.psfb12,p=b.internal_flags,q=b.out_samplerate,w=0;w<c.SBMAX_l;w++){var u=p.scalefac_band.l[w],l=p.scalefac_band.l[w+1];for(d[w]=lb.MAX_VALUE;u<l;u++){var v=u*q/1152;v=r(b,v);d[w]=Math.min(d[w],v)}}for(w=0;w<c.PSFB21;w++)for(u=p.scalefac_band.psfb21[w],l=p.scalefac_band.psfb21[w+1],g[w]=lb.MAX_VALUE;u<l;u++)v=u*q/1152,
v=r(b,v),g[w]=Math.min(g[w],v);for(w=0;w<c.SBMAX_s;w++){u=p.scalefac_band.s[w];l=p.scalefac_band.s[w+1];for(h[w]=lb.MAX_VALUE;u<l;u++)v=u*q/384,v=r(b,v),h[w]=Math.min(h[w],v);h[w]*=p.scalefac_band.s[w+1]-p.scalefac_band.s[w]}for(w=0;w<c.PSFB12;w++){u=p.scalefac_band.psfb12[w];l=p.scalefac_band.psfb12[w+1];for(y[w]=lb.MAX_VALUE;u<l;u++)v=u*q/384,v=r(b,v),y[w]=Math.min(y[w],v);y[w]*=p.scalefac_band.s[13]-p.scalefac_band.s[12]}if(b.noATH){for(w=0;w<c.SBMAX_l;w++)d[w]=1E-20;for(w=0;w<c.PSFB21;w++)g[w]=
1E-20;for(w=0;w<c.SBMAX_s;w++)h[w]=1E-20;for(w=0;w<c.PSFB12;w++)y[w]=1E-20}p.ATH.floor=10*Math.log10(r(b,-1));k[0]=0;for(d=1;d<B;d++)k[d]=Math.pow(d,4/3);for(d=0;d<B-1;d++)H[d]=d+1-Math.pow(.5*(k[d]+k[d+1]),.75);H[d]=.5;for(d=0;d<da;d++)a[d]=Math.pow(2,-.1875*(d-210));for(d=0;d<=da+f;d++)z[d]=Math.pow(2,.25*(d-210-f));n.huffman_init(e);d=b.exp_nspsytune>>2&63;32<=d&&(d-=64);g=Math.pow(10,d/4/10);d=b.exp_nspsytune>>8&63;32<=d&&(d-=64);h=Math.pow(10,d/4/10);d=b.exp_nspsytune>>14&63;32<=d&&(d-=64);y=
Math.pow(10,d/4/10);d=b.exp_nspsytune>>20&63;32<=d&&(d-=64);b=y*Math.pow(10,d/4/10);for(d=0;d<c.SBMAX_l;d++)p=6>=d?g:13>=d?h:20>=d?y:b,e.nsPsy.longfact[d]=p;for(d=0;d<c.SBMAX_s;d++)p=5>=d?g:10>=d?h:11>=d?y:b,e.nsPsy.shortfact[d]=p}};this.on_pe=function(a,b,d,c,f,k){var e=a.internal_flags,g=0,m=V(2),h;g=new La(g);a=E.ResvMaxBits(a,c,g,k);g=g.bits;var l=g+a;l>Y.MAX_BITS_PER_GRANULE&&(l=Y.MAX_BITS_PER_GRANULE);for(h=k=0;h<e.channels_out;++h)d[h]=Math.min(Y.MAX_BITS_PER_CHANNEL,g/e.channels_out),m[h]=
0|d[h]*b[f][h]/700-d[h],m[h]>3*c/4&&(m[h]=3*c/4),0>m[h]&&(m[h]=0),m[h]+d[h]>Y.MAX_BITS_PER_CHANNEL&&(m[h]=Math.max(0,Y.MAX_BITS_PER_CHANNEL-d[h])),k+=m[h];if(k>a)for(h=0;h<e.channels_out;++h)m[h]=a*m[h]/k;for(h=0;h<e.channels_out;++h)d[h]+=m[h],a-=m[h];for(h=k=0;h<e.channels_out;++h)k+=d[h];if(k>Y.MAX_BITS_PER_GRANULE)for(h=0;h<e.channels_out;++h)d[h]*=Y.MAX_BITS_PER_GRANULE,d[h]/=k;return l};this.reduce_side=function(a,b,d,c){b=.33*(.5-b)/.5;0>b&&(b=0);.5<b&&(b=.5);b=0|.5*b*(a[0]+a[1]);b>Y.MAX_BITS_PER_CHANNEL-
a[0]&&(b=Y.MAX_BITS_PER_CHANNEL-a[0]);0>b&&(b=0);125<=a[1]&&(125<a[1]-b?(a[0]<d&&(a[0]+=b),a[1]-=b):(a[0]+=a[1]-125,a[1]=125));b=a[0]+a[1];b>c&&(a[0]=c*a[0]/b,a[1]=c*a[1]/b)};this.athAdjust=function(a,b,d){b=aa.FAST_LOG10_X(b,10);a*=a;var c=0;b-=d;1E-20<a&&(c=1+aa.FAST_LOG10_X(a,10/90.30873362));0>c&&(c=0);return Math.pow(10,.1*(b*c+(d+90.30873362-94.82444863)))};this.calc_xmin=function(a,b,d,f){var e=0,g=a.internal_flags,h,m=0,k=0,n=g.ATH,l=d.xr,v=a.VBR==F.vbr_mtrh?1:0,x=g.masking_lower;if(a.VBR==
F.vbr_mtrh||a.VBR==F.vbr_mt)x=1;for(h=0;h<d.psy_lmax;h++){var A=a.VBR==F.vbr_rh||a.VBR==F.vbr_mtrh?athAdjust(n.adjust,n.l[h],n.floor):n.adjust*n.l[h];var z=d.width[h];var u=A/z;var r=2.220446049250313E-16;var B=z>>1;var C=0;do{var I=l[m]*l[m];C+=I;r+=I<u?I:u;m++;I=l[m]*l[m];C+=I;r+=I<u?I:u;m++}while(0<--B);C>A&&k++;h==c.SBPSY_l&&(u=A*g.nsPsy.longfact[h],r<u&&(r=u));0!=v&&(A=r);a.ATHonly||(r=b.en.l[h],0<r&&(u=C*b.thm.l[h]*x/r,0!=v&&(u*=g.nsPsy.longfact[h]),A<u&&(A=u)));0!=v?f[e++]=A:f[e++]=A*g.nsPsy.longfact[h]}C=
575;if(d.block_type!=c.SHORT_TYPE)for(A=576;0!=A--&&oa.EQ(l[A],0);)C=A;d.max_nonzero_coeff=C;for(var O=d.sfb_smin;h<d.psymax;O++,h+=3){var G;var D=a.VBR==F.vbr_rh||a.VBR==F.vbr_mtrh?athAdjust(n.adjust,n.s[O],n.floor):n.adjust*n.s[O];z=d.width[h];for(G=0;3>G;G++){C=0;B=z>>1;u=D/z;r=2.220446049250313E-16;do I=l[m]*l[m],C+=I,r+=I<u?I:u,m++,I=l[m]*l[m],C+=I,r+=I<u?I:u,m++;while(0<--B);C>D&&k++;O==c.SBPSY_s&&(u=D*g.nsPsy.shortfact[O],r<u&&(r=u));A=0!=v?r:D;a.ATHonly||a.ATHshort||(r=b.en.s[O][G],0<r&&(u=
C*b.thm.s[O][G]*x/r,0!=v&&(u*=g.nsPsy.shortfact[O]),A<u&&(A=u)));0!=v?f[e++]=A:f[e++]=A*g.nsPsy.shortfact[O]}a.useTemporal&&(f[e-3]>f[e-3+1]&&(f[e-3+1]+=(f[e-3]-f[e-3+1])*g.decay),f[e-3+1]>f[e-3+2]&&(f[e-3+2]+=(f[e-3+1]-f[e-3+2])*g.decay))}return k};this.calc_noise_core=function(a,b,d,c){var e=0,f=b.s,g=a.l3_enc;if(f>a.count1)for(;0!=d--;){var h=a.xr[f];f++;e+=h*h;h=a.xr[f];f++;e+=h*h}else if(f>a.big_values){var m=J(2);m[0]=0;for(m[1]=c;0!=d--;)h=Math.abs(a.xr[f])-m[g[f]],f++,e+=h*h,h=Math.abs(a.xr[f])-
m[g[f]],f++,e+=h*h}else for(;0!=d--;)h=Math.abs(a.xr[f])-k[g[f]]*c,f++,e+=h*h,h=Math.abs(a.xr[f])-k[g[f]]*c,f++,e+=h*h;b.s=f;return e};this.calc_noise=function(a,c,d,f,k){var e=0,g=0,m,t=0,n=0,l=0,v=-20,x=0,A=a.scalefac,u=0;for(m=f.over_SSD=0;m<a.psymax;m++){var r=a.global_gain-(A[u++]+(0!=a.preflag?b[m]:0)<<a.scalefac_scale+1)-8*a.subblock_gain[a.window[m]];if(null!=k&&k.step[m]==r){var B=k.noise[m];x+=a.width[m];d[e++]=B/c[g++];B=k.noise_log[m]}else{B=z[r+ha.Q_MAX2];var D=a.width[m]>>1;x+a.width[m]>
a.max_nonzero_coeff&&(D=a.max_nonzero_coeff-x+1,D=0<D?D>>1:0);x=new h(x);B=this.calc_noise_core(a,x,D,B);x=x.s;null!=k&&(k.step[m]=r,k.noise[m]=B);B=d[e++]=B/c[g++];B=aa.FAST_LOG10(Math.max(B,1E-20));null!=k&&(k.noise_log[m]=B)}null!=k&&(k.global_gain=a.global_gain);l+=B;0<B&&(r=Math.max(0|10*B+.5,1),f.over_SSD+=r*r,t++,n+=B);v=Math.max(v,B)}f.over_count=t;f.tot_noise=l;f.over_noise=n;f.max_noise=v;return t};this.set_pinfo=function(a,f,d,g,h){var e=a.internal_flags,k,m,n=0==f.scalefac_scale?.5:1,
t=f.scalefac,l=J(Ca.SFBMAX),v=J(Ca.SFBMAX),x=new Wb;calc_xmin(a,d,f,l);calc_noise(f,l,v,x,null);var A=0;var u=f.sfb_lmax;f.block_type!=c.SHORT_TYPE&&0==f.mixed_block_flag&&(u=22);for(k=0;k<u;k++){var r=e.scalefac_band.l[k],B=e.scalefac_band.l[k+1],z=B-r;for(m=0;A<B;A++)m+=f.xr[A]*f.xr[A];m/=z;var C=1E15;e.pinfo.en[g][h][k]=C*m;e.pinfo.xfsf[g][h][k]=C*l[k]*v[k]/z;m=0<d.en.l[k]&&!a.ATHonly?m/d.en.l[k]:0;e.pinfo.thr[g][h][k]=C*Math.max(m*d.thm.l[k],e.ATH.l[k]);e.pinfo.LAMEsfb[g][h][k]=0;0!=f.preflag&&
11<=k&&(e.pinfo.LAMEsfb[g][h][k]=-n*b[k]);k<c.SBPSY_l&&(e.pinfo.LAMEsfb[g][h][k]-=n*t[k])}if(f.block_type==c.SHORT_TYPE)for(u=k,k=f.sfb_smin;k<c.SBMAX_s;k++){r=e.scalefac_band.s[k];B=e.scalefac_band.s[k+1];z=B-r;for(var I=0;3>I;I++){m=0;for(C=r;C<B;C++)m+=f.xr[A]*f.xr[A],A++;m=Math.max(m/z,1E-20);C=1E15;e.pinfo.en_s[g][h][3*k+I]=C*m;e.pinfo.xfsf_s[g][h][3*k+I]=C*l[u]*v[u]/z;m=0<d.en.s[k][I]?m/d.en.s[k][I]:0;if(a.ATHonly||a.ATHshort)m=0;e.pinfo.thr_s[g][h][3*k+I]=C*Math.max(m*d.thm.s[k][I],e.ATH.s[k]);
e.pinfo.LAMEsfb_s[g][h][3*k+I]=-2*f.subblock_gain[I];k<c.SBPSY_s&&(e.pinfo.LAMEsfb_s[g][h][3*k+I]-=n*t[u]);u++}}e.pinfo.LAMEqss[g][h]=f.global_gain;e.pinfo.LAMEmainbits[g][h]=f.part2_3_length+f.part2_length;e.pinfo.LAMEsfbits[g][h]=f.part2_length;e.pinfo.over[g][h]=x.over_count;e.pinfo.max_noise[g][h]=10*x.max_noise;e.pinfo.over_noise[g][h]=10*x.over_noise;e.pinfo.tot_noise[g][h]=10*x.tot_noise;e.pinfo.over_SSD[g][h]=x.over_SSD}}function Gc(){function u(b,c,a){for(var f=10,n=c+238-14-286,e=-15;0>
e;e++){var m=h[f+-10];var d=b[n+-224]*m;var g=b[c+224]*m;m=h[f+-9];d+=b[n+-160]*m;g+=b[c+160]*m;m=h[f+-8];d+=b[n+-96]*m;g+=b[c+96]*m;m=h[f+-7];d+=b[n+-32]*m;g+=b[c+32]*m;m=h[f+-6];d+=b[n+32]*m;g+=b[c+-32]*m;m=h[f+-5];d+=b[n+96]*m;g+=b[c+-96]*m;m=h[f+-4];d+=b[n+160]*m;g+=b[c+-160]*m;m=h[f+-3];d+=b[n+224]*m;g+=b[c+-224]*m;m=h[f+-2];d+=b[c+-256]*m;g-=b[n+256]*m;m=h[f+-1];d+=b[c+-192]*m;g-=b[n+192]*m;m=h[f+0];d+=b[c+-128]*m;g-=b[n+128]*m;m=h[f+1];d+=b[c+-64]*m;g-=b[n+64]*m;m=h[f+2];d+=b[c+0]*m;g-=b[n+
0]*m;m=h[f+3];d+=b[c+64]*m;g-=b[n+-64]*m;m=h[f+4];d+=b[c+128]*m;g-=b[n+-128]*m;m=h[f+5];d+=b[c+192]*m;g-=b[n+-192]*m;d*=h[f+6];m=g-d;a[30+2*e]=g+d;a[31+2*e]=h[f+7]*m;f+=18;c--;n++}g=b[c+-16]*h[f+-10];d=b[c+-32]*h[f+-2];g+=(b[c+-48]-b[c+16])*h[f+-9];d+=b[c+-96]*h[f+-1];g+=(b[c+-80]+b[c+48])*h[f+-8];d+=b[c+-160]*h[f+0];g+=(b[c+-112]-b[c+80])*h[f+-7];d+=b[c+-224]*h[f+1];g+=(b[c+-144]+b[c+112])*h[f+-6];d-=b[c+32]*h[f+2];g+=(b[c+-176]-b[c+144])*h[f+-5];d-=b[c+96]*h[f+3];g+=(b[c+-208]+b[c+176])*h[f+-4];
d-=b[c+160]*h[f+4];g+=(b[c+-240]-b[c+208])*h[f+-3];d-=b[c+224];b=d-g;c=d+g;g=a[14];d=a[15]-g;a[31]=c+g;a[30]=b+d;a[15]=b-d;a[14]=c-g;d=a[28]-a[0];a[0]+=a[28];a[28]=d*h[f+-36+7];d=a[29]-a[1];a[1]+=a[29];a[29]=d*h[f+-36+7];d=a[26]-a[2];a[2]+=a[26];a[26]=d*h[f+-72+7];d=a[27]-a[3];a[3]+=a[27];a[27]=d*h[f+-72+7];d=a[24]-a[4];a[4]+=a[24];a[24]=d*h[f+-108+7];d=a[25]-a[5];a[5]+=a[25];a[25]=d*h[f+-108+7];d=a[22]-a[6];a[6]+=a[22];a[22]=d*aa.SQRT2;d=a[23]-a[7];a[7]+=a[23];a[23]=d*aa.SQRT2-a[7];a[7]-=a[6];a[22]-=
a[7];a[23]-=a[22];d=a[6];a[6]=a[31]-d;a[31]+=d;d=a[7];a[7]=a[30]-d;a[30]+=d;d=a[22];a[22]=a[15]-d;a[15]+=d;d=a[23];a[23]=a[14]-d;a[14]+=d;d=a[20]-a[8];a[8]+=a[20];a[20]=d*h[f+-180+7];d=a[21]-a[9];a[9]+=a[21];a[21]=d*h[f+-180+7];d=a[18]-a[10];a[10]+=a[18];a[18]=d*h[f+-216+7];d=a[19]-a[11];a[11]+=a[19];a[19]=d*h[f+-216+7];d=a[16]-a[12];a[12]+=a[16];a[16]=d*h[f+-252+7];d=a[17]-a[13];a[13]+=a[17];a[17]=d*h[f+-252+7];d=-a[20]+a[24];a[20]+=a[24];a[24]=d*h[f+-216+7];d=-a[21]+a[25];a[21]+=a[25];a[25]=d*h[f+
-216+7];d=a[4]-a[8];a[4]+=a[8];a[8]=d*h[f+-216+7];d=a[5]-a[9];a[5]+=a[9];a[9]=d*h[f+-216+7];d=a[0]-a[12];a[0]+=a[12];a[12]=d*h[f+-72+7];d=a[1]-a[13];a[1]+=a[13];a[13]=d*h[f+-72+7];d=a[16]-a[28];a[16]+=a[28];a[28]=d*h[f+-72+7];d=-a[17]+a[29];a[17]+=a[29];a[29]=d*h[f+-72+7];d=aa.SQRT2*(a[2]-a[10]);a[2]+=a[10];a[10]=d;d=aa.SQRT2*(a[3]-a[11]);a[3]+=a[11];a[11]=d;d=aa.SQRT2*(-a[18]+a[26]);a[18]+=a[26];a[26]=d-a[18];d=aa.SQRT2*(-a[19]+a[27]);a[19]+=a[27];a[27]=d-a[19];d=a[2];a[19]-=a[3];a[3]-=d;a[2]=a[31]-
d;a[31]+=d;d=a[3];a[11]-=a[19];a[18]-=d;a[3]=a[30]-d;a[30]+=d;d=a[18];a[27]-=a[11];a[19]-=d;a[18]=a[15]-d;a[15]+=d;d=a[19];a[10]-=d;a[19]=a[14]-d;a[14]+=d;d=a[10];a[11]-=d;a[10]=a[23]-d;a[23]+=d;d=a[11];a[26]-=d;a[11]=a[22]-d;a[22]+=d;d=a[26];a[27]-=d;a[26]=a[7]-d;a[7]+=d;d=a[27];a[27]=a[6]-d;a[6]+=d;d=aa.SQRT2*(a[0]-a[4]);a[0]+=a[4];a[4]=d;d=aa.SQRT2*(a[1]-a[5]);a[1]+=a[5];a[5]=d;d=aa.SQRT2*(a[16]-a[20]);a[16]+=a[20];a[20]=d;d=aa.SQRT2*(a[17]-a[21]);a[17]+=a[21];a[21]=d;d=-aa.SQRT2*(a[8]-a[12]);
a[8]+=a[12];a[12]=d-a[8];d=-aa.SQRT2*(a[9]-a[13]);a[9]+=a[13];a[13]=d-a[9];d=-aa.SQRT2*(a[25]-a[29]);a[25]+=a[29];a[29]=d-a[25];d=-aa.SQRT2*(a[24]+a[28]);a[24]-=a[28];a[28]=d-a[24];d=a[24]-a[16];a[24]=d;d=a[20]-d;a[20]=d;d=a[28]-d;a[28]=d;d=a[25]-a[17];a[25]=d;d=a[21]-d;a[21]=d;d=a[29]-d;a[29]=d;d=a[17]-a[1];a[17]=d;d=a[9]-d;a[9]=d;d=a[25]-d;a[25]=d;d=a[5]-d;a[5]=d;d=a[21]-d;a[21]=d;d=a[13]-d;a[13]=d;d=a[29]-d;a[29]=d;d=a[1]-a[0];a[1]=d;d=a[16]-d;a[16]=d;d=a[17]-d;a[17]=d;d=a[8]-d;a[8]=d;d=a[9]-d;
a[9]=d;d=a[24]-d;a[24]=d;d=a[25]-d;a[25]=d;d=a[4]-d;a[4]=d;d=a[5]-d;a[5]=d;d=a[20]-d;a[20]=d;d=a[21]-d;a[21]=d;d=a[12]-d;a[12]=d;d=a[13]-d;a[13]=d;d=a[28]-d;a[28]=d;d=a[29]-d;a[29]=d;d=a[0];a[0]+=a[31];a[31]-=d;d=a[1];a[1]+=a[30];a[30]-=d;d=a[16];a[16]+=a[15];a[15]-=d;d=a[17];a[17]+=a[14];a[14]-=d;d=a[8];a[8]+=a[23];a[23]-=d;d=a[9];a[9]+=a[22];a[22]-=d;d=a[24];a[24]+=a[7];a[7]-=d;d=a[25];a[25]+=a[6];a[6]-=d;d=a[4];a[4]+=a[27];a[27]-=d;d=a[5];a[5]+=a[26];a[26]-=d;d=a[20];a[20]+=a[11];a[11]-=d;d=a[21];
a[21]+=a[10];a[10]-=d;d=a[12];a[12]+=a[19];a[19]-=d;d=a[13];a[13]+=a[18];a[18]-=d;d=a[28];a[28]+=a[3];a[3]-=d;d=a[29];a[29]+=a[2];a[2]-=d}var h=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,
301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,
-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,
503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,
-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,
12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,
-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,
-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,
-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,
-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,
-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.0178904535*aa.SQRT2/2.384E-6,.008938074*aa.SQRT2/2.384E-6,.0015673635*aa.SQRT2/2.384E-6,.001228571*aa.SQRT2/2.384E-6,4.856585E-4*aa.SQRT2/2.384E-6,1.09434E-4*aa.SQRT2/2.384E-6,5.0783E-5*aa.SQRT2/2.384E-6,6.914E-6*aa.SQRT2/2.384E-6,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],n=[[2.382191739347913E-13,
6.423305872147834E-13,9.400849094049688E-13,1.122435026096556E-12,1.183840321267481E-12,1.122435026096556E-12,9.40084909404969E-13,6.423305872147839E-13,2.382191739347918E-13,5.456116108943412E-12,4.878985199565852E-12,4.240448995017367E-12,3.559909094758252E-12,2.858043359288075E-12,2.156177623817898E-12,1.475637723558783E-12,8.371015190102974E-13,2.599706096327376E-13,-5.456116108943412E-12,-4.878985199565852E-12,-4.240448995017367E-12,-3.559909094758252E-12,-2.858043359288076E-12,-2.156177623817898E-12,
-1.475637723558783E-12,-8.371015190102975E-13,-2.599706096327376E-13,-2.382191739347923E-13,-6.423305872147843E-13,-9.400849094049696E-13,-1.122435026096556E-12,-1.183840321267481E-12,-1.122435026096556E-12,-9.400849094049694E-13,-6.42330587214784E-13,-2.382191739347918E-13],[2.382191739347913E-13,6.423305872147834E-13,9.400849094049688E-13,1.122435026096556E-12,1.183840321267481E-12,1.122435026096556E-12,9.400849094049688E-13,6.423305872147841E-13,2.382191739347918E-13,5.456116108943413E-12,4.878985199565852E-12,
4.240448995017367E-12,3.559909094758253E-12,2.858043359288075E-12,2.156177623817898E-12,1.475637723558782E-12,8.371015190102975E-13,2.599706096327376E-13,-5.461314069809755E-12,-4.921085770524055E-12,-4.343405037091838E-12,-3.732668368707687E-12,-3.093523840190885E-12,-2.430835727329465E-12,-1.734679010007751E-12,-9.74825365660928E-13,-2.797435120168326E-13,0,0,0,0,0,0,-2.283748241799531E-13,-4.037858874020686E-13,-2.146547464825323E-13],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,
1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,
.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2.283748241799531E-13,4.037858874020686E-13,2.146547464825323E-13,5.461314069809755E-12,4.921085770524055E-12,4.343405037091838E-12,3.732668368707687E-12,3.093523840190885E-12,2.430835727329466E-12,1.734679010007751E-12,9.74825365660928E-13,2.797435120168326E-13,-5.456116108943413E-12,-4.878985199565852E-12,-4.240448995017367E-12,-3.559909094758253E-12,-2.858043359288075E-12,-2.156177623817898E-12,-1.475637723558782E-12,
-8.371015190102975E-13,-2.599706096327376E-13,-2.382191739347913E-13,-6.423305872147834E-13,-9.400849094049688E-13,-1.122435026096556E-12,-1.183840321267481E-12,-1.122435026096556E-12,-9.400849094049688E-13,-6.423305872147841E-13,-2.382191739347918E-13]],r=n[c.SHORT_TYPE],D=n[c.SHORT_TYPE],B=n[c.SHORT_TYPE],F=n[c.SHORT_TYPE],f=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];this.mdct_sub48=function(b,h,a){for(var k=286,z=0;z<b.channels_out;z++){for(var e=0;e<
b.mode_gr;e++){for(var m,d=b.l3_side.tt[e][z],g=d.xr,t=0,y=b.sb_sample[z][1-e],p=0,q=0;9>q;q++)for(u(h,k,y[p]),u(h,k+32,y[p+1]),p+=2,k+=64,m=1;32>m;m+=2)y[p-1][m]*=-1;for(m=0;32>m;m++,t+=18){y=d.block_type;p=b.sb_sample[z][e];var w=b.sb_sample[z][1-e];0!=d.mixed_block_flag&&2>m&&(y=0);if(1E-12>b.amp_filter[m])ya.fill(g,t+0,t+18,0);else{if(1>b.amp_filter[m])for(q=0;18>q;q++)w[q][f[m]]*=b.amp_filter[m];if(y==c.SHORT_TYPE){for(q=-3;0>q;q++){var E=n[c.SHORT_TYPE][q+3];g[t+3*q+9]=p[9+q][f[m]]*E-p[8-q][f[m]];
g[t+3*q+18]=p[14-q][f[m]]*E+p[15+q][f[m]];g[t+3*q+10]=p[15+q][f[m]]*E-p[14-q][f[m]];g[t+3*q+19]=w[2-q][f[m]]*E+w[3+q][f[m]];g[t+3*q+11]=w[3+q][f[m]]*E-w[2-q][f[m]];g[t+3*q+20]=w[8-q][f[m]]*E+w[9+q][f[m]]}q=g;p=t;for(E=0;3>E;E++){var l=q[p+6]*n[c.SHORT_TYPE][0]-q[p+15];w=q[p+0]*n[c.SHORT_TYPE][2]-q[p+9];var v=l+w;var x=l-w;l=q[p+15]*n[c.SHORT_TYPE][0]+q[p+6];w=q[p+9]*n[c.SHORT_TYPE][2]+q[p+0];var A=l+w;var T=-l+w;w=2.069978111953089E-11*(q[p+3]*n[c.SHORT_TYPE][1]-q[p+12]);l=2.069978111953089E-11*(q[p+
12]*n[c.SHORT_TYPE][1]+q[p+3]);q[p+0]=1.90752519173728E-11*v+w;q[p+15]=1.90752519173728E-11*-A+l;x*=1.6519652744032674E-11;A=9.537625958686404E-12*A+l;q[p+3]=x-A;q[p+6]=x+A;v=9.537625958686404E-12*v-w;T*=1.6519652744032674E-11;q[p+9]=v+T;q[p+12]=v-T;p++}}else{E=J(18);for(q=-9;0>q;q++)v=n[y][q+27]*w[q+9][f[m]]+n[y][q+36]*w[8-q][f[m]],x=n[y][q+9]*p[q+9][f[m]]-n[y][q+18]*p[8-q][f[m]],E[q+9]=v-x*r[3+q+9],E[q+18]=v*r[3+q+9]+x;q=g;p=t;v=E;var M=v[17]-v[9];var Q=v[15]-v[11];var Ia=v[14]-v[12];T=v[0]+v[8];
A=v[1]+v[7];l=v[2]+v[6];x=v[3]+v[5];q[p+17]=T+l-x-(A-v[4]);E=(T+l-x)*D[19]+(A-v[4]);w=(M-Q-Ia)*D[18];q[p+5]=w+E;q[p+6]=w-E;var C=(v[16]-v[10])*D[18];A=A*D[19]+v[4];w=M*D[12]+C+Q*D[13]+Ia*D[14];E=-T*D[16]+A-l*D[17]+x*D[15];q[p+1]=w+E;q[p+2]=w-E;w=M*D[13]-C-Q*D[14]+Ia*D[12];E=-T*D[17]+A-l*D[15]+x*D[16];q[p+9]=w+E;q[p+10]=w-E;w=M*D[14]-C+Q*D[12]-Ia*D[13];E=T*D[15]-A+l*D[16]-x*D[17];q[p+13]=w+E;q[p+14]=w-E;M=v[8]-v[0];Q=v[6]-v[2];Ia=v[5]-v[3];T=v[17]+v[9];A=v[16]+v[10];l=v[15]+v[11];x=v[14]+v[12];q[p+
0]=T+l+x+(A+v[13]);w=(T+l+x)*D[19]-(A+v[13]);E=(M-Q+Ia)*D[18];q[p+11]=w+E;q[p+12]=w-E;C=(v[7]-v[1])*D[18];A=v[13]-A*D[19];w=T*D[15]-A+l*D[16]+x*D[17];E=M*D[14]+C+Q*D[12]+Ia*D[13];q[p+3]=w+E;q[p+4]=w-E;w=-T*D[17]+A-l*D[15]-x*D[16];E=M*D[13]+C-Q*D[14]-Ia*D[12];q[p+7]=w+E;q[p+8]=w-E;w=-T*D[16]+A-l*D[17]-x*D[15];E=M*D[12]-C+Q*D[13]-Ia*D[14];q[p+15]=w+E;q[p+16]=w-E}}if(y!=c.SHORT_TYPE&&0!=m)for(q=7;0<=q;--q)y=g[t+q]*B[20+q]+g[t+-1-q]*F[28+q],p=g[t+q]*F[28+q]-g[t+-1-q]*B[20+q],g[t+-1-q]=y,g[t+q]=p}}h=a;
k=286;if(1==b.mode_gr)for(e=0;18>e;e++)S.arraycopy(b.sb_sample[z][1][e],0,b.sb_sample[z][0][e],0,32)}}}function va(){this.thm=new Xb;this.en=new Xb}function c(){var u=c.FFTOFFSET,h=c.MPG_MD_MS_LR,n=null,r=this.psy=null,D=null,B=null;this.setModules=function(c,b,h,a){n=c;r=this.psy=b;D=a;B=h};var da=new Gc;this.lame_encode_mp3_frame=function(f,b,z,a,k,E){var e=Pb([2,2]);e[0][0]=new va;e[0][1]=new va;e[1][0]=new va;e[1][1]=new va;var m=Pb([2,2]);m[0][0]=new va;m[0][1]=new va;m[1][0]=new va;m[1][1]=
new va;var d=[null,null],g=f.internal_flags,t=ca([2,4]),y=[.5,.5],p=[[0,0],[0,0]],q=[[0,0],[0,0]];d[0]=b;d[1]=z;if(0==g.lame_encode_frame_init){b=f.internal_flags;var w,H;if(0==b.lame_encode_frame_init){z=J(2014);var l=J(2014);b.lame_encode_frame_init=1;for(H=w=0;w<286+576*(1+b.mode_gr);++w)w<576*b.mode_gr?(z[w]=0,2==b.channels_out&&(l[w]=0)):(z[w]=d[0][H],2==b.channels_out&&(l[w]=d[1][H]),++H);for(H=0;H<b.mode_gr;H++)for(w=0;w<b.channels_out;w++)b.l3_side.tt[H][w].block_type=c.SHORT_TYPE;da.mdct_sub48(b,
z,l)}}g.padding=0;0>(g.slot_lag-=g.frac_SpF)&&(g.slot_lag+=f.out_samplerate,g.padding=1);if(0!=g.psymodel)for(l=[null,null],w=0,H=V(2),z=0;z<g.mode_gr;z++){for(b=0;b<g.channels_out;b++)l[b]=d[b],w=576+576*z-c.FFTOFFSET;b=f.VBR==F.vbr_mtrh||f.VBR==F.vbr_mt?r.L3psycho_anal_vbr(f,l,w,z,e,m,p[z],q[z],t[z],H):r.L3psycho_anal_ns(f,l,w,z,e,m,p[z],q[z],t[z],H);if(0!=b)return-4;f.mode==ka.JOINT_STEREO&&(y[z]=t[z][2]+t[z][3],0<y[z]&&(y[z]=t[z][3]/y[z]));for(b=0;b<g.channels_out;b++){var v=g.l3_side.tt[z][b];
v.block_type=H[b];v.mixed_block_flag=0}}else for(z=0;z<g.mode_gr;z++)for(b=0;b<g.channels_out;b++)g.l3_side.tt[z][b].block_type=c.NORM_TYPE,g.l3_side.tt[z][b].mixed_block_flag=0,q[z][b]=p[z][b]=700;0==g.ATH.useAdjust?g.ATH.adjust=1:(b=g.loudness_sq[0][0],t=g.loudness_sq[1][0],2==g.channels_out?(b+=g.loudness_sq[0][1],t+=g.loudness_sq[1][1]):(b+=b,t+=t),2==g.mode_gr&&(b=Math.max(b,t)),b=.5*b*g.ATH.aaSensitivityP,.03125<b?(1<=g.ATH.adjust?g.ATH.adjust=1:g.ATH.adjust<g.ATH.adjustLimit&&(g.ATH.adjust=
g.ATH.adjustLimit),g.ATH.adjustLimit=1):(t=31.98*b+6.25E-4,g.ATH.adjust>=t?(g.ATH.adjust*=.075*t+.925,g.ATH.adjust<t&&(g.ATH.adjust=t)):g.ATH.adjustLimit>=t?g.ATH.adjust=t:g.ATH.adjust<g.ATH.adjustLimit&&(g.ATH.adjust=g.ATH.adjustLimit),g.ATH.adjustLimit=t));da.mdct_sub48(g,d[0],d[1]);g.mode_ext=c.MPG_MD_LR_LR;if(f.force_ms)g.mode_ext=c.MPG_MD_MS_LR;else if(f.mode==ka.JOINT_STEREO){for(z=l=t=0;z<g.mode_gr;z++)for(b=0;b<g.channels_out;b++)t+=q[z][b],l+=p[z][b];t<=1*l&&(t=g.l3_side.tt[0],b=g.l3_side.tt[g.mode_gr-
1],t[0].block_type==t[1].block_type&&b[0].block_type==b[1].block_type&&(g.mode_ext=c.MPG_MD_MS_LR))}g.mode_ext==h&&(e=m,p=q);if(f.analysis&&null!=g.pinfo)for(z=0;z<g.mode_gr;z++)for(b=0;b<g.channels_out;b++)g.pinfo.ms_ratio[z]=g.ms_ratio[z],g.pinfo.ms_ener_ratio[z]=y[z],g.pinfo.blocktype[z][b]=g.l3_side.tt[z][b].block_type,g.pinfo.pe[z][b]=p[z][b],S.arraycopy(g.l3_side.tt[z][b].xr,0,g.pinfo.xr[z][b],0,576),g.mode_ext==h&&(g.pinfo.ers[z][b]=g.pinfo.ers[z][b+2],S.arraycopy(g.pinfo.energy[z][b+2],0,
g.pinfo.energy[z][b],0,g.pinfo.energy[z][b].length));if(f.VBR==F.vbr_off||f.VBR==F.vbr_abr){for(m=0;18>m;m++)g.nsPsy.pefirbuf[m]=g.nsPsy.pefirbuf[m+1];for(z=q=0;z<g.mode_gr;z++)for(b=0;b<g.channels_out;b++)q+=p[z][b];g.nsPsy.pefirbuf[18]=q;q=g.nsPsy.pefirbuf[9];for(m=0;9>m;m++)q+=(g.nsPsy.pefirbuf[m]+g.nsPsy.pefirbuf[18-m])*c.fircoef[m];q=3350*g.mode_gr*g.channels_out/q;for(z=0;z<g.mode_gr;z++)for(b=0;b<g.channels_out;b++)p[z][b]*=q}g.iteration_loop.iteration_loop(f,p,y,e);n.format_bitstream(f);a=
n.copy_buffer(g,a,k,E,1);f.bWriteVbrTag&&D.addVbrFrame(f);if(f.analysis&&null!=g.pinfo){for(b=0;b<g.channels_out;b++){for(k=0;k<u;k++)g.pinfo.pcmdata[b][k]=g.pinfo.pcmdata[b][k+f.framesize];for(k=u;1600>k;k++)g.pinfo.pcmdata[b][k]=d[b][k-u]}B.set_frame_pinfo(f,e)}g.bitrate_stereoMode_Hist[g.bitrate_index][4]++;g.bitrate_stereoMode_Hist[15][4]++;2==g.channels_out&&(g.bitrate_stereoMode_Hist[g.bitrate_index][g.mode_ext]++,g.bitrate_stereoMode_Hist[15][g.mode_ext]++);for(f=0;f<g.mode_gr;++f)for(d=0;d<
g.channels_out;++d)k=g.l3_side.tt[f][d].block_type|0,0!=g.l3_side.tt[f][d].mixed_block_flag&&(k=4),g.bitrate_blockType_Hist[g.bitrate_index][k]++,g.bitrate_blockType_Hist[g.bitrate_index][5]++,g.bitrate_blockType_Hist[15][k]++,g.bitrate_blockType_Hist[15][5]++;return a}}function Hc(){this.size=this.pos=this.want=this.seen=this.sum=0;this.bag=null;this.TotalFrameSize=this.nBytesWritten=this.nVbrNumFrames=0}function Ic(){this.last_en_subshort=ca([4,9]);this.lastAttacks=V(4);this.pefirbuf=J(19);this.longfact=
J(c.SBMAX_l);this.shortfact=J(c.SBMAX_s);this.attackthre_s=this.attackthre=0}function Jc(){this.tt=[[null,null],[null,null]];this.resvDrain_post=this.resvDrain_pre=this.private_bits=this.main_data_begin=0;this.scfsi=[V(4),V(4)];for(var c=0;2>c;c++)for(var h=0;2>h;h++)this.tt[c][h]=new zb}function Xb(){this.l=J(c.SBMAX_l);this.s=ca([c.SBMAX_s,3]);var r=this;this.assign=function(h){S.arraycopy(h.l,0,r.l,0,c.SBMAX_l);for(var n=0;n<c.SBMAX_s;n++)for(var u=0;3>u;u++)r.s[n][u]=h.s[n][u]}}function Y(){function r(){this.ptr=
this.write_timing=0;this.buf=new Int8Array(40)}this.fill_buffer_resample_init=this.iteration_init_init=this.lame_encode_frame_init=this.Class_ID=0;this.mfbuf=ca([2,Y.MFSIZE]);this.full_outer_loop=this.use_best_huffman=this.subblock_gain=this.noise_shaping_stop=this.psymodel=this.substep_shaping=this.noise_shaping_amp=this.noise_shaping=this.highpass2=this.highpass1=this.lowpass2=this.lowpass1=this.mode_ext=this.samplerate_index=this.bitrate_index=this.VBR_max_bitrate=this.VBR_min_bitrate=this.mf_size=
this.mf_samples_to_encode=this.resample_ratio=this.channels_out=this.channels_in=this.mode_gr=0;this.l3_side=new Jc;this.ms_ratio=J(2);this.slot_lag=this.frac_SpF=this.padding=0;this.tag_spec=null;this.nMusicCRC=0;this.OldValue=V(2);this.CurrentStep=V(2);this.masking_lower=0;this.bv_scf=V(576);this.pseudohalf=V(Ca.SFBMAX);this.sfb21_extra=!1;this.inbuf_old=Array(2);this.blackfilt=Array(2*Y.BPC+1);this.itime=new Float64Array(2);this.sideinfo_len=0;this.sb_sample=ca([2,2,18,c.SBLIMIT]);this.amp_filter=
J(32);this.header=Array(Y.MAX_HEADER_BUF);this.ResvMax=this.ResvSize=this.ancillary_flag=this.w_ptr=this.h_ptr=0;this.scalefac_band=new Da;this.minval_l=J(c.CBANDS);this.minval_s=J(c.CBANDS);this.nb_1=ca([4,c.CBANDS]);this.nb_2=ca([4,c.CBANDS]);this.nb_s1=ca([4,c.CBANDS]);this.nb_s2=ca([4,c.CBANDS]);this.s3_ll=this.s3_ss=null;this.decay=0;this.thm=Array(4);this.en=Array(4);this.tot_ener=J(4);this.loudness_sq=ca([2,2]);this.loudness_sq_save=J(2);this.mld_l=J(c.SBMAX_l);this.mld_s=J(c.SBMAX_s);this.bm_l=
V(c.SBMAX_l);this.bo_l=V(c.SBMAX_l);this.bm_s=V(c.SBMAX_s);this.bo_s=V(c.SBMAX_s);this.npart_s=this.npart_l=0;this.s3ind=Xa([c.CBANDS,2]);this.s3ind_s=Xa([c.CBANDS,2]);this.numlines_s=V(c.CBANDS);this.numlines_l=V(c.CBANDS);this.rnumlines_l=J(c.CBANDS);this.mld_cb_l=J(c.CBANDS);this.mld_cb_s=J(c.CBANDS);this.numlines_l_num1=this.numlines_s_num1=0;this.pe=J(4);this.ms_ener_ratio_old=this.ms_ratio_l_old=this.ms_ratio_s_old=0;this.blocktype_old=V(2);this.nsPsy=new Ic;this.VBR_seek_table=new Hc;this.PSY=
this.ATH=null;this.nogap_current=this.nogap_total=0;this.findPeakSample=this.findReplayGain=this.decode_on_the_fly=!0;this.AudiophileGain=this.RadioGain=this.PeakSample=0;this.rgdata=null;this.noclipScale=this.noclipGainChange=0;this.bitrate_stereoMode_Hist=Xa([16,5]);this.bitrate_blockType_Hist=Xa([16,6]);this.hip=this.pinfo=null;this.in_buffer_nsamples=0;this.iteration_loop=this.in_buffer_1=this.in_buffer_0=null;for(var h=0;h<this.en.length;h++)this.en[h]=new Xb;for(h=0;h<this.thm.length;h++)this.thm[h]=
new Xb;for(h=0;h<this.header.length;h++)this.header[h]=new r}function Kc(){function r(c,h,f){var b=0;f<<=1;var n=h+f;var a=4;do{var k;var r=a>>1;var e=a;var m=a<<1;var d=m+e;a=m<<1;var g=h;var t=g+r;do{var u=c[g+0]-c[g+e];var p=c[g+0]+c[g+e];var q=c[g+m]-c[g+d];var w=c[g+m]+c[g+d];c[g+m]=p-w;c[g+0]=p+w;c[g+d]=u-q;c[g+e]=u+q;u=c[t+0]-c[t+e];p=c[t+0]+c[t+e];q=aa.SQRT2*c[t+d];w=aa.SQRT2*c[t+m];c[t+m]=p-w;c[t+0]=p+w;c[t+d]=u-q;c[t+e]=u+q;t+=a;g+=a}while(g<n);var B=E[b+0];var l=E[b+1];for(k=1;k<r;k++){var v=
1-2*l*l;var x=2*l*B;g=h+k;t=h+e-k;do{var A=x*c[g+e]-v*c[t+e];w=v*c[g+e]+x*c[t+e];u=c[g+0]-w;p=c[g+0]+w;var D=c[t+0]-A;var J=c[t+0]+A;A=x*c[g+d]-v*c[t+d];w=v*c[g+d]+x*c[t+d];q=c[g+m]-w;w=c[g+m]+w;var Q=c[t+m]-A;var F=c[t+m]+A;A=l*w-B*Q;w=B*w+l*Q;c[g+m]=p-w;c[g+0]=p+w;c[t+d]=D-A;c[t+e]=D+A;A=B*F-l*q;w=l*F+B*q;c[t+m]=J-w;c[t+0]=J+w;c[g+d]=u-A;c[g+e]=u+A;t+=a;g+=a}while(g<n);v=B;B=v*E[b+0]-l*E[b+1];l=v*E[b+1]+l*E[b+0]}b+=2}while(a<f)}var h=J(c.BLKSIZE),n=J(c.BLKSIZE_s/2),E=[.9238795325112867,.3826834323650898,
.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475],D=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,
182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(h,u,f,b,z){for(h=0;3>h;h++){var a=c.BLKSIZE_s/2,k=65535&192*(h+1),B=c.BLKSIZE_s/8-1;do{var e=D[B<<2]&255;var m=n[e]*b[f][z+e+k];var d=n[127-e]*b[f][z+e+k+128];var g=m-d;m+=d;var t=n[e+64]*b[f][z+e+k+64];d=n[63-e]*b[f][z+e+k+192];var y=t-d;t+=d;a-=4;u[h][a+0]=m+t;u[h][a+2]=m-t;u[h][a+1]=g+y;u[h][a+3]=g-y;m=n[e+1]*b[f][z+e+k+1];d=n[126-e]*b[f][z+e+k+129];g=m-d;m+=d;t=n[e+65]*b[f][z+e+k+65];d=n[62-e]*b[f][z+
e+k+193];y=t-d;t+=d;u[h][a+c.BLKSIZE_s/2+0]=m+t;u[h][a+c.BLKSIZE_s/2+2]=m-t;u[h][a+c.BLKSIZE_s/2+1]=g+y;u[h][a+c.BLKSIZE_s/2+3]=g-y}while(0<=--B);r(u[h],a,c.BLKSIZE_s/2)}};this.fft_long=function(n,u,f,b,z){n=c.BLKSIZE/8-1;var a=c.BLKSIZE/2;do{var k=D[n]&255;var B=h[k]*b[f][z+k];var e=h[k+512]*b[f][z+k+512];var m=B-e;B+=e;var d=h[k+256]*b[f][z+k+256];e=h[k+768]*b[f][z+k+768];var g=d-e;d+=e;a-=4;u[a+0]=B+d;u[a+2]=B-d;u[a+1]=m+g;u[a+3]=m-g;B=h[k+1]*b[f][z+k+1];e=h[k+513]*b[f][z+k+513];m=B-e;B+=e;d=h[k+
257]*b[f][z+k+257];e=h[k+769]*b[f][z+k+769];g=d-e;d+=e;u[a+c.BLKSIZE/2+0]=B+d;u[a+c.BLKSIZE/2+2]=B-d;u[a+c.BLKSIZE/2+1]=m+g;u[a+c.BLKSIZE/2+3]=m-g}while(0<=--n);r(u,a,c.BLKSIZE/2)};this.init_fft=function(u){for(u=0;u<c.BLKSIZE;u++)h[u]=.42-.5*Math.cos(2*Math.PI*(u+.5)/c.BLKSIZE)+.08*Math.cos(4*Math.PI*(u+.5)/c.BLKSIZE);for(u=0;u<c.BLKSIZE_s/2;u++)n[u]=.5*(1-Math.cos(2*Math.PI*(u+.5)/c.BLKSIZE_s))}}function Yb(){function u(a,d){for(var b=0,l=0;l<c.BLKSIZE/2;++l)b+=a[l]*d.ATH.eql_w[l];return b*=y}function h(a,
c,d,b,f,e){if(c>a)if(c<a*q)var h=c/a;else return a+c;else{if(a>=c*q)return a+c;h=a/c}a+=c;if(6>=b+3){if(h>=p)return a;b=0|aa.FAST_LOG10_X(h,16);return a*v[b]}b=0|aa.FAST_LOG10_X(h,16);c=0!=e?f.ATH.cb_s[d]*f.ATH.adjust:f.ATH.cb_l[d]*f.ATH.adjust;return a<w*c?a>c?(d=1,13>=b&&(d=x[b]),c=aa.FAST_LOG10_X(a/c,10/15),a*((l[b]-d)*c+d)):13<b?a:a*x[b]:a*l[b]}function n(a,c,d){0>a&&(a=0);0>c&&(c=0);if(0>=a)return c;if(0>=c)return a;var b=c>a?c/a:a/c;if(-2<=d&&2>=d){if(b>=p)return a+c;d=0|aa.FAST_LOG10_X(b,16);
return(a+c)*A[d]}if(b<q)return a+c;a<c&&(a=c);return a}function r(a,d,b,l,f){var e,h,g=0,m=0;for(e=h=0;e<c.SBMAX_s;++h,++e){var k=a.bo_s[e],x=a.npart_s;for(k=k<x?k:x;h<k;)g+=d[h],m+=b[h],h++;a.en[l].s[e][f]=g;a.thm[l].s[e][f]=m;if(h>=x){++e;break}m=a.PSY.bo_s_weight[e];x=1-m;g=m*d[h];m*=b[h];a.en[l].s[e][f]+=g;a.thm[l].s[e][f]+=m;g=x*d[h];m=x*b[h]}for(;e<c.SBMAX_s;++e)a.en[l].s[e][f]=0,a.thm[l].s[e][f]=0}function D(a,d,b,l){var f,e,h=0,g=0;for(f=e=0;f<c.SBMAX_l;++e,++f){var m=a.bo_l[f],k=a.npart_l;
for(m=m<k?m:k;e<m;)h+=d[e],g+=b[e],e++;a.en[l].l[f]=h;a.thm[l].l[f]=g;if(e>=k){++f;break}g=a.PSY.bo_l_weight[f];k=1-g;h=g*d[e];g*=b[e];a.en[l].l[f]+=h;a.thm[l].l[f]+=g;h=k*d[e];g=k*b[e]}for(;f<c.SBMAX_l;++f)a.en[l].l[f]=0,a.thm[l].l[f]=0}function B(a,c,d){return 1<=d?a:0>=d?c:0<c?Math.pow(a/c,d)*c:0}function U(a,d){for(var b=309.07,l=0;l<c.SBMAX_s-1;l++)for(var f=0;3>f;f++){var e=a.thm.s[l][f];if(0<e){e*=d;var h=a.en.s[l][f];h>e&&(b=h>1E10*e?b+23.02585092994046*T[l]:b+T[l]*aa.FAST_LOG10(h/e))}}return b}
function f(a,d){for(var b=281.0575,l=0;l<c.SBMAX_l-1;l++){var f=a.thm.l[l];if(0<f){f*=d;var e=a.en.l[l];e>f&&(b=e>1E10*f?b+23.02585092994046*M[l]:b+M[l]*aa.FAST_LOG10(e/f))}}return b}function b(a,c,b,d,l){var f,e;for(f=e=0;f<a.npart_l;++f){var h=0,g=0,m;for(m=0;m<a.numlines_l[f];++m,++e){var k=c[e];h+=k;g<k&&(g=k)}b[f]=h;d[f]=g;l[f]=h*a.rnumlines_l[f]}}function z(a,c,b,d){var l=S.length-1,f=0,e=b[f]+b[f+1];if(0<e){var h=c[f];h<c[f+1]&&(h=c[f+1]);e=20*(2*h-e)/(e*(a.numlines_l[f]+a.numlines_l[f+1]-
1));e|=0;e>l&&(e=l);d[f]=e}else d[f]=0;for(f=1;f<a.npart_l-1;f++)e=b[f-1]+b[f]+b[f+1],0<e?(h=c[f-1],h<c[f]&&(h=c[f]),h<c[f+1]&&(h=c[f+1]),e=20*(3*h-e)/(e*(a.numlines_l[f-1]+a.numlines_l[f]+a.numlines_l[f+1]-1)),e|=0,e>l&&(e=l),d[f]=e):d[f]=0;e=b[f-1]+b[f];0<e?(h=c[f-1],h<c[f]&&(h=c[f]),e=20*(2*h-e)/(e*(a.numlines_l[f-1]+a.numlines_l[f]-1)),e|=0,e>l&&(e=l),d[f]=e):d[f]=0}function a(a,c,b,d,f,l,e){var h=2*l;f=0<l?Math.pow(10,f):1;for(var g,m,k=0;k<e;++k){var x=a[2][k],p=a[3][k],n=c[0][k],v=c[1][k],
t=c[2][k],u=c[3][k];n<=1.58*v&&v<=1.58*n?(g=b[k]*x,m=Math.max(t,Math.min(u,b[k]*p)),g=Math.max(u,Math.min(t,g))):(m=t,g=u);0<l&&(u=d[k]*f,n=Math.min(Math.max(n,u),Math.max(v,u)),t=Math.max(m,u),u=Math.max(g,u),v=t+u,0<v&&n*h<v&&(n=n*h/v,t*=n,u*=n),m=Math.min(t,m),g=Math.min(u,g));m>x&&(m=x);g>p&&(g=p);c[2][k]=m;c[3][k]=g}}function k(a,c){a=0<=a?27*-a:a*c;return-72>=a?0:Math.exp(.2302585093*a)}function H(a){0>a&&(a=0);a*=.001;return 13*Math.atan(.76*a)+3.5*Math.atan(a*a/56.25)}function e(a,b,d,f,l,
e,h,g,m,k,x,p){var n=J(c.CBANDS+1),v=g/(15<p?1152:384),t=V(c.HBLKSIZE),u;g/=m;var q=0,r=0;for(u=0;u<c.CBANDS;u++){var A;var C=H(g*q);n[u]=g*q;for(A=q;.34>H(g*A)-C&&A<=m/2;A++);a[u]=A-q;for(r=u+1;q<A;)t[q++]=u;if(q>m/2){q=m/2;++u;break}}n[u]=g*q;for(q=0;q<p;q++)u=k[q],C=k[q+1],u=0|Math.floor(.5+x*(u-.5)),0>u&&(u=0),A=0|Math.floor(.5+x*(C-.5)),A>m/2&&(A=m/2),d[q]=(t[u]+t[A])/2,b[q]=t[A],h[q]=(v*C-n[b[q]])/(n[b[q]+1]-n[b[q]]),0>h[q]?h[q]=0:1<h[q]&&(h[q]=1),C=H(g*k[q]*x),C=Math.min(C,15.5)/15.5,e[q]=
Math.pow(10,1.25*(1-Math.cos(Math.PI*C))-2.5);for(b=q=0;b<r;b++)d=a[b],C=H(g*q),e=H(g*(q+d-1)),f[b]=.5*(C+e),C=H(g*(q-.5)),e=H(g*(q+d-.5)),l[b]=e-C,q+=d;return r}function m(a,b,d,f,l,e){var h=ca([c.CBANDS,c.CBANDS]),g=0;if(e)for(var m=0;m<b;m++)for(e=0;e<b;e++){var x=d[m]-d[e];x=0<=x?3*x:1.5*x;if(.5<=x&&2.5>=x){var p=x-.5;p=8*(p*p-2*p)}else p=0;x+=.474;x=15.811389+7.5*x-17.5*Math.sqrt(1+x*x);-60>=x?p=0:(x=Math.exp(.2302585093*(p+x)),p=x/.6609193);x=p*f[e];h[m][e]=x*l[m]}else for(e=0;e<b;e++){p=15+
Math.min(21/d[e],12);var n;var v;m=p;for(n=0;1E-20<k(n,m);--n);var u=n;for(v=0;1E-12<Math.abs(v-u);)n=(v+u)/2,0<k(n,m)?v=n:u=n;x=u;for(n=0;1E-20<k(n,m);n+=1);u=0;for(v=n;1E-12<Math.abs(v-u);)n=(v+u)/2,0<k(n,m)?u=n:v=n;u=v;var q=0;for(v=0;1E3>=v;++v)n=x+v*(u-x)/1E3,n=k(n,m),q+=n;n=1001/(q*(u-x));for(m=0;m<b;m++)x=n*k(d[m]-d[e],p)*f[e],h[m][e]=x*l[m]}for(m=0;m<b;m++){for(e=0;e<b&&!(0<h[m][e]);e++);a[m][0]=e;for(e=b-1;0<e&&!(0<h[m][e]);e--);a[m][1]=e;g+=a[m][1]-a[m][0]+1}d=J(g);for(m=f=0;m<b;m++)for(e=
a[m][0];e<=a[m][1];e++)d[f++]=h[m][e];return d}function d(a){a=H(a);a=Math.min(a,15.5)/15.5;return Math.pow(10,1.25*(1-Math.cos(Math.PI*a))-2.5)}function g(a,c){-.3>a&&(a=3410);a=Math.max(.1,a/1E3);return 3.64*Math.pow(a,-.8)-6.8*Math.exp(-.6*Math.pow(a-3.4,2))+6*Math.exp(-.15*Math.pow(a-8.7,2))+.001*(.6+.04*c)*Math.pow(a,4)}var t=new Kc,y=1/217621504/(c.BLKSIZE/2),p,q,w,S=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749],l=[3.3246*3.3246,3.23837*3.23837,9.9500500969,9.0247369744,8.1854926609,
7.0440875649,2.46209*2.46209,2.284*2.284,4.4892710641,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,2.4621061921,2.1508568964,1.37074*1.37074,1.31036*1.31036,1.5691069696,1.4555939904,1.16203*1.16203,1.2715945225,1.09428*1.09428,1.0659*1.0659,1.0779838276,1.0382591025,1],v=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],x=[5.5396212496,2.29259*2.29259,4.9868695969,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,
1.74303*1.74303,1.61695*1.61695,2.2499700001,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.2339655056,1.0779838276],A=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],T=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130],M=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1],Q=[-1.730326E-17,-.01703172,-1.349528E-17,.0418072,-6.73278E-17,-.0876324,-3.0835E-17,
.1863476,-1.104424E-16,-.627638];this.L3psycho_anal_ns=function(a,d,l,e,g,m,k,x,p,n){var v=a.internal_flags,q=ca([2,c.BLKSIZE]),A=ca([2,3,c.BLKSIZE_s]),w=J(c.CBANDS+1),C=J(c.CBANDS+1),I=J(c.CBANDS+2),O=V(2),y=V(2),G,E,R,T,M,H,K,X=ca([2,576]),Ia=V(c.CBANDS+2),P=V(c.CBANDS+2);ya.fill(P,0);var la=v.channels_out;a.mode==ka.JOINT_STEREO&&(la=4);var L=a.VBR==F.vbr_off?0==v.ResvMax?0:v.ResvSize/v.ResvMax*.5:a.VBR==F.vbr_rh||a.VBR==F.vbr_mtrh||a.VBR==F.vbr_mt?.6:1;for(G=0;G<v.channels_out;G++){var W=d[G],
da=l+576-350-21+192;for(R=0;576>R;R++){var Z;var Y=W[da+R+10];for(T=Z=0;9>T;T+=2)Y+=Q[T]*(W[da+R+T]+W[da+R+21-T]),Z+=Q[T+1]*(W[da+R+T+1]+W[da+R+21-T-1]);X[G][R]=Y+Z}g[e][G].en.assign(v.en[G]);g[e][G].thm.assign(v.thm[G]);2<la&&(m[e][G].en.assign(v.en[G+2]),m[e][G].thm.assign(v.thm[G+2]))}for(G=0;G<la;G++){var qa=J(12),Na=[0,0,0,0],oa=J(12),ha=1,pa=J(c.CBANDS),Ca=J(c.CBANDS),ta=[0,0,0,0],ra=J(c.HBLKSIZE),Da=ca([3,c.HBLKSIZE_s]);for(R=0;3>R;R++)qa[R]=v.nsPsy.last_en_subshort[G][R+6],oa[R]=qa[R]/v.nsPsy.last_en_subshort[G][R+
4],Na[0]+=qa[R];if(2==G)for(R=0;576>R;R++){var Za=X[0][R];var Vb=X[1][R];X[0][R]=Za+Vb;X[1][R]=Za-Vb}var va=X[G&1],dc=0;for(R=0;9>R;R++){for(var Xa=dc+64,Ga=1;dc<Xa;dc++)Ga<Math.abs(va[dc])&&(Ga=Math.abs(va[dc]));v.nsPsy.last_en_subshort[G][R]=qa[R+3]=Ga;Na[1+R/3]+=Ga;Ga=Ga>qa[R+3-2]?Ga/qa[R+3-2]:qa[R+3-2]>10*Ga?qa[R+3-2]/(10*Ga):0;oa[R+3]=Ga}if(a.analysis){var La=oa[0];for(R=1;12>R;R++)La<oa[R]&&(La=oa[R]);v.pinfo.ers[e][G]=v.pinfo.ers_save[G];v.pinfo.ers_save[G]=La}var lc=3==G?v.nsPsy.attackthre_s:
v.nsPsy.attackthre;for(R=0;12>R;R++)0==ta[R/3]&&oa[R]>lc&&(ta[R/3]=R%3+1);for(R=1;4>R;R++)1.7>(Na[R-1]>Na[R]?Na[R-1]/Na[R]:Na[R]/Na[R-1])&&(ta[R]=0,1==R&&(ta[0]=0));0!=ta[0]&&0!=v.nsPsy.lastAttacks[G]&&(ta[0]=0);if(3==v.nsPsy.lastAttacks[G]||0!=ta[0]+ta[1]+ta[2]+ta[3])ha=0,0!=ta[1]&&0!=ta[0]&&(ta[1]=0),0!=ta[2]&&0!=ta[1]&&(ta[2]=0),0!=ta[3]&&0!=ta[2]&&(ta[3]=0);2>G?y[G]=ha:0==ha&&(y[0]=y[1]=0);p[G]=v.tot_ener[G];var N=a,Ha=ra,Gb=Da,Ma=q,mb=G&1,Ra=A,Oa=G&1,db=e,za=G,wa=d,lb=l,Va=N.internal_flags;if(2>
za)t.fft_long(Va,Ma[mb],za,wa,lb),t.fft_short(Va,Ra[Oa],za,wa,lb);else if(2==za){for(var ia=c.BLKSIZE-1;0<=ia;--ia){var Hb=Ma[mb+0][ia],Ib=Ma[mb+1][ia];Ma[mb+0][ia]=(Hb+Ib)*aa.SQRT2*.5;Ma[mb+1][ia]=(Hb-Ib)*aa.SQRT2*.5}for(var Aa=2;0<=Aa;--Aa)for(ia=c.BLKSIZE_s-1;0<=ia;--ia)Hb=Ra[Oa+0][Aa][ia],Ib=Ra[Oa+1][Aa][ia],Ra[Oa+0][Aa][ia]=(Hb+Ib)*aa.SQRT2*.5,Ra[Oa+1][Aa][ia]=(Hb-Ib)*aa.SQRT2*.5}Ha[0]=Ma[mb+0][0];Ha[0]*=Ha[0];for(ia=c.BLKSIZE/2-1;0<=ia;--ia){var ec=Ma[mb+0][c.BLKSIZE/2-ia],tb=Ma[mb+0][c.BLKSIZE/
2+ia];Ha[c.BLKSIZE/2-ia]=.5*(ec*ec+tb*tb)}for(Aa=2;0<=Aa;--Aa)for(Gb[Aa][0]=Ra[Oa+0][Aa][0],Gb[Aa][0]*=Gb[Aa][0],ia=c.BLKSIZE_s/2-1;0<=ia;--ia)ec=Ra[Oa+0][Aa][c.BLKSIZE_s/2-ia],tb=Ra[Oa+0][Aa][c.BLKSIZE_s/2+ia],Gb[Aa][c.BLKSIZE_s/2-ia]=.5*(ec*ec+tb*tb);var ma=0;for(ia=11;ia<c.HBLKSIZE;ia++)ma+=Ha[ia];Va.tot_ener[za]=ma;if(N.analysis){for(ia=0;ia<c.HBLKSIZE;ia++)Va.pinfo.energy[db][za][ia]=Va.pinfo.energy_save[za][ia],Va.pinfo.energy_save[za][ia]=Ha[ia];Va.pinfo.pe[db][za]=Va.pe[za]}2==N.athaa_loudapprox&&
2>za&&(Va.loudness_sq[db][za]=Va.loudness_sq_save[za],Va.loudness_sq_save[za]=u(Ha,Va));b(v,ra,w,pa,Ca);z(v,pa,Ca,Ia);for(K=0;3>K;K++){var ea=void 0,Ab=void 0,Bb=Da,Sa=C,$a=I,ub=G,sb=K,Ja=a.internal_flags;for(ea=Ab=0;ea<Ja.npart_s;++ea){for(var Qb=0,Ya=0,eb=Ja.numlines_s[ea],zb=0;zb<eb;++zb,++Ab){var Cb=Bb[sb][Ab];Qb+=Cb;Ya<Cb&&(Ya=Cb)}Sa[ea]=Qb}for(Ab=ea=0;ea<Ja.npart_s;ea++){var Db=Ja.s3ind_s[ea][0],ab=Ja.s3_ss[Ab++]*Sa[Db];for(++Db;Db<=Ja.s3ind_s[ea][1];)ab+=Ja.s3_ss[Ab]*Sa[Db],++Ab,++Db;var vb=
2*Ja.nb_s1[ub][ea];$a[ea]=Math.min(ab,vb);Ja.blocktype_old[ub&1]==c.SHORT_TYPE&&(vb=16*Ja.nb_s2[ub][ea],$a[ea]=Math.min(vb,$a[ea]));Ja.nb_s2[ub][ea]=Ja.nb_s1[ub][ea];Ja.nb_s1[ub][ea]=ab}for(;ea<=c.CBANDS;++ea)Sa[ea]=0,$a[ea]=0;r(v,C,I,G,K);for(H=0;H<c.SBMAX_s;H++){var Ta=v.thm[G].s[H][K];Ta*=.8;if(2<=ta[K]||1==ta[K+1]){var wb=0!=K?K-1:2;Ga=B(v.thm[G].s[H][wb],Ta,.6*L);Ta=Math.min(Ta,Ga)}if(1==ta[K])wb=0!=K?K-1:2,Ga=B(v.thm[G].s[H][wb],Ta,.3*L),Ta=Math.min(Ta,Ga);else if(0!=K&&3==ta[K-1]||0==K&&3==
v.nsPsy.lastAttacks[G])wb=2!=K?K+1:0,Ga=B(v.thm[G].s[H][wb],Ta,.3*L),Ta=Math.min(Ta,Ga);var Zb=qa[3*K+3]+qa[3*K+4]+qa[3*K+5];6*qa[3*K+5]<Zb&&(Ta*=.5,6*qa[3*K+4]<Zb&&(Ta*=.5));v.thm[G].s[H][K]=Ta}}v.nsPsy.lastAttacks[G]=ta[2];for(E=M=0;E<v.npart_l;E++){for(var fb=v.s3ind[E][0],Jb=w[fb]*S[Ia[fb]],nb=v.s3_ll[M++]*Jb;++fb<=v.s3ind[E][1];)Jb=w[fb]*S[Ia[fb]],nb=h(nb,v.s3_ll[M++]*Jb,fb,fb-E,v,0);nb*=.158489319246111;I[E]=v.blocktype_old[G&1]==c.SHORT_TYPE?nb:B(Math.min(nb,Math.min(2*v.nb_1[G][E],16*v.nb_2[G][E])),
nb,L);v.nb_2[G][E]=v.nb_1[G][E];v.nb_1[G][E]=nb}for(;E<=c.CBANDS;++E)w[E]=0,I[E]=0;D(v,w,I,G)}if((a.mode==ka.STEREO||a.mode==ka.JOINT_STEREO)&&0<a.interChRatio){var xb=a.interChRatio,fa=a.internal_flags;if(1<fa.channels_out){for(var Ba=0;Ba<c.SBMAX_l;Ba++){var Rb=fa.thm[0].l[Ba],Eb=fa.thm[1].l[Ba];fa.thm[0].l[Ba]+=Eb*xb;fa.thm[1].l[Ba]+=Rb*xb}for(Ba=0;Ba<c.SBMAX_s;Ba++)for(var gb=0;3>gb;gb++)Rb=fa.thm[0].s[Ba][gb],Eb=fa.thm[1].s[Ba][gb],fa.thm[0].s[Ba][gb]+=Eb*xb,fa.thm[1].s[Ba][gb]+=Rb*xb}}if(a.mode==
ka.JOINT_STEREO){for(var Pa,ja=0;ja<c.SBMAX_l;ja++)if(!(v.thm[0].l[ja]>1.58*v.thm[1].l[ja]||v.thm[1].l[ja]>1.58*v.thm[0].l[ja])){var Ua=v.mld_l[ja]*v.en[3].l[ja],hb=Math.max(v.thm[2].l[ja],Math.min(v.thm[3].l[ja],Ua));Ua=v.mld_l[ja]*v.en[2].l[ja];var fc=Math.max(v.thm[3].l[ja],Math.min(v.thm[2].l[ja],Ua));v.thm[2].l[ja]=hb;v.thm[3].l[ja]=fc}for(ja=0;ja<c.SBMAX_s;ja++)for(var ua=0;3>ua;ua++)v.thm[0].s[ja][ua]>1.58*v.thm[1].s[ja][ua]||v.thm[1].s[ja][ua]>1.58*v.thm[0].s[ja][ua]||(Ua=v.mld_s[ja]*v.en[3].s[ja][ua],
hb=Math.max(v.thm[2].s[ja][ua],Math.min(v.thm[3].s[ja][ua],Ua)),Ua=v.mld_s[ja]*v.en[2].s[ja][ua],fc=Math.max(v.thm[3].s[ja][ua],Math.min(v.thm[2].s[ja][ua],Ua)),v.thm[2].s[ja][ua]=hb,v.thm[3].s[ja][ua]=fc);Pa=a.msfix;if(0<Math.abs(Pa)){var Kb=Pa,gc=Kb,$b=Math.pow(10,a.ATHlower*v.ATH.adjust);Kb*=2;gc*=2;for(var xa=0;xa<c.SBMAX_l;xa++){var ba=v.ATH.cb_l[v.bm_l[xa]]*$b;var Wa=Math.min(Math.max(v.thm[0].l[xa],ba),Math.max(v.thm[1].l[xa],ba));var bb=Math.max(v.thm[2].l[xa],ba);var ob=Math.max(v.thm[3].l[xa],
ba);if(Wa*Kb<bb+ob){var ib=Wa*gc/(bb+ob);bb*=ib;ob*=ib}v.thm[2].l[xa]=Math.min(bb,v.thm[2].l[xa]);v.thm[3].l[xa]=Math.min(ob,v.thm[3].l[xa])}$b*=c.BLKSIZE_s/c.BLKSIZE;for(xa=0;xa<c.SBMAX_s;xa++)for(var Ea=0;3>Ea;Ea++)ba=v.ATH.cb_s[v.bm_s[xa]]*$b,Wa=Math.min(Math.max(v.thm[0].s[xa][Ea],ba),Math.max(v.thm[1].s[xa][Ea],ba)),bb=Math.max(v.thm[2].s[xa][Ea],ba),ob=Math.max(v.thm[3].s[xa][Ea],ba),Wa*Kb<bb+ob&&(ib=Wa*Kb/(bb+ob),bb*=ib,ob*=ib),v.thm[2].s[xa][Ea]=Math.min(v.thm[2].s[xa][Ea],bb),v.thm[3].s[xa][Ea]=
Math.min(v.thm[3].s[xa][Ea],ob)}}var jb=a.internal_flags;a.short_blocks!=sa.short_block_coupled||0!=y[0]&&0!=y[1]||(y[0]=y[1]=0);for(var Ka=0;Ka<jb.channels_out;Ka++)O[Ka]=c.NORM_TYPE,a.short_blocks==sa.short_block_dispensed&&(y[Ka]=1),a.short_blocks==sa.short_block_forced&&(y[Ka]=0),0!=y[Ka]?jb.blocktype_old[Ka]==c.SHORT_TYPE&&(O[Ka]=c.STOP_TYPE):(O[Ka]=c.SHORT_TYPE,jb.blocktype_old[Ka]==c.NORM_TYPE&&(jb.blocktype_old[Ka]=c.START_TYPE),jb.blocktype_old[Ka]==c.STOP_TYPE&&(jb.blocktype_old[Ka]=c.SHORT_TYPE)),
n[Ka]=jb.blocktype_old[Ka],jb.blocktype_old[Ka]=O[Ka];for(G=0;G<la;G++){var Fa=0;if(1<G){var Lb=x;Fa=-2;var Sb=c.NORM_TYPE;if(n[0]==c.SHORT_TYPE||n[1]==c.SHORT_TYPE)Sb=c.SHORT_TYPE;var Fb=m[e][G-2]}else Lb=k,Fa=0,Sb=n[G],Fb=g[e][G];Lb[Fa+G]=Sb==c.SHORT_TYPE?U(Fb,v.masking_lower):f(Fb,v.masking_lower);a.analysis&&(v.pinfo.pe[e][G]=Lb[Fa+G])}return 0};var Ia=[-1.730326E-17,-.01703172,-1.349528E-17,.0418072,-6.73278E-17,-.0876324,-3.0835E-17,.1863476,-1.104424E-16,-.627638];this.L3psycho_anal_vbr=function(d,
l,e,h,g,m,k,v,x,p){for(var q=d.internal_flags,A,w,I=J(c.HBLKSIZE),G=ca([3,c.HBLKSIZE_s]),C=ca([2,c.BLKSIZE]),O=ca([2,3,c.BLKSIZE_s]),y=ca([4,c.CBANDS]),E=ca([4,c.CBANDS]),Q=ca([4,3]),K=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],T=V(2),H=d.mode==ka.JOINT_STEREO?4:q.channels_out,M=ca([2,576]),X=d.internal_flags,F=X.channels_out,la=d.mode==ka.JOINT_STEREO?4:F,P=0;P<F;P++){firbuf=l[P];for(var W=e+576-350-21+192,L=0;576>L;L++){var da;var Z=firbuf[W+L+10];for(var Y=da=0;9>Y;Y+=2)Z+=Ia[Y]*(firbuf[W+L+Y]+
firbuf[W+L+21-Y]),da+=Ia[Y+1]*(firbuf[W+L+Y+1]+firbuf[W+L+21-Y-1]);M[P][L]=Z+da}g[h][P].en.assign(X.en[P]);g[h][P].thm.assign(X.thm[P]);2<la&&(m[h][P].en.assign(X.en[P+2]),m[h][P].thm.assign(X.thm[P+2]))}for(P=0;P<la;P++){var Na=J(12),qa=J(12),oa=[0,0,0,0],ha=M[P&1],pa=0,Ca=3==P?X.nsPsy.attackthre_s:X.nsPsy.attackthre,ra=1;if(2==P)for(L=0,Y=576;0<Y;++L,--Y){var ta=M[0][L],ya=M[1][L];M[0][L]=ta+ya;M[1][L]=ta-ya}for(L=0;3>L;L++)qa[L]=X.nsPsy.last_en_subshort[P][L+6],Na[L]=qa[L]/X.nsPsy.last_en_subshort[P][L+
4],oa[0]+=qa[L];for(L=0;9>L;L++){for(var Da=pa+64,Za=1;pa<Da;pa++)Za<Math.abs(ha[pa])&&(Za=Math.abs(ha[pa]));X.nsPsy.last_en_subshort[P][L]=qa[L+3]=Za;oa[1+L/3]+=Za;Za=Za>qa[L+3-2]?Za/qa[L+3-2]:qa[L+3-2]>10*Za?qa[L+3-2]/(10*Za):0;Na[L+3]=Za}for(L=0;3>L;++L){var La=qa[3*L+3]+qa[3*L+4]+qa[3*L+5],va=1;6*qa[3*L+5]<La&&(va*=.5,6*qa[3*L+4]<La&&(va*=.5));Q[P][L]=va}if(d.analysis){var Vb=Na[0];for(L=1;12>L;L++)Vb<Na[L]&&(Vb=Na[L]);X.pinfo.ers[h][P]=X.pinfo.ers_save[P];X.pinfo.ers_save[P]=Vb}for(L=0;12>L;L++)0==
K[P][L/3]&&Na[L]>Ca&&(K[P][L/3]=L%3+1);for(L=1;4>L;L++){var Xa=oa[L-1],Ga=oa[L];4E4>Math.max(Xa,Ga)&&Xa<1.7*Ga&&Ga<1.7*Xa&&(1==L&&K[P][0]<=K[P][L]&&(K[P][0]=0),K[P][L]=0)}K[P][0]<=X.nsPsy.lastAttacks[P]&&(K[P][0]=0);if(3==X.nsPsy.lastAttacks[P]||0!=K[P][0]+K[P][1]+K[P][2]+K[P][3])ra=0,0!=K[P][1]&&0!=K[P][0]&&(K[P][1]=0),0!=K[P][2]&&0!=K[P][1]&&(K[P][2]=0),0!=K[P][3]&&0!=K[P][2]&&(K[P][3]=0);2>P?T[P]=ra:0==ra&&(T[0]=T[1]=0);x[P]=X.tot_ener[P]}var lb=d.internal_flags;d.short_blocks!=sa.short_block_coupled||
0!=T[0]&&0!=T[1]||(T[0]=T[1]=0);for(var Ya=0;Ya<lb.channels_out;Ya++)d.short_blocks==sa.short_block_dispensed&&(T[Ya]=1),d.short_blocks==sa.short_block_forced&&(T[Ya]=0);for(var N=0;N<H;N++){var Ha=N&1;A=C;var Gb=d,Ma=N,mb=h,Ra=I,Oa=A,db=Ha,za=Gb.internal_flags;if(2>Ma)t.fft_long(za,Oa[db],Ma,l,e);else if(2==Ma)for(var wa=c.BLKSIZE-1;0<=wa;--wa){var sb=Oa[db+0][wa],Va=Oa[db+1][wa];Oa[db+0][wa]=(sb+Va)*aa.SQRT2*.5;Oa[db+1][wa]=(sb-Va)*aa.SQRT2*.5}Ra[0]=Oa[db+0][0];Ra[0]*=Ra[0];for(wa=c.BLKSIZE/2-1;0<=
wa;--wa){var ia=Oa[db+0][c.BLKSIZE/2-wa],Hb=Oa[db+0][c.BLKSIZE/2+wa];Ra[c.BLKSIZE/2-wa]=.5*(ia*ia+Hb*Hb)}var Ib=0;for(wa=11;wa<c.HBLKSIZE;wa++)Ib+=Ra[wa];za.tot_ener[Ma]=Ib;if(Gb.analysis){for(wa=0;wa<c.HBLKSIZE;wa++)za.pinfo.energy[mb][Ma][wa]=za.pinfo.energy_save[Ma][wa],za.pinfo.energy_save[Ma][wa]=Ra[wa];za.pinfo.pe[mb][Ma]=za.pe[Ma]}var Aa=N,zb=I,tb=d.internal_flags;2==d.athaa_loudapprox&&2>Aa&&(tb.loudness_sq[h][Aa]=tb.loudness_sq_save[Aa],tb.loudness_sq_save[Aa]=u(zb,tb));if(0!=T[Ha]){var ma=
void 0,ea=q,Ab=I,Bb=y[N],Sa=E[N],$a=N,ub=J(c.CBANDS),lc=J(c.CBANDS),Ja=V(c.CBANDS+2);b(ea,Ab,Bb,ub,lc);z(ea,ub,lc,Ja);var Qb=0;for(ma=0;ma<ea.npart_l;ma++){var Wb,eb=ea.s3ind[ma][0],Xb=ea.s3ind[ma][1],Cb=0,Db=0;Cb=Ja[eb];Db+=1;var ab=ea.s3_ll[Qb]*Bb[eb]*S[Ja[eb]];++Qb;for(++eb;eb<=Xb;){Cb+=Ja[eb];Db+=1;var vb=ea.s3_ll[Qb]*Bb[eb]*S[Ja[eb]];ab=Wb=n(ab,vb,eb-ma);++Qb;++eb}Cb=(1+2*Cb)/(2*Db);var Ta=.5*S[Cb];ab*=Ta;if(ea.blocktype_old[$a&1]==c.SHORT_TYPE){var wb=2*ea.nb_1[$a][ma];Sa[ma]=0<wb?Math.min(ab,
wb):Math.min(ab,.3*Bb[ma])}else{var Zb=16*ea.nb_2[$a][ma],fb=2*ea.nb_1[$a][ma];0>=Zb&&(Zb=ab);0>=fb&&(fb=ab);wb=ea.blocktype_old[$a&1]==c.NORM_TYPE?Math.min(fb,Zb):fb;Sa[ma]=Math.min(ab,wb)}ea.nb_2[$a][ma]=ea.nb_1[$a][ma];ea.nb_1[$a][ma]=ab;vb=ub[ma];vb*=ea.minval_l[ma];vb*=Ta;Sa[ma]>vb&&(Sa[ma]=vb);1<ea.masking_lower&&(Sa[ma]*=ea.masking_lower);Sa[ma]>Bb[ma]&&(Sa[ma]=Bb[ma]);1>ea.masking_lower&&(Sa[ma]*=ea.masking_lower)}for(;ma<c.CBANDS;++ma)Bb[ma]=0,Sa[ma]=0}else for(var Jb=q,nb=N,xb=0;xb<Jb.npart_l;xb++)Jb.nb_2[nb][xb]=
Jb.nb_1[nb][xb],Jb.nb_1[nb][xb]=0}2==T[0]+T[1]&&d.mode==ka.JOINT_STEREO&&a(y,E,q.mld_cb_l,q.ATH.cb_l,d.ATHlower*q.ATH.adjust,d.msfix,q.npart_l);for(N=0;N<H;N++)Ha=N&1,0!=T[Ha]&&D(q,y[N],E[N],N);for(var fa=0;3>fa;fa++){for(N=0;N<H;++N)if(Ha=N&1,0!=T[Ha]){var Ba=q,Rb=N;if(0==fa)for(var Eb=0;Eb<Ba.npart_s;Eb++)Ba.nb_s2[Rb][Eb]=Ba.nb_s1[Rb][Eb],Ba.nb_s1[Rb][Eb]=0}else{w=O;var gb=N,Pa=fa,ja=G,Ua=w,hb=Ha,fc=d.internal_flags;0==Pa&&2>gb&&t.fft_short(fc,Ua[hb],gb,l,e);if(2==gb)for(var ua=c.BLKSIZE_s-1;0<=
ua;--ua){var Kb=Ua[hb+0][Pa][ua],gc=Ua[hb+1][Pa][ua];Ua[hb+0][Pa][ua]=(Kb+gc)*aa.SQRT2*.5;Ua[hb+1][Pa][ua]=(Kb-gc)*aa.SQRT2*.5}ja[Pa][0]=Ua[hb+0][Pa][0];ja[Pa][0]*=ja[Pa][0];for(ua=c.BLKSIZE_s/2-1;0<=ua;--ua){var $b=Ua[hb+0][Pa][c.BLKSIZE_s/2-ua],xa=Ua[hb+0][Pa][c.BLKSIZE_s/2+ua];ja[Pa][c.BLKSIZE_s/2-ua]=.5*($b*$b+xa*xa)}var ba=void 0,Wa=void 0,bb=void 0,ob=G,ib=y[N],Ea=E[N],jb=N,Ka=fa,Fa=d.internal_flags,Lb=new float[c.CBANDS],Sb=J(c.CBANDS),Fb=new int[c.CBANDS];for(ba=Wa=0;ba<Fa.npart_s;++ba){var Ob=
0,Pb=0,Yb=Fa.numlines_s[ba];for(bb=0;bb<Yb;++bb,++Wa){var nc=ob[Ka][Wa];Ob+=nc;Pb<nc&&(Pb=nc)}ib[ba]=Ob;Lb[ba]=Pb;Sb[ba]=Ob/Yb}for(;ba<c.CBANDS;++ba)Lb[ba]=0,Sb[ba]=0;var Mb=Fa,pb=Lb,Tb=Sb,ac=Fb,bc=S.length-1,na=0,Qa=Tb[na]+Tb[na+1];if(0<Qa){var cb=pb[na];cb<pb[na+1]&&(cb=pb[na+1]);Qa=20*(2*cb-Qa)/(Qa*(Mb.numlines_s[na]+Mb.numlines_s[na+1]-1));var qb=0|Qa;qb>bc&&(qb=bc);ac[na]=qb}else ac[na]=0;for(na=1;na<Mb.npart_s-1;na++)Qa=Tb[na-1]+Tb[na]+Tb[na+1],0<Qa?(cb=pb[na-1],cb<pb[na]&&(cb=pb[na]),cb<pb[na+
1]&&(cb=pb[na+1]),Qa=20*(3*cb-Qa)/(Qa*(Mb.numlines_s[na-1]+Mb.numlines_s[na]+Mb.numlines_s[na+1]-1)),qb=0|Qa,qb>bc&&(qb=bc),ac[na]=qb):ac[na]=0;Qa=Tb[na-1]+Tb[na];0<Qa?(cb=pb[na-1],cb<pb[na]&&(cb=pb[na]),Qa=20*(2*cb-Qa)/(Qa*(Mb.numlines_s[na-1]+Mb.numlines_s[na]-1)),qb=0|Qa,qb>bc&&(qb=bc),ac[na]=qb):ac[na]=0;for(Wa=ba=0;ba<Fa.npart_s;ba++){var yb=Fa.s3ind_s[ba][0],kc=Fa.s3ind_s[ba][1];var mc=Fb[yb];var tc=1;var hc=Fa.s3_ss[Wa]*ib[yb]*S[Fb[yb]];++Wa;for(++yb;yb<=kc;){mc+=Fb[yb];tc+=1;var cc=Fa.s3_ss[Wa]*
ib[yb]*S[Fb[yb]];hc=n(hc,cc,yb-ba);++Wa;++yb}mc=(1+2*mc)/(2*tc);var uc=.5*S[mc];hc*=uc;Ea[ba]=hc;Fa.nb_s2[jb][ba]=Fa.nb_s1[jb][ba];Fa.nb_s1[jb][ba]=hc;cc=Lb[ba];cc*=Fa.minval_s[ba];cc*=uc;Ea[ba]>cc&&(Ea[ba]=cc);1<Fa.masking_lower&&(Ea[ba]*=Fa.masking_lower);Ea[ba]>ib[ba]&&(Ea[ba]=ib[ba]);1>Fa.masking_lower&&(Ea[ba]*=Fa.masking_lower)}for(;ba<c.CBANDS;++ba)ib[ba]=0,Ea[ba]=0}0==T[0]+T[1]&&d.mode==ka.JOINT_STEREO&&a(y,E,q.mld_cb_s,q.ATH.cb_s,d.ATHlower*q.ATH.adjust,d.msfix,q.npart_s);for(N=0;N<H;++N)Ha=
N&1,0==T[Ha]&&r(q,y[N],E[N],N,fa)}for(N=0;N<H;N++)if(Ha=N&1,0==T[Ha])for(var Ub=0;Ub<c.SBMAX_s;Ub++){var vc=J(3);for(fa=0;3>fa;fa++){var kb=q.thm[N].s[Ub][fa];kb*=.8;if(2<=K[N][fa]||1==K[N][fa+1]){var ic=0!=fa?fa-1:2,jc=B(q.thm[N].s[Ub][ic],kb,.36);kb=Math.min(kb,jc)}else if(1==K[N][fa])ic=0!=fa?fa-1:2,jc=B(q.thm[N].s[Ub][ic],kb,.18),kb=Math.min(kb,jc);else if(0!=fa&&3==K[N][fa-1]||0==fa&&3==q.nsPsy.lastAttacks[N])ic=2!=fa?fa+1:0,jc=B(q.thm[N].s[Ub][ic],kb,.18),kb=Math.min(kb,jc);kb*=Q[N][fa];vc[fa]=
kb}for(fa=0;3>fa;fa++)q.thm[N].s[Ub][fa]=vc[fa]}for(N=0;N<H;N++)q.nsPsy.lastAttacks[N]=K[N][2];for(var Nb=d.internal_flags,rb=0;rb<Nb.channels_out;rb++){var oc=c.NORM_TYPE;0!=T[rb]?Nb.blocktype_old[rb]==c.SHORT_TYPE&&(oc=c.STOP_TYPE):(oc=c.SHORT_TYPE,Nb.blocktype_old[rb]==c.NORM_TYPE&&(Nb.blocktype_old[rb]=c.START_TYPE),Nb.blocktype_old[rb]==c.STOP_TYPE&&(Nb.blocktype_old[rb]=c.SHORT_TYPE));p[rb]=Nb.blocktype_old[rb];Nb.blocktype_old[rb]=oc}for(N=0;N<H;N++){if(1<N){var pc=v;var qc=-2;var rc=c.NORM_TYPE;
if(p[0]==c.SHORT_TYPE||p[1]==c.SHORT_TYPE)rc=c.SHORT_TYPE;var sc=m[h][N-2]}else pc=k,qc=0,rc=p[N],sc=g[h][N];pc[qc+N]=rc==c.SHORT_TYPE?U(sc,q.masking_lower):f(sc,q.masking_lower);d.analysis&&(q.pinfo.pe[h][N]=pc[qc+N])}return 0};this.psymodel_init=function(a){var b=a.internal_flags,f,l=!0,h=13,g=0,k=0,v=-8.25,x=-4.5,n=J(c.CBANDS),u=J(c.CBANDS),A=J(c.CBANDS),r=a.out_samplerate;switch(a.experimentalZ){default:case 0:l=!0;break;case 1:l=a.VBR==F.vbr_mtrh||a.VBR==F.vbr_mt?!1:!0;break;case 2:l=!1;break;
case 3:h=8,g=-1.75,k=-.0125,v=-8.25,x=-2.25}b.ms_ener_ratio_old=.25;b.blocktype_old[0]=b.blocktype_old[1]=c.NORM_TYPE;for(f=0;4>f;++f){for(var y=0;y<c.CBANDS;++y)b.nb_1[f][y]=1E20,b.nb_2[f][y]=1E20,b.nb_s1[f][y]=b.nb_s2[f][y]=1;for(var C=0;C<c.SBMAX_l;C++)b.en[f].l[C]=1E20,b.thm[f].l[C]=1E20;for(y=0;3>y;++y){for(C=0;C<c.SBMAX_s;C++)b.en[f].s[C][y]=1E20,b.thm[f].s[C][y]=1E20;b.nsPsy.lastAttacks[f]=0}for(y=0;9>y;y++)b.nsPsy.last_en_subshort[f][y]=10}b.loudness_sq_save[0]=b.loudness_sq_save[1]=0;b.npart_l=
e(b.numlines_l,b.bo_l,b.bm_l,n,u,b.mld_l,b.PSY.bo_l_weight,r,c.BLKSIZE,b.scalefac_band.l,c.BLKSIZE/1152,c.SBMAX_l);for(f=0;f<b.npart_l;f++)C=g,n[f]>=h&&(C=k*(n[f]-h)/(24-h)+g*(24-n[f])/(24-h)),A[f]=Math.pow(10,C/10),b.rnumlines_l[f]=0<b.numlines_l[f]?1/b.numlines_l[f]:0;b.s3_ll=m(b.s3ind,b.npart_l,n,u,A,l);for(f=y=0;f<b.npart_l;f++){k=lb.MAX_VALUE;for(C=0;C<b.numlines_l[f];C++,y++)g=r*y/(1E3*c.BLKSIZE),g=this.ATHformula(1E3*g,a)-20,g=Math.pow(10,.1*g),g*=b.numlines_l[f],k>g&&(k=g);b.ATH.cb_l[f]=k;
k=-20+20*n[f]/10;6<k&&(k=100);-15>k&&(k=-15);k-=8;b.minval_l[f]=Math.pow(10,k/10)*b.numlines_l[f]}b.npart_s=e(b.numlines_s,b.bo_s,b.bm_s,n,u,b.mld_s,b.PSY.bo_s_weight,r,c.BLKSIZE_s,b.scalefac_band.s,c.BLKSIZE_s/384,c.SBMAX_s);for(f=y=0;f<b.npart_s;f++){C=v;n[f]>=h&&(C=x*(n[f]-h)/(24-h)+v*(24-n[f])/(24-h));A[f]=Math.pow(10,C/10);k=lb.MAX_VALUE;for(C=0;C<b.numlines_s[f];C++,y++)g=r*y/(1E3*c.BLKSIZE_s),g=this.ATHformula(1E3*g,a)-20,g=Math.pow(10,.1*g),g*=b.numlines_s[f],k>g&&(k=g);b.ATH.cb_s[f]=k;k=
-7+7*n[f]/12;12<n[f]&&(k*=1+3.1*Math.log(1+k));12>n[f]&&(k*=1+2.3*Math.log(1-k));-15>k&&(k=-15);k-=8;b.minval_s[f]=Math.pow(10,k/10)*b.numlines_s[f]}b.s3_ss=m(b.s3ind_s,b.npart_s,n,u,A,l);p=Math.pow(10,.5625);q=Math.pow(10,1.5);w=Math.pow(10,1.5);t.init_fft(b);b.decay=Math.exp(-2.302585092994046/(.01*r/192));f=3.5;0!=(a.exp_nspsytune&2)&&(f=1);0<Math.abs(a.msfix)&&(f=a.msfix);a.msfix=f;for(l=0;l<b.npart_l;l++)b.s3ind[l][1]>b.npart_l-1&&(b.s3ind[l][1]=b.npart_l-1);b.ATH.decay=Math.pow(10,576*b.mode_gr/
r*-1.2);b.ATH.adjust=.01;b.ATH.adjustLimit=1;if(-1!=a.ATHtype){y=a.out_samplerate/c.BLKSIZE;for(f=g=l=0;f<c.BLKSIZE/2;++f)g+=y,b.ATH.eql_w[f]=1/Math.pow(10,this.ATHformula(g,a)/10),l+=b.ATH.eql_w[f];l=1/l;for(f=c.BLKSIZE/2;0<=--f;)b.ATH.eql_w[f]*=l}for(l=y=0;l<b.npart_s;++l)for(f=0;f<b.numlines_s[l];++f)++y;for(l=y=0;l<b.npart_l;++l)for(f=0;f<b.numlines_l[l];++f)++y;for(f=y=0;f<b.npart_l;f++)g=r*(y+b.numlines_l[f]/2)/(1*c.BLKSIZE),b.mld_cb_l[f]=d(g),y+=b.numlines_l[f];for(;f<c.CBANDS;++f)b.mld_cb_l[f]=
1;for(f=y=0;f<b.npart_s;f++)g=r*(y+b.numlines_s[f]/2)/(1*c.BLKSIZE_s),b.mld_cb_s[f]=d(g),y+=b.numlines_s[f];for(;f<c.CBANDS;++f)b.mld_cb_s[f]=1;return 0};this.ATHformula=function(a,b){switch(b.ATHtype){case 0:a=g(a,9);break;case 1:a=g(a,-1);break;case 2:a=g(a,0);break;case 3:a=g(a,1)+6;break;case 4:a=g(a,b.ATHcurve);break;default:a=g(a,0)}return a}}function U(){function u(){this.mask_adjust_short=this.mask_adjust=0;this.bo_l_weight=J(c.SBMAX_l);this.bo_s_weight=J(c.SBMAX_s)}function h(){this.lowerlimit=
0}function n(a,b){this.lowpass=b}function E(a){return 1<a?0:0>=a?1:Math.cos(Math.PI/2*a)}function D(a,b){switch(a){case 44100:return b.version=1,0;case 48E3:return b.version=1;case 32E3:return b.version=1,2;case 22050:return b.version=0;case 24E3:return b.version=0,1;case 16E3:return b.version=0,2;case 11025:return b.version=0;case 12E3:return b.version=0,1;case 8E3:return b.version=0,2;default:return b.version=0,-1}}function B(a,b,d){16E3>d&&(b=2);d=r.bitrate_table[b][1];for(var c=2;14>=c;c++)0<
r.bitrate_table[b][c]&&Math.abs(r.bitrate_table[b][c]-a)<Math.abs(d-a)&&(d=r.bitrate_table[b][c]);return d}function da(a,b,d){16E3>d&&(b=2);for(d=0;14>=d;d++)if(0<r.bitrate_table[b][d]&&r.bitrate_table[b][d]==a)return d;return-1}function f(a,b){var d=[new n(8,2E3),new n(16,3700),new n(24,3900),new n(32,5500),new n(40,7E3),new n(48,7500),new n(56,1E4),new n(64,11E3),new n(80,13500),new n(96,15100),new n(112,15600),new n(128,17E3),new n(160,17500),new n(192,18600),new n(224,19400),new n(256,19700),
new n(320,20500)];b=e.nearestBitrateFullIndex(b);a.lowerlimit=d[b].lowpass}function b(a){var b=c.BLKSIZE+a.framesize-c.FFTOFFSET;return b=Math.max(b,512+a.framesize-32)}function z(f,h,g,n,p,q,u){var l=f.internal_flags,v=0,x=[null,null],t=[null,null];if(4294479419!=l.Class_ID)return-3;if(0==n)return 0;var r=d.copy_buffer(l,p,q,u,0);if(0>r)return r;q+=r;v+=r;t[0]=h;t[1]=g;if(oa.NEQ(f.scale,0)&&oa.NEQ(f.scale,1))for(r=0;r<n;++r)t[0][r]*=f.scale,2==l.channels_out&&(t[1][r]*=f.scale);if(oa.NEQ(f.scale_left,
0)&&oa.NEQ(f.scale_left,1))for(r=0;r<n;++r)t[0][r]*=f.scale_left;if(oa.NEQ(f.scale_right,0)&&oa.NEQ(f.scale_right,1))for(r=0;r<n;++r)t[1][r]*=f.scale_right;if(2==f.num_channels&&1==l.channels_out)for(r=0;r<n;++r)t[0][r]=.5*(t[0][r]+t[1][r]),t[1][r]=0;h=b(f);x[0]=l.mfbuf[0];x[1]=l.mfbuf[1];for(g=0;0<n;){var A=[null,null];A[0]=t[0];A[1]=t[1];r=new a;var w=f;var y=x;var z=g,B=n,D=r,E=w.internal_flags;if(.9999>E.resample_ratio||1.0001<E.resample_ratio)for(var T=0;T<E.channels_out;T++){var Q=new k,M=D,
F,S=y[T],U=E.mf_size,V=w.framesize,da=A[T],aa=z,R=B,Z=Q,ka=T,ca=w.internal_flags,ha=0,sa=w.out_samplerate/H(w.out_samplerate,w.in_samplerate);sa>Y.BPC&&(sa=Y.BPC);var ra=1E-4>Math.abs(ca.resample_ratio-Math.floor(.5+ca.resample_ratio))?1:0;var P=1/ca.resample_ratio;1<P&&(P=1);var pa=31;0==pa%2&&--pa;pa+=ra;ra=pa+1;if(0==ca.fill_buffer_resample_init){ca.inbuf_old[0]=J(ra);ca.inbuf_old[1]=J(ra);for(F=0;F<=2*sa;++F)ca.blackfilt[F]=J(ra);ca.itime[0]=0;for(ha=ca.itime[1]=0;ha<=2*sa;ha++){var L=0,ya=(ha-
sa)/(2*sa);for(F=0;F<=pa;F++){var Ca=ca.blackfilt[ha],Da=F,va=F-ya,qa=Math.PI*P;va/=pa;0>va&&(va=0);1<va&&(va=1);var La=va-.5;va=.42-.5*Math.cos(2*va*Math.PI)+.08*Math.cos(4*va*Math.PI);L+=Ca[Da]=1E-9>Math.abs(La)?qa/Math.PI:va*Math.sin(pa*qa*La)/(Math.PI*pa*La)}for(F=0;F<=pa;F++)ca.blackfilt[ha][F]/=L}ca.fill_buffer_resample_init=1}L=ca.inbuf_old[ka];for(P=0;P<V;P++){F=P*ca.resample_ratio;ha=0|Math.floor(F-ca.itime[ka]);if(pa+ha-pa/2>=R)break;ya=F-ca.itime[ka]-(ha+pa%2*.5);ya=0|Math.floor(2*ya*sa+
sa+.5);for(F=Ca=0;F<=pa;++F)Da=Math.floor(F+ha-pa/2),Ca+=(0>Da?L[ra+Da]:da[aa+Da])*ca.blackfilt[ya][F];S[U+P]=Ca}Z.num_used=Math.min(R,pa+ha-pa/2);ca.itime[ka]+=Z.num_used-P*ca.resample_ratio;if(Z.num_used>=ra)for(F=0;F<ra;F++)L[F]=da[aa+Z.num_used+F-ra];else{S=ra-Z.num_used;for(F=0;F<S;++F)L[F]=L[F+Z.num_used];for(ha=0;F<ra;++F,++ha)L[F]=da[aa+ha]}M.n_out=P;D.n_in=Q.num_used}else for(D.n_out=Math.min(w.framesize,B),D.n_in=D.n_out,w=0;w<D.n_out;++w)y[0][E.mf_size+w]=A[0][z+w],2==E.channels_out&&(y[1][E.mf_size+
w]=A[1][z+w]);y=r.n_in;r=r.n_out;if(l.findReplayGain&&!l.decode_on_the_fly&&m.AnalyzeSamples(l.rgdata,x[0],l.mf_size,x[1],l.mf_size,r,l.channels_out)==W.GAIN_ANALYSIS_ERROR)return-6;n-=y;g+=y;l.mf_size+=r;1>l.mf_samples_to_encode&&(l.mf_samples_to_encode=c.ENCDELAY+c.POSTDELAY);l.mf_samples_to_encode+=r;if(l.mf_size>=h){y=u-v;0==u&&(y=0);r=f;y=e.enc.lame_encode_mp3_frame(r,x[0],x[1],p,q,y);r.frameNum++;r=y;if(0>r)return r;q+=r;v+=r;l.mf_size-=f.framesize;l.mf_samples_to_encode-=f.framesize;for(y=
0;y<l.channels_out;y++)for(r=0;r<l.mf_size;r++)x[y][r]=x[y][r+f.framesize]}}return v}function a(){this.n_out=this.n_in=0}function k(){this.num_used=0}function H(a,b){return 0!=b?H(b,a%b):a}var e=this;U.V9=410;U.V8=420;U.V7=430;U.V6=440;U.V5=450;U.V4=460;U.V3=470;U.V2=480;U.V1=490;U.V0=500;U.R3MIX=1E3;U.STANDARD=1001;U.EXTREME=1002;U.INSANE=1003;U.STANDARD_FAST=1004;U.EXTREME_FAST=1005;U.MEDIUM=1006;U.MEDIUM_FAST=1007;U.LAME_MAXMP3BUFFER=147456;var m,d,g,t,y,p=new Yb,q,w,V;this.enc=new c;this.setModules=
function(a,b,c,f,e,h,k,n,u){m=a;d=b;g=c;t=f;y=e;q=h;w=n;V=u;this.enc.setModules(d,p,t,q)};this.lame_init=function(){var a=new Ac;a.class_id=4294479419;var b=a.internal_flags=new Y;a.mode=ka.NOT_SET;a.original=1;a.in_samplerate=44100;a.num_channels=2;a.num_samples=-1;a.bWriteVbrTag=!0;a.quality=-1;a.short_blocks=null;b.subblock_gain=-1;a.lowpassfreq=0;a.highpassfreq=0;a.lowpasswidth=-1;a.highpasswidth=-1;a.VBR=F.vbr_off;a.VBR_q=4;a.ATHcurve=-1;a.VBR_mean_bitrate_kbps=128;a.VBR_min_bitrate_kbps=0;a.VBR_max_bitrate_kbps=
0;a.VBR_hard_min=0;b.VBR_min_bitrate=1;b.VBR_max_bitrate=13;a.quant_comp=-1;a.quant_comp_short=-1;a.msfix=-1;b.resample_ratio=1;b.OldValue[0]=180;b.OldValue[1]=180;b.CurrentStep[0]=4;b.CurrentStep[1]=4;b.masking_lower=1;b.nsPsy.attackthre=-1;b.nsPsy.attackthre_s=-1;a.scale=-1;a.athaa_type=-1;a.ATHtype=-1;a.athaa_loudapprox=-1;a.athaa_sensitivity=0;a.useTemporal=null;a.interChRatio=-1;b.mf_samples_to_encode=c.ENCDELAY+c.POSTDELAY;a.encoder_padding=0;b.mf_size=c.ENCDELAY-c.MDCTDELAY;a.findReplayGain=
!1;a.decode_on_the_fly=!1;b.decode_on_the_fly=!1;b.findReplayGain=!1;b.findPeakSample=!1;b.RadioGain=0;b.AudiophileGain=0;b.noclipGainChange=0;b.noclipScale=-1;a.preset=0;a.write_id3tag_automatic=!0;a.lame_allocated_gfp=1;return a};this.nearestBitrateFullIndex=function(a){var b=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320];var d=b[16];var c=16;var f=b[16];var e=16;for(var l=0;16>l;l++)if(Math.max(a,b[l+1])!=a){d=b[l+1];c=l+1;f=b[l];e=l;break}return d-a>a-f?e:c};this.lame_init_params=
function(a){var b=a.internal_flags;b.Class_ID=0;null==b.ATH&&(b.ATH=new Bc);null==b.PSY&&(b.PSY=new u);null==b.rgdata&&(b.rgdata=new Cc);b.channels_in=a.num_channels;1==b.channels_in&&(a.mode=ka.MONO);b.channels_out=a.mode==ka.MONO?1:2;b.mode_ext=c.MPG_MD_MS_LR;a.mode==ka.MONO&&(a.force_ms=!1);a.VBR==F.vbr_off&&128!=a.VBR_mean_bitrate_kbps&&0==a.brate&&(a.brate=a.VBR_mean_bitrate_kbps);a.VBR!=F.vbr_off&&a.VBR!=F.vbr_mtrh&&a.VBR!=F.vbr_mt&&(a.free_format=!1);a.VBR==F.vbr_off&&0==a.brate&&oa.EQ(a.compression_ratio,
0)&&(a.compression_ratio=11.025);a.VBR==F.vbr_off&&0<a.compression_ratio&&(0==a.out_samplerate&&(a.out_samplerate=map2MP3Frequency(int(.97*a.in_samplerate))),a.brate=0|16*a.out_samplerate*b.channels_out/(1E3*a.compression_ratio),b.samplerate_index=D(a.out_samplerate,a),a.free_format||(a.brate=B(a.brate,a.version,a.out_samplerate)));0!=a.out_samplerate&&(16E3>a.out_samplerate?(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,8),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,64)):
32E3>a.out_samplerate?(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,8),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,160)):(a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,32),a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,320)));if(0==a.lowpassfreq){switch(a.VBR){case F.vbr_off:var e=new h;f(e,a.brate);e=e.lowerlimit;break;case F.vbr_abr:e=new h;f(e,a.VBR_mean_bitrate_kbps);e=e.lowerlimit;break;case F.vbr_rh:var l=[19500,19E3,18600,18E3,17500,16E3,15600,
14900,12500,1E4,3950];if(0<=a.VBR_q&&9>=a.VBR_q){e=l[a.VBR_q];l=l[a.VBR_q+1];var k=a.VBR_q_frac;e=linear_int(e,l,k)}else e=19500;break;default:l=[19500,19E3,18500,18E3,17500,16500,15500,14500,12500,9500,3950],0<=a.VBR_q&&9>=a.VBR_q?(e=l[a.VBR_q],l=l[a.VBR_q+1],k=a.VBR_q_frac,e=linear_int(e,l,k)):e=19500}a.mode!=ka.MONO||a.VBR!=F.vbr_off&&a.VBR!=F.vbr_abr||(e*=1.5);a.lowpassfreq=e|0}0==a.out_samplerate&&(2*a.lowpassfreq>a.in_samplerate&&(a.lowpassfreq=a.in_samplerate/2),e=a.lowpassfreq|0,l=a.in_samplerate,
k=44100,48E3<=l?k=48E3:44100<=l?k=44100:32E3<=l?k=32E3:24E3<=l?k=24E3:22050<=l?k=22050:16E3<=l?k=16E3:12E3<=l?k=12E3:11025<=l?k=11025:8E3<=l&&(k=8E3),-1==e?e=k:(15960>=e&&(k=44100),15250>=e&&(k=32E3),11220>=e&&(k=24E3),9970>=e&&(k=22050),7230>=e&&(k=16E3),5420>=e&&(k=12E3),4510>=e&&(k=11025),3970>=e&&(k=8E3),e=l<k?44100<l?48E3:32E3<l?44100:24E3<l?32E3:22050<l?24E3:16E3<l?22050:12E3<l?16E3:11025<l?12E3:8E3<l?11025:8E3:k),a.out_samplerate=e);a.lowpassfreq=Math.min(20500,a.lowpassfreq);a.lowpassfreq=
Math.min(a.out_samplerate/2,a.lowpassfreq);a.VBR==F.vbr_off&&(a.compression_ratio=16*a.out_samplerate*b.channels_out/(1E3*a.brate));a.VBR==F.vbr_abr&&(a.compression_ratio=16*a.out_samplerate*b.channels_out/(1E3*a.VBR_mean_bitrate_kbps));a.bWriteVbrTag||(a.findReplayGain=!1,a.decode_on_the_fly=!1,b.findPeakSample=!1);b.findReplayGain=a.findReplayGain;b.decode_on_the_fly=a.decode_on_the_fly;b.decode_on_the_fly&&(b.findPeakSample=!0);if(b.findReplayGain&&m.InitGainAnalysis(b.rgdata,a.out_samplerate)==
W.INIT_GAIN_ANALYSIS_ERROR)return a.internal_flags=null,-6;b.decode_on_the_fly&&!a.decode_only&&(null!=b.hip&&V.hip_decode_exit(b.hip),b.hip=V.hip_decode_init());b.mode_gr=24E3>=a.out_samplerate?1:2;a.framesize=576*b.mode_gr;a.encoder_delay=c.ENCDELAY;b.resample_ratio=a.in_samplerate/a.out_samplerate;switch(a.VBR){case F.vbr_mt:case F.vbr_rh:case F.vbr_mtrh:a.compression_ratio=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5][a.VBR_q];break;case F.vbr_abr:a.compression_ratio=16*a.out_samplerate*b.channels_out/
(1E3*a.VBR_mean_bitrate_kbps);break;default:a.compression_ratio=16*a.out_samplerate*b.channels_out/(1E3*a.brate)}a.mode==ka.NOT_SET&&(a.mode=ka.JOINT_STEREO);0<a.highpassfreq?(b.highpass1=2*a.highpassfreq,b.highpass2=0<=a.highpasswidth?2*(a.highpassfreq+a.highpasswidth):2*a.highpassfreq,b.highpass1/=a.out_samplerate,b.highpass2/=a.out_samplerate):(b.highpass1=0,b.highpass2=0);0<a.lowpassfreq?(b.lowpass2=2*a.lowpassfreq,0<=a.lowpasswidth?(b.lowpass1=2*(a.lowpassfreq-a.lowpasswidth),0>b.lowpass1&&(b.lowpass1=
0)):b.lowpass1=2*a.lowpassfreq,b.lowpass1/=a.out_samplerate,b.lowpass2/=a.out_samplerate):(b.lowpass1=0,b.lowpass2=0);e=a.internal_flags;var n=32,z=-1;if(0<e.lowpass1){var H=999;for(l=0;31>=l;l++)k=l/31,k>=e.lowpass2&&(n=Math.min(n,l)),e.lowpass1<k&&k<e.lowpass2&&(H=Math.min(H,l));e.lowpass1=999==H?(n-.75)/31:(H-.75)/31;e.lowpass2=n/31}0<e.highpass2&&e.highpass2<.75/31*.9&&(e.highpass1=0,e.highpass2=0,S.err.println("Warning: highpass filter disabled.  highpass frequency too small\n"));if(0<e.highpass2){n=
-1;for(l=0;31>=l;l++)k=l/31,k<=e.highpass1&&(z=Math.max(z,l)),e.highpass1<k&&k<e.highpass2&&(n=Math.max(n,l));e.highpass1=z/31;e.highpass2=-1==n?(z+.75)/31:(n+.75)/31}for(l=0;32>l;l++)k=l/31,z=e.highpass2>e.highpass1?E((e.highpass2-k)/(e.highpass2-e.highpass1+1E-20)):1,k=e.lowpass2>e.lowpass1?E((k-e.lowpass1)/(e.lowpass2-e.lowpass1+1E-20)):1,e.amp_filter[l]=z*k;b.samplerate_index=D(a.out_samplerate,a);if(0>b.samplerate_index)return a.internal_flags=null,-1;if(a.VBR==F.vbr_off)if(a.free_format)b.bitrate_index=
0;else{if(a.brate=B(a.brate,a.version,a.out_samplerate),b.bitrate_index=da(a.brate,a.version,a.out_samplerate),0>=b.bitrate_index)return a.internal_flags=null,-1}else b.bitrate_index=1;a.analysis&&(a.bWriteVbrTag=!1);null!=b.pinfo&&(a.bWriteVbrTag=!1);d.init_bit_stream_w(b);e=b.samplerate_index+3*a.version+6*(16E3>a.out_samplerate?1:0);for(l=0;l<c.SBMAX_l+1;l++)b.scalefac_band.l[l]=t.sfBandIndex[e].l[l];for(l=0;l<c.PSFB21+1;l++)k=(b.scalefac_band.l[22]-b.scalefac_band.l[21])/c.PSFB21,k=b.scalefac_band.l[21]+
l*k,b.scalefac_band.psfb21[l]=k;b.scalefac_band.psfb21[c.PSFB21]=576;for(l=0;l<c.SBMAX_s+1;l++)b.scalefac_band.s[l]=t.sfBandIndex[e].s[l];for(l=0;l<c.PSFB12+1;l++)k=(b.scalefac_band.s[13]-b.scalefac_band.s[12])/c.PSFB12,k=b.scalefac_band.s[12]+l*k,b.scalefac_band.psfb12[l]=k;b.scalefac_band.psfb12[c.PSFB12]=192;b.sideinfo_len=1==a.version?1==b.channels_out?21:36:1==b.channels_out?13:21;a.error_protection&&(b.sideinfo_len+=2);e=a.internal_flags;a.frameNum=0;a.write_id3tag_automatic&&w.id3tag_write_v2(a);
e.bitrate_stereoMode_Hist=Xa([16,5]);e.bitrate_blockType_Hist=Xa([16,6]);e.PeakSample=0;a.bWriteVbrTag&&q.InitVbrTag(a);b.Class_ID=4294479419;for(e=0;19>e;e++)b.nsPsy.pefirbuf[e]=700*b.mode_gr*b.channels_out;-1==a.ATHtype&&(a.ATHtype=4);switch(a.VBR){case F.vbr_mt:a.VBR=F.vbr_mtrh;case F.vbr_mtrh:null==a.useTemporal&&(a.useTemporal=!1);g.apply_preset(a,500-10*a.VBR_q,0);0>a.quality&&(a.quality=LAME_DEFAULT_QUALITY);5>a.quality&&(a.quality=0);5<a.quality&&(a.quality=5);b.PSY.mask_adjust=a.maskingadjust;
b.PSY.mask_adjust_short=a.maskingadjust_short;b.sfb21_extra=a.experimentalY?!1:44E3<a.out_samplerate;b.iteration_loop=new VBRNewIterationLoop(y);break;case F.vbr_rh:g.apply_preset(a,500-10*a.VBR_q,0);b.PSY.mask_adjust=a.maskingadjust;b.PSY.mask_adjust_short=a.maskingadjust_short;b.sfb21_extra=a.experimentalY?!1:44E3<a.out_samplerate;6<a.quality&&(a.quality=6);0>a.quality&&(a.quality=LAME_DEFAULT_QUALITY);b.iteration_loop=new VBROldIterationLoop(y);break;default:b.sfb21_extra=!1,0>a.quality&&(a.quality=
LAME_DEFAULT_QUALITY),e=a.VBR,e==F.vbr_off&&(a.VBR_mean_bitrate_kbps=a.brate),g.apply_preset(a,a.VBR_mean_bitrate_kbps,0),a.VBR=e,b.PSY.mask_adjust=a.maskingadjust,b.PSY.mask_adjust_short=a.maskingadjust_short,b.iteration_loop=e==F.vbr_off?new Dc(y):new ABRIterationLoop(y)}if(a.VBR!=F.vbr_off){b.VBR_min_bitrate=1;b.VBR_max_bitrate=14;16E3>a.out_samplerate&&(b.VBR_max_bitrate=8);if(0!=a.VBR_min_bitrate_kbps&&(a.VBR_min_bitrate_kbps=B(a.VBR_min_bitrate_kbps,a.version,a.out_samplerate),b.VBR_min_bitrate=
da(a.VBR_min_bitrate_kbps,a.version,a.out_samplerate),0>b.VBR_min_bitrate)||0!=a.VBR_max_bitrate_kbps&&(a.VBR_max_bitrate_kbps=B(a.VBR_max_bitrate_kbps,a.version,a.out_samplerate),b.VBR_max_bitrate=da(a.VBR_max_bitrate_kbps,a.version,a.out_samplerate),0>b.VBR_max_bitrate))return-1;a.VBR_min_bitrate_kbps=r.bitrate_table[a.version][b.VBR_min_bitrate];a.VBR_max_bitrate_kbps=r.bitrate_table[a.version][b.VBR_max_bitrate];a.VBR_mean_bitrate_kbps=Math.min(r.bitrate_table[a.version][b.VBR_max_bitrate],a.VBR_mean_bitrate_kbps);
a.VBR_mean_bitrate_kbps=Math.max(r.bitrate_table[a.version][b.VBR_min_bitrate],a.VBR_mean_bitrate_kbps)}a.tune&&(b.PSY.mask_adjust+=a.tune_value_a,b.PSY.mask_adjust_short+=a.tune_value_a);e=a.internal_flags;switch(a.quality){default:case 9:e.psymodel=0;e.noise_shaping=0;e.noise_shaping_amp=0;e.noise_shaping_stop=0;e.use_best_huffman=0;e.full_outer_loop=0;break;case 8:a.quality=7;case 7:e.psymodel=1;e.noise_shaping=0;e.noise_shaping_amp=0;e.noise_shaping_stop=0;e.use_best_huffman=0;e.full_outer_loop=
0;break;case 6:e.psymodel=1;0==e.noise_shaping&&(e.noise_shaping=1);e.noise_shaping_amp=0;e.noise_shaping_stop=0;-1==e.subblock_gain&&(e.subblock_gain=1);e.use_best_huffman=0;e.full_outer_loop=0;break;case 5:e.psymodel=1;0==e.noise_shaping&&(e.noise_shaping=1);e.noise_shaping_amp=0;e.noise_shaping_stop=0;-1==e.subblock_gain&&(e.subblock_gain=1);e.use_best_huffman=0;e.full_outer_loop=0;break;case 4:e.psymodel=1;0==e.noise_shaping&&(e.noise_shaping=1);e.noise_shaping_amp=0;e.noise_shaping_stop=0;-1==
e.subblock_gain&&(e.subblock_gain=1);e.use_best_huffman=1;e.full_outer_loop=0;break;case 3:e.psymodel=1;0==e.noise_shaping&&(e.noise_shaping=1);e.noise_shaping_amp=1;e.noise_shaping_stop=1;-1==e.subblock_gain&&(e.subblock_gain=1);e.use_best_huffman=1;e.full_outer_loop=0;break;case 2:e.psymodel=1;0==e.noise_shaping&&(e.noise_shaping=1);0==e.substep_shaping&&(e.substep_shaping=2);e.noise_shaping_amp=1;e.noise_shaping_stop=1;-1==e.subblock_gain&&(e.subblock_gain=1);e.use_best_huffman=1;e.full_outer_loop=
0;break;case 1:e.psymodel=1;0==e.noise_shaping&&(e.noise_shaping=1);0==e.substep_shaping&&(e.substep_shaping=2);e.noise_shaping_amp=2;e.noise_shaping_stop=1;-1==e.subblock_gain&&(e.subblock_gain=1);e.use_best_huffman=1;e.full_outer_loop=0;break;case 0:e.psymodel=1,0==e.noise_shaping&&(e.noise_shaping=1),0==e.substep_shaping&&(e.substep_shaping=2),e.noise_shaping_amp=2,e.noise_shaping_stop=1,-1==e.subblock_gain&&(e.subblock_gain=1),e.use_best_huffman=1,e.full_outer_loop=0}b.ATH.useAdjust=0>a.athaa_type?
3:a.athaa_type;b.ATH.aaSensitivityP=Math.pow(10,a.athaa_sensitivity/-10);null==a.short_blocks&&(a.short_blocks=sa.short_block_allowed);a.short_blocks!=sa.short_block_allowed||a.mode!=ka.JOINT_STEREO&&a.mode!=ka.STEREO||(a.short_blocks=sa.short_block_coupled);0>a.quant_comp&&(a.quant_comp=1);0>a.quant_comp_short&&(a.quant_comp_short=0);0>a.msfix&&(a.msfix=0);a.exp_nspsytune|=1;0>a.internal_flags.nsPsy.attackthre&&(a.internal_flags.nsPsy.attackthre=Yb.NSATTACKTHRE);0>a.internal_flags.nsPsy.attackthre_s&&
(a.internal_flags.nsPsy.attackthre_s=Yb.NSATTACKTHRE_S);0>a.scale&&(a.scale=1);0>a.ATHtype&&(a.ATHtype=4);0>a.ATHcurve&&(a.ATHcurve=4);0>a.athaa_loudapprox&&(a.athaa_loudapprox=2);0>a.interChRatio&&(a.interChRatio=0);null==a.useTemporal&&(a.useTemporal=!0);b.slot_lag=b.frac_SpF=0;a.VBR==F.vbr_off&&(b.slot_lag=b.frac_SpF=72E3*(a.version+1)*a.brate%a.out_samplerate|0);t.iteration_init(a);p.psymodel_init(a);return 0};this.lame_encode_flush=function(a,e,f,h){var g=a.internal_flags,l=kc([2,1152]),k=0,
m=g.mf_samples_to_encode-c.POSTDELAY,n=b(a);if(1>g.mf_samples_to_encode)return 0;var p=0;a.in_samplerate!=a.out_samplerate&&(m+=16*a.out_samplerate/a.in_samplerate);var q=a.framesize-m%a.framesize;576>q&&(q+=a.framesize);a.encoder_padding=q;for(q=(m+q)/a.framesize;0<q&&0<=k;){var u=n-g.mf_size;m=a.frameNum;u*=a.in_samplerate;u/=a.out_samplerate;1152<u&&(u=1152);1>u&&(u=1);k=h-p;0==h&&(k=0);k=this.lame_encode_buffer(a,l[0],l[1],u,e,f,k);f+=k;p+=k;q-=m!=a.frameNum?1:0}g.mf_samples_to_encode=0;if(0>
k)return k;k=h-p;0==h&&(k=0);d.flush_bitstream(a);k=d.copy_buffer(g,e,f,k,1);if(0>k)return k;f+=k;p+=k;k=h-p;0==h&&(k=0);if(a.write_id3tag_automatic){w.id3tag_write_v1(a);k=d.copy_buffer(g,e,f,k,0);if(0>k)return k;p+=k}return p};this.lame_encode_buffer=function(a,b,d,c,e,f,h){var g=a.internal_flags,k=[null,null];if(4294479419!=g.Class_ID)return-3;if(0==c)return 0;if(null==g.in_buffer_0||g.in_buffer_nsamples<c)g.in_buffer_0=J(c),g.in_buffer_1=J(c),g.in_buffer_nsamples=c;k[0]=g.in_buffer_0;k[1]=g.in_buffer_1;
for(var l=0;l<c;l++)k[0][l]=b[l],1<g.channels_in&&(k[1][l]=d[l]);return z(a,k[0],k[1],c,e,f,h)}}function Lc(){this.setModules=function(c,h){}}function Mc(){this.setModules=function(c,h,n){}}function Nc(){}function Oc(){this.setModules=function(c,h){}}function ra(){this.sampleRate=this.channels=this.dataLen=this.dataOffset=0}function Ob(c){return c.charCodeAt(0)<<24|c.charCodeAt(1)<<16|c.charCodeAt(2)<<8|c.charCodeAt(3)}var ya={fill:function(c,h,n,r){if(2==arguments.length)for(var u=0;u<c.length;u++)c[u]=
arguments[1];else for(u=h;u<n;u++)c[u]=r}},S={arraycopy:function(c,h,n,r,D){for(D=h+D;h<D;)n[r++]=c[h++]}},aa={SQRT2:1.4142135623730951,FAST_LOG10:function(c){return Math.log10(c)},FAST_LOG10_X:function(c,h){return Math.log10(c)*h}};sa.short_block_allowed=new sa(0);sa.short_block_coupled=new sa(1);sa.short_block_dispensed=new sa(2);sa.short_block_forced=new sa(3);var lb={MAX_VALUE:3.4028235E38};F.vbr_off=new F(0);F.vbr_mt=new F(1);F.vbr_rh=new F(2);F.vbr_abr=new F(3);F.vbr_mtrh=new F(4);F.vbr_default=
F.vbr_mtrh;ka.STEREO=new ka(0);ka.JOINT_STEREO=new ka(1);ka.DUAL_CHANNEL=new ka(2);ka.MONO=new ka(3);ka.NOT_SET=new ka(4);W.STEPS_per_dB=100;W.MAX_dB=120;W.GAIN_NOT_ENOUGH_SAMPLES=-24601;W.GAIN_ANALYSIS_ERROR=0;W.GAIN_ANALYSIS_OK=1;W.INIT_GAIN_ANALYSIS_ERROR=0;W.INIT_GAIN_ANALYSIS_OK=1;W.YULE_ORDER=10;W.MAX_ORDER=W.YULE_ORDER;W.MAX_SAMP_FREQ=48E3;W.RMS_WINDOW_TIME_NUMERATOR=1;W.RMS_WINDOW_TIME_DENOMINATOR=20;W.MAX_SAMPLES_PER_WINDOW=W.MAX_SAMP_FREQ*W.RMS_WINDOW_TIME_NUMERATOR/W.RMS_WINDOW_TIME_DENOMINATOR+
1;oa.EQ=function(c,h){return Math.abs(c)>Math.abs(h)?Math.abs(c-h)<=1E-6*Math.abs(c):Math.abs(c-h)<=1E-6*Math.abs(h)};oa.NEQ=function(c,h){return!oa.EQ(c,h)};Ya.NUMTOCENTRIES=100;Ya.MAXFRAMESIZE=2880;var r={t1HB:[1,1,1,0],t2HB:[1,2,1,3,1,1,3,2,0],t3HB:[3,2,1,1,1,1,3,2,0],t5HB:[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],t6HB:[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],t7HB:[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],t8HB:[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,
10,4,13,5,8,11,5,1,12,4,4,1,1,0],t9HB:[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],t10HB:[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],t11HB:[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],t12HB:[9,6,16,33,41,39,38,26,
7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],t13HB:[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,
92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],t15HB:[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,
65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,
30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],t16HB:[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,
378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,
369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],t24HB:[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,
347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,
372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],t32HB:[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],t33HB:[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],t1l:[1,4,3,5],t2l:[1,4,7,4,5,7,6,7,8],t3l:[2,3,7,4,4,7,6,7,8],t5l:[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],t6l:[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],t7l:[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],t8l:[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,
13,13],t9l:[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],t10l:[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],t11l:[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],t12l:[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,
8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],t13l:[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,
12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],t15l:[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,
13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,
14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],t16_5l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,
13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],t16l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,
13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,
15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],t24l:[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,
11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],t32l:[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],t33l:[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8]};r.ht=[new Z(0,0,null,null),new Z(2,0,r.t1HB,r.t1l),new Z(3,
0,r.t2HB,r.t2l),new Z(3,0,r.t3HB,r.t3l),new Z(0,0,null,null),new Z(4,0,r.t5HB,r.t5l),new Z(4,0,r.t6HB,r.t6l),new Z(6,0,r.t7HB,r.t7l),new Z(6,0,r.t8HB,r.t8l),new Z(6,0,r.t9HB,r.t9l),new Z(8,0,r.t10HB,r.t10l),new Z(8,0,r.t11HB,r.t11l),new Z(8,0,r.t12HB,r.t12l),new Z(16,0,r.t13HB,r.t13l),new Z(0,0,null,r.t16_5l),new Z(16,0,r.t15HB,r.t15l),new Z(1,1,r.t16HB,r.t16l),new Z(2,3,r.t16HB,r.t16l),new Z(3,7,r.t16HB,r.t16l),new Z(4,15,r.t16HB,r.t16l),new Z(6,63,r.t16HB,r.t16l),new Z(8,255,r.t16HB,r.t16l),new Z(10,
1023,r.t16HB,r.t16l),new Z(13,8191,r.t16HB,r.t16l),new Z(4,15,r.t24HB,r.t24l),new Z(5,31,r.t24HB,r.t24l),new Z(6,63,r.t24HB,r.t24l),new Z(7,127,r.t24HB,r.t24l),new Z(8,255,r.t24HB,r.t24l),new Z(9,511,r.t24HB,r.t24l),new Z(11,2047,r.t24HB,r.t24l),new Z(13,8191,r.t24HB,r.t24l),new Z(0,0,r.t32HB,r.t32l),new Z(0,0,r.t33HB,r.t33l)];r.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,
720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,
786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,
917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,
1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];r.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];r.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];r.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,
32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];r.samplerate_table=[[22050,24E3,16E3,-1],[44100,48E3,32E3,-1],[11025,12E3,8E3,-1]];r.scfsi_band=[0,6,11,16,21];var Ca={};Ca.SFBMAX=3*c.SBMAX_s;ha.Q_MAX=257;ha.Q_MAX2=116;ha.LARGE_BITS=1E5;ha.IXMAX_VAL=8206;c.ENCDELAY=576;c.POSTDELAY=1152;c.MDCTDELAY=48;c.FFTOFFSET=224+c.MDCTDELAY;c.DECDELAY=528;c.SBLIMIT=32;c.CBANDS=64;c.SBPSY_l=21;c.SBPSY_s=12;c.SBMAX_l=22;c.SBMAX_s=13;c.PSFB21=6;c.PSFB12=6;c.BLKSIZE=1024;c.HBLKSIZE=c.BLKSIZE/2+1;c.BLKSIZE_s=256;c.HBLKSIZE_s=
c.BLKSIZE_s/2+1;c.NORM_TYPE=0;c.START_TYPE=1;c.SHORT_TYPE=2;c.STOP_TYPE=3;c.MPG_MD_LR_LR=0;c.MPG_MD_LR_I=1;c.MPG_MD_MS_LR=2;c.MPG_MD_MS_I=3;c.fircoef=[-.1039435,-.1892065,-.0432472*5,-.155915,3.898045E-17,.0467745*5,.50455,.756825,.187098*5];Y.MFSIZE=3456+c.ENCDELAY-c.MDCTDELAY;Y.MAX_HEADER_BUF=256;Y.MAX_BITS_PER_CHANNEL=4095;Y.MAX_BITS_PER_GRANULE=7680;Y.BPC=320;ra.RIFF=Ob("RIFF");ra.WAVE=Ob("WAVE");ra.fmt_=Ob("fmt ");ra.data=Ob("data");ra.readHeader=function(c){var h=new ra,n=c.getUint32(0,!1);
if(ra.RIFF==n&&(c.getUint32(4,!0),ra.WAVE==c.getUint32(8,!1)&&ra.fmt_==c.getUint32(12,!1))){var r=c.getUint32(16,!0),u=20;switch(r){case 16:case 18:h.channels=c.getUint16(u+2,!0);h.sampleRate=c.getUint32(u+4,!0);break;default:throw"extended fmt chunk not implemented";}u+=r;r=ra.data;for(var B=0;r!=n;){n=c.getUint32(u,!1);B=c.getUint32(u+4,!0);if(r==n)break;u+=B+8}h.dataLen=B;h.dataOffset=u+8;return h}};Ca.SFBMAX=3*c.SBMAX_s;lamejs.Mp3Encoder=function(c,h,n){3!=arguments.length&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),
c=1,h=44100,n=128);var r=new U,u=new Lc,B=new W,F=new oa,f=new xc,b=new ha,z=new Fc,a=new Ya,k=new wc,H=new Oc,e=new yc,m=new sb,d=new Mc,g=new Nc;r.setModules(B,F,f,b,z,a,k,H,g);F.setModules(B,g,k,a);H.setModules(F,k);f.setModules(r);z.setModules(F,e,b,m);b.setModules(m,e,r.enc.psy);e.setModules(F);m.setModules(b);a.setModules(r,F,k);u.setModules(d,g);d.setModules(k,H,f);var t=r.lame_init();t.num_channels=c;t.in_samplerate=h;t.brate=n;t.mode=ka.STEREO;t.quality=3;t.bWriteVbrTag=!1;t.disable_reservoir=
!0;t.write_id3tag_automatic=!1;r.lame_init_params(t);var y=1152,p=0|1.25*y+7200,q=new Int8Array(p);this.encodeBuffer=function(a,b){1==c&&(b=a);a.length>y&&(y=a.length,p=0|1.25*y+7200,q=new Int8Array(p));a=r.lame_encode_buffer(t,a,b,a.length,q,0,p);return new Int8Array(q.subarray(0,a))};this.flush=function(){var a=r.lame_encode_flush(t,q,0,p);return new Int8Array(q.subarray(0,a))}};lamejs.WavHeader=ra}lamejs();
